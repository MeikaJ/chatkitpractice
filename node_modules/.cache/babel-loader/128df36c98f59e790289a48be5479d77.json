{"ast":null,"code":"!function (e, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define(t) : e.Chatkit = t();\n}(this, function () {\n  \"use strict\";\n\n  \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof self && self;\n  var e,\n      t,\n      n = (function (e, t) {\n    var n;\n    \"undefined\" != typeof self && self, n = function () {\n      return function (e) {\n        var t = {};\n\n        function n(r) {\n          if (t[r]) return t[r].exports;\n          var o = t[r] = {\n            i: r,\n            l: !1,\n            exports: {}\n          };\n          return e[r].call(o.exports, o, o.exports, n), o.l = !0, o.exports;\n        }\n\n        return n.m = e, n.c = t, n.d = function (e, t, r) {\n          n.o(e, t) || Object.defineProperty(e, t, {\n            configurable: !1,\n            enumerable: !0,\n            get: r\n          });\n        }, n.n = function (e) {\n          var t = e && e.__esModule ? function () {\n            return e.default;\n          } : function () {\n            return e;\n          };\n          return n.d(t, \"a\", t), t;\n        }, n.o = function (e, t) {\n          return Object.prototype.hasOwnProperty.call(e, t);\n        }, n.p = \"\", n(n.s = 10);\n      }([function (e, t, n) {\n        function r(e) {\n          var t = {};\n          if (!e) return t;\n\n          for (var n = 0, r = e.split(\"\\r\\n\"); n < r.length; n++) {\n            var o = r[n],\n                i = o.indexOf(\": \");\n\n            if (i > 0) {\n              var s = o.substring(0, i),\n                  a = o.substring(i + 2);\n              t[s] = a;\n            }\n          }\n\n          return t;\n        }\n\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        }), t.responseToHeadersObject = r;\n\n        var o = function () {\n          function e(e, t, n) {\n            this.statusCode = e, this.headers = t, this.info = n;\n          }\n\n          return e.fromXHR = function (t) {\n            var n = t.responseText;\n\n            try {\n              n = JSON.parse(t.responseText);\n            } catch (e) {}\n\n            return new e(t.status, r(t.getAllResponseHeaders()), n);\n          }, e;\n        }();\n\n        t.ErrorResponse = o;\n\n        var i = function () {\n          return function (e) {\n            this.error = e;\n          };\n        }();\n\n        t.NetworkError = i;\n\n        var s = function () {\n          return function (e) {\n            this.error = e;\n          };\n        }();\n\n        t.ProtocolError = s, function (e) {\n          e[e.UNSENT = 0] = \"UNSENT\", e[e.OPENED = 1] = \"OPENED\", e[e.HEADERS_RECEIVED = 2] = \"HEADERS_RECEIVED\", e[e.LOADING = 3] = \"LOADING\", e[e.DONE = 4] = \"DONE\";\n        }(t.XhrReadyState || (t.XhrReadyState = {}));\n      }, function (e, t, n) {\n        var r;\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        }), function (e) {\n          e[e.VERBOSE = 1] = \"VERBOSE\", e[e.DEBUG = 2] = \"DEBUG\", e[e.INFO = 3] = \"INFO\", e[e.WARNING = 4] = \"WARNING\", e[e.ERROR = 5] = \"ERROR\";\n        }(r = t.LogLevel || (t.LogLevel = {}));\n\n        var o = function () {\n          function e(e) {\n            void 0 === e && (e = 2), this.threshold = e;\n            var t = Array(),\n                n = \"--------------------------------------------------------------------------------\";\n            window.console.group || (window.console.group = function (e) {\n              t.push(e), window.console.log(\"%c \\nBEGIN GROUP: %c\", n, e);\n            }), window.console.groupEnd || (window.console.groupEnd = function () {\n              window.console.log(\"END GROUP: %c\\n%c\", t.pop(), n);\n            });\n          }\n\n          return e.prototype.verbose = function () {\n            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];\n\n            this.log(window.console.log, r.VERBOSE, e);\n          }, e.prototype.debug = function () {\n            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];\n\n            this.log(window.console.log, r.DEBUG, e);\n          }, e.prototype.info = function () {\n            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];\n\n            this.log(window.console.info, r.INFO, e);\n          }, e.prototype.warn = function () {\n            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];\n\n            this.log(window.console.warn, r.WARNING, e);\n          }, e.prototype.error = function () {\n            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];\n\n            this.log(window.console.error, r.ERROR, e);\n          }, e.prototype.log = function (e, t, n) {\n            var o = this;\n\n            if (t >= this.threshold) {\n              var i = \"Logger.\" + r[t];\n              n.length > 1 ? (window.console.group(), n.forEach(function (t) {\n                o.errorAwareLog(e, t, i);\n              }), window.console.groupEnd()) : this.errorAwareLog(e, n[0], i);\n            }\n          }, e.prototype.errorAwareLog = function (e, t, n) {\n            if (null != t && t.info && t.info.error_uri) {\n              var r = t.info.error_description;\n              e((r || \"An error has occurred\") + \". More information can be found at \" + t.info.error_uri + \". Error object: \", t);\n            } else e(n + \": \", t);\n          }, e;\n        }();\n\n        t.ConsoleLogger = o;\n\n        var i = function () {\n          function e() {}\n\n          return e.prototype.verbose = function () {\n            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];\n          }, e.prototype.debug = function () {\n            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];\n          }, e.prototype.info = function () {\n            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];\n          }, e.prototype.warn = function () {\n            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];\n          }, e.prototype.error = function () {\n            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];\n          }, e;\n        }();\n\n        t.EmptyLogger = i;\n      }, function (e, t, n) {\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        });\n        var r = n(0);\n\n        t.createRetryStrategyOptionsOrDefault = function (e) {\n          var t = e.initialTimeoutMillis || 1e3,\n              n = e.maxTimeoutMillis || 5e3,\n              r = -1;\n          return void 0 !== e.limit && null != e.limit && (r = e.limit), {\n            increaseTimeout: void 0 !== e.increaseTimeout ? e.increaseTimeout : function (e) {\n              return 2 * e > n ? n : 2 * e;\n            },\n            initialTimeoutMillis: t,\n            limit: r,\n            maxTimeoutMillis: n\n          };\n        };\n\n        var o = function () {\n          return function (e) {\n            this.waitTimeMillis = e;\n          };\n        }();\n\n        t.Retry = o;\n\n        var i = function () {\n          return function (e) {\n            this.error = e;\n          };\n        }();\n\n        t.DoNotRetry = i;\n\n        var s = function () {\n          function e(e, t, n) {\n            this.options = e, this.logger = t, this.retryUnsafeRequests = n, this.currentRetryCount = 0, this.initialTimeoutMillis = e.initialTimeoutMillis, this.maxTimeoutMillis = e.maxTimeoutMillis, this.limit = e.limit, this.increaseTimeoutFunction = e.increaseTimeout, this.currentBackoffMillis = this.initialTimeoutMillis;\n          }\n\n          return e.prototype.attemptRetry = function (e) {\n            if (this.logger.verbose(this.constructor.name + \": Error received\", e), this.currentRetryCount >= this.limit && this.limit >= 0) return this.logger.verbose(this.constructor.name + \": Retry count is over the maximum limit: \" + this.limit), new i(e);\n            if (null == e) return new o(this.calculateMillisToRetry());\n            if (e instanceof r.ErrorResponse && e.headers[\"Retry-After\"]) return this.logger.verbose(this.constructor.name + \": Retry-After header is present, retrying in \" + e.headers[\"Retry-After\"]), new o(1e3 * parseInt(e.headers[\"Retry-After\"], 10));\n            if (this.retryUnsafeRequests) return new o(this.calculateMillisToRetry());\n\n            switch (e.constructor) {\n              case r.ErrorResponse:\n                var t = e.statusCode,\n                    n = e.headers[\"Request-Method\"];\n                return t >= 500 && t < 600 && (\"GET\" === (s = (s = n).toUpperCase()) || \"HEAD\" === s || \"OPTIONS\" === s || \"SUBSCRIBE\" === s) ? (this.logger.verbose(this.constructor.name + \": Encountered an error with status code \" + t + \" and request method \" + n + \", will retry\"), new o(this.calculateMillisToRetry())) : (this.logger.verbose(this.constructor.name + \": Encountered an error with status code \" + t + \" and request method \" + n + \", will not retry\", e), new i(e));\n\n              case r.NetworkError:\n                return this.logger.verbose(this.constructor.name + \": Encountered a network error, will retry\", e), new o(this.calculateMillisToRetry());\n\n              case r.ProtocolError:\n                return this.logger.verbose(this.constructor.name + \": Encountered a protocol error, will retry\", e), new o(this.calculateMillisToRetry());\n\n              default:\n                return this.logger.verbose(this.constructor.name + \": Encountered an error, will retry\", e), new o(this.calculateMillisToRetry());\n            }\n\n            var s;\n          }, e.prototype.calculateMillisToRetry = function () {\n            return this.currentBackoffMillis = this.increaseTimeoutFunction(this.currentBackoffMillis), this.logger.verbose(this.constructor.name + \": Retrying in \" + this.currentBackoffMillis + \"ms\"), this.currentBackoffMillis;\n          }, e;\n        }();\n\n        t.RetryResolution = s;\n      }, function (e, t, n) {\n        var r = this && this.__assign || Object.assign || function (e) {\n          for (var t, n = 1, r = arguments.length; n < r; n++) for (var o in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);\n\n          return e;\n        };\n\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        });\n\n        var o = n(1),\n            i = n(4),\n            s = n(5),\n            a = n(6),\n            u = n(11),\n            c = n(12),\n            h = n(7),\n            d = n(13),\n            l = n(14),\n            f = n(8),\n            p = function () {\n          function e(e) {\n            this.options = e, this.host = e.host.replace(/(\\/)+$/, \"\");\n            var t = e.logger || new o.ConsoleLogger();\n            this.logger = t, this.websocketTransport = new l.default(this.host, t), this.httpTransport = new d.default(this.host, e.encrypted), this.sdkProduct = e.sdkProduct || \"unknown\", this.sdkVersion = e.sdkVersion || \"unknown\", this.sdkLanguage = e.sdkLanguage || \"javascript\", this.sdkPlatform = navigator ? \"ReactNative\" === navigator.product ? \"react-native\" : \"web\" : \"node\";\n          }\n\n          return e.prototype.request = function (e, t) {\n            var n = this;\n            return e.tokenProvider ? e.tokenProvider.fetchToken(t).then(function (t) {\n              var n;\n              return void 0 !== e.headers ? e.headers.Authorization = \"Bearer \" + t : e.headers = ((n = {}).Authorization = \"Bearer \" + t, n), e;\n            }).then(function (e) {\n              return n.makeRequest(e);\n            }) : this.makeRequest(e);\n          }, e.prototype.subscribeResuming = function (e, t, n, o, i, a) {\n            var d = c.replaceMissingListenersWithNoOps(n),\n                l = u.subscribeStrategyListenersFromSubscriptionListeners(d),\n                p = !1;\n            return s.createResumingStrategy(o, h.createTokenProvidingStrategy(f.createTransportStrategy(e, this.websocketTransport, this.logger), this.logger, a), this.logger, i)({\n              onEnd: l.onEnd,\n              onError: l.onError,\n              onEvent: l.onEvent,\n              onOpen: function (e) {\n                p || (p = !0, l.onOpen(e)), d.onSubscribe();\n              },\n              onRetrying: l.onRetrying\n            }, r({}, t, this.infoHeaders()));\n          }, e.prototype.subscribeNonResuming = function (e, t, n, o, i) {\n            var s = c.replaceMissingListenersWithNoOps(n),\n                d = u.subscribeStrategyListenersFromSubscriptionListeners(s),\n                l = !1;\n            return a.createRetryingStrategy(o, h.createTokenProvidingStrategy(f.createTransportStrategy(e, this.websocketTransport, this.logger), this.logger, i), this.logger)({\n              onEnd: d.onEnd,\n              onError: d.onError,\n              onEvent: d.onEvent,\n              onOpen: function (e) {\n                l || (l = !0, d.onOpen(e)), s.onSubscribe();\n              },\n              onRetrying: d.onRetrying\n            }, r({}, t, this.infoHeaders()));\n          }, e.prototype.infoHeaders = function () {\n            return {\n              \"X-SDK-Language\": this.sdkLanguage,\n              \"X-SDK-Platform\": this.sdkPlatform,\n              \"X-SDK-Product\": this.sdkProduct,\n              \"X-SDK-Version\": this.sdkVersion\n            };\n          }, e.prototype.makeRequest = function (e) {\n            var t = this;\n            return i.executeNetworkRequest(function () {\n              return t.httpTransport.request(r({}, e, {\n                headers: r({}, e.headers, t.infoHeaders())\n              }));\n            }, e).catch(function (e) {\n              throw t.logger.error(e), e;\n            });\n          }, e;\n        }();\n\n        t.BaseClient = p;\n      }, function (e, t, n) {\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        });\n        var r = n(0);\n\n        function o(e, t, n) {\n          return e.onreadystatechange = function () {\n            4 === e.readyState && (e.status >= 200 && e.status < 300 ? t(e.response) : 0 !== e.status ? n(r.ErrorResponse.fromXHR(e)) : n(new r.NetworkError(\"No Connection\")));\n          }, e;\n        }\n\n        t.executeNetworkRequest = function (e, t) {\n          return new Promise(function (n, r) {\n            !function (e, t) {\n              t.json ? e.send(JSON.stringify(t.json)) : e.send(t.body);\n            }(o(e(), n, r), t);\n          });\n        }, t.sendRawRequest = function (e) {\n          return new Promise(function (t, n) {\n            var r = o(new window.XMLHttpRequest(), t, n);\n            if (r.withCredentials = Boolean(e.withCredentials), r.open(e.method.toUpperCase(), e.url, !0), e.headers) for (var i in e.headers) e.headers.hasOwnProperty(i) && r.setRequestHeader(i, e.headers[i]);\n            r.send(e.body);\n          });\n        };\n      }, function (e, t, n) {\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        });\n        var r = n(0),\n            o = n(2);\n\n        t.createResumingStrategy = function (e, t, n, r) {\n          var s = o.createRetryStrategyOptionsOrDefault(e),\n              a = new o.RetryResolution(s, n);\n          return function (e, r) {\n            return new i(n, r, t, e, a);\n          };\n        };\n\n        var i = function () {\n          return function (e, t, n, r, o) {\n            var i = this;\n            this.unsubscribe = function () {\n              i.state.unsubscribe();\n            }, this.onTransition = function (e) {\n              i.state = e;\n            }, this.state = new s(this.onTransition, e, t, n, r, o);\n          };\n        }(),\n            s = function () {\n          function e(e, t, n, r, o, i, s) {\n            var c = this;\n            this.onTransition = e, this.logger = t, this.headers = n, this.nextSubscribeStrategy = r, this.listeners = o, this.retryResolution = i, this.initialEventId = s;\n            var d = s;\n            t.verbose(\"ResumingSubscription: transitioning to OpeningSubscriptionState\"), d && (n[\"Last-Event-Id\"] = d, t.verbose(\"ResumingSubscription: initialEventId is \" + d)), this.underlyingSubscription = r({\n              onEnd: function (n) {\n                e(new h(t, o, n));\n              },\n              onError: function (s) {\n                e(new u(s, e, t, n, o, r, i, d));\n              },\n              onEvent: function (e) {\n                d = e.eventId, o.onEvent(e);\n              },\n              onOpen: function (n) {\n                e(new a(t, n, o, c.underlyingSubscription, e));\n              },\n              onRetrying: o.onRetrying\n            }, n);\n          }\n\n          return e.prototype.unsubscribe = function () {\n            this.onTransition(new c(this.logger)), null != this.underlyingSubscription && this.underlyingSubscription.unsubscribe();\n          }, e;\n        }(),\n            a = function () {\n          function e(e, t, n, r, o) {\n            this.logger = e, this.headers = t, this.listeners = n, this.underlyingSubscription = r, this.onTransition = o, e.verbose(\"ResumingSubscription: transitioning to OpenSubscriptionState\"), n.onOpen(t);\n          }\n\n          return e.prototype.unsubscribe = function () {\n            this.onTransition(new c(this.logger)), this.underlyingSubscription.unsubscribe();\n          }, e;\n        }(),\n            u = function () {\n          function e(e, t, n, i, s, u, c, l) {\n            var f = this;\n            this.onTransition = t, this.logger = n, this.headers = i, this.listeners = s, this.nextSubscribeStrategy = u, this.retryResolution = c, this.timeout = -1, n.verbose(\"ResumingSubscription: transitioning to ResumingSubscriptionState\");\n\n            var p = function (e, i) {\n              s.onRetrying();\n              var a,\n                  u = ((a = e) instanceof r.ErrorResponse && (a.headers[\"Request-Method\"] = \"SUBSCRIBE\"), c.attemptRetry(a));\n              u instanceof o.Retry ? f.timeout = window.setTimeout(function () {\n                g(i);\n              }, u.waitTimeMillis) : t(new d(n, s, e));\n            },\n                g = function (e) {\n              n.verbose(\"ResumingSubscription: trying to re-establish the subscription\"), e && (n.verbose(\"ResumingSubscription: lastEventId: \" + e), i[\"Last-Event-Id\"] = e), f.underlyingSubscription = u({\n                onEnd: function (e) {\n                  t(new h(n, s, e));\n                },\n                onError: function (e) {\n                  p(e, l);\n                },\n                onEvent: function (e) {\n                  l = e.eventId, s.onEvent(e);\n                },\n                onOpen: function (e) {\n                  t(new a(n, e, s, f.underlyingSubscription, t));\n                },\n                onRetrying: s.onRetrying\n              }, i);\n            };\n\n            p(e, l);\n          }\n\n          return e.prototype.unsubscribe = function () {\n            this.onTransition(new c(this.logger)), window.clearTimeout(this.timeout), null != this.underlyingSubscription && this.underlyingSubscription.unsubscribe();\n          }, e;\n        }(),\n            c = function () {\n          function e(e, t) {\n            this.logger = e, e.verbose(\"ResumingSubscription: transitioning to EndingSubscriptionState\");\n          }\n\n          return e.prototype.unsubscribe = function () {\n            throw new Error(\"Subscription is already ending\");\n          }, e;\n        }(),\n            h = function () {\n          function e(e, t, n) {\n            this.logger = e, this.listeners = t, e.verbose(\"ResumingSubscription: transitioning to EndedSubscriptionState\"), t.onEnd(n);\n          }\n\n          return e.prototype.unsubscribe = function () {\n            throw new Error(\"Subscription has already ended\");\n          }, e;\n        }(),\n            d = function () {\n          function e(e, t, n) {\n            this.logger = e, this.listeners = t, e.verbose(\"ResumingSubscription: transitioning to FailedSubscriptionState\", n), t.onError(n);\n          }\n\n          return e.prototype.unsubscribe = function () {\n            throw new Error(\"Subscription has already ended\");\n          }, e;\n        }();\n      }, function (e, t, n) {\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        });\n        var r = n(0),\n            o = n(2);\n\n        t.createRetryingStrategy = function (e, t, n) {\n          var r = o.createRetryStrategyOptionsOrDefault(e),\n              s = new o.RetryResolution(r, n);\n          return function (e, r) {\n            return new i(n, r, e, t, s);\n          };\n        };\n\n        var i = function () {\n          return function (e, t, n, r, o) {\n            var i = this;\n            this.unsubscribe = function () {\n              i.state.unsubscribe();\n            }, this.onTransition = function (e) {\n              i.state = e;\n            }, this.state = new s(this.onTransition, e, t, n, r, o);\n          };\n        }(),\n            s = function () {\n          function e(e, t, n, r, o, i) {\n            var s = this;\n            this.logger = t, this.headers = n, this.listeners = r, this.nextSubscribeStrategy = o, this.retryResolution = i, t.verbose(\"RetryingSubscription: transitioning to OpeningSubscriptionState\"), this.underlyingSubscription = o({\n              onEnd: function (n) {\n                return e(new c(t, r, n));\n              },\n              onError: function (s) {\n                return e(new a(s, e, t, n, r, o, i));\n              },\n              onEvent: r.onEvent,\n              onOpen: function (n) {\n                return e(new u(t, r, n, s.underlyingSubscription, e));\n              },\n              onRetrying: r.onRetrying\n            }, n);\n          }\n\n          return e.prototype.unsubscribe = function () {\n            throw this.underlyingSubscription.unsubscribe(), new Error(\"Method not implemented.\");\n          }, e;\n        }(),\n            a = function () {\n          function e(e, t, n, i, s, a, d) {\n            var l = this;\n            this.onTransition = t, this.logger = n, this.headers = i, this.listeners = s, this.nextSubscribeStrategy = a, this.retryResolution = d, this.timeout = -1, n.verbose(\"RetryingSubscription: transitioning to RetryingSubscriptionState\");\n\n            var f = function (e) {\n              s.onRetrying();\n              var i,\n                  a = ((i = e) instanceof r.ErrorResponse && (i.headers[\"Request-Method\"] = \"SUBSCRIBE\"), d.attemptRetry(i));\n              a instanceof o.Retry ? l.timeout = window.setTimeout(function () {\n                p();\n              }, a.waitTimeMillis) : t(new h(n, s, e));\n            },\n                p = function () {\n              n.verbose(\"RetryingSubscription: trying to re-establish the subscription\");\n              var e = a({\n                onEnd: function (e) {\n                  return t(new c(n, s, e));\n                },\n                onError: function (e) {\n                  return f(e);\n                },\n                onEvent: s.onEvent,\n                onOpen: function (r) {\n                  t(new u(n, s, r, e, t));\n                },\n                onRetrying: s.onRetrying\n              }, i);\n            };\n\n            f(e);\n          }\n\n          return e.prototype.unsubscribe = function () {\n            window.clearTimeout(this.timeout), this.onTransition(new c(this.logger, this.listeners));\n          }, e;\n        }(),\n            u = function () {\n          function e(e, t, n, r, o) {\n            this.logger = e, this.listeners = t, this.headers = n, this.underlyingSubscription = r, this.onTransition = o, e.verbose(\"RetryingSubscription: transitioning to OpenSubscriptionState\"), t.onOpen(n);\n          }\n\n          return e.prototype.unsubscribe = function () {\n            this.underlyingSubscription.unsubscribe(), this.onTransition(new c(this.logger, this.listeners));\n          }, e;\n        }(),\n            c = function () {\n          function e(e, t, n) {\n            this.logger = e, this.listeners = t, e.verbose(\"RetryingSubscription: transitioning to EndedSubscriptionState\"), t.onEnd(n);\n          }\n\n          return e.prototype.unsubscribe = function () {\n            throw new Error(\"Subscription has already ended\");\n          }, e;\n        }(),\n            h = function () {\n          function e(e, t, n) {\n            this.logger = e, this.listeners = t, e.verbose(\"RetryingSubscription: transitioning to FailedSubscriptionState\", n), t.onError(n);\n          }\n\n          return e.prototype.unsubscribe = function () {\n            throw new Error(\"Subscription has already ended\");\n          }, e;\n        }();\n      }, function (e, t, n) {\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        });\n        var r = n(0);\n\n        t.createTokenProvidingStrategy = function (e, t, n) {\n          return n ? function (r, i) {\n            return new o(t, r, i, n, e);\n          } : e;\n        };\n\n        var o = function () {\n          function e(e, t, n, r, o) {\n            var a = this;\n            this.logger = e, this.listeners = t, this.headers = n, this.tokenProvider = r, this.nextSubscribeStrategy = o, this.unsubscribe = function () {\n              a.state.unsubscribe(), a.state = new s(a.logger);\n            }, this.state = new i(e, n, o), this.subscribe();\n          }\n\n          return e.prototype.subscribe = function () {\n            var e = this;\n            this.tokenProvider.fetchToken().then(function (t) {\n              var n = Object.assign({}, e.listeners);\n              e.state.subscribe(t, {\n                onEnd: function (t) {\n                  e.state = new s(e.logger), n.onEnd(t);\n                },\n                onError: function (r) {\n                  e.isTokenExpiredError(r) ? (e.tokenProvider.clearToken(t), e.subscribe()) : (e.state = new s(e.logger), n.onError(r));\n                },\n                onEvent: e.listeners.onEvent,\n                onOpen: e.listeners.onOpen\n              });\n            }).catch(function (t) {\n              e.logger.debug(\"TokenProvidingSubscription: error when fetching token:\", t), e.state = new s(e.logger), e.listeners.onError(t);\n            });\n          }, e.prototype.isTokenExpiredError = function (e) {\n            return e instanceof r.ErrorResponse && 401 === e.statusCode && \"authentication/expired\" === e.info;\n          }, e;\n        }(),\n            i = function () {\n          function e(e, t, n) {\n            this.logger = e, this.headers = t, this.nextSubscribeStrategy = n, e.verbose(\"TokenProvidingSubscription: transitioning to ActiveState\");\n          }\n\n          return e.prototype.subscribe = function (e, t) {\n            var n = this;\n            this.putTokenIntoHeader(e), this.underlyingSubscription = this.nextSubscribeStrategy({\n              onEnd: function (e) {\n                n.logger.verbose(\"TokenProvidingSubscription: subscription ended\"), t.onEnd(e);\n              },\n              onError: function (e) {\n                n.logger.verbose(\"TokenProvidingSubscription: subscription errored:\", e), t.onError(e);\n              },\n              onEvent: t.onEvent,\n              onOpen: function (e) {\n                n.logger.verbose(\"TokenProvidingSubscription: subscription opened\"), t.onOpen(e);\n              },\n              onRetrying: t.onRetrying\n            }, this.headers);\n          }, e.prototype.unsubscribe = function () {\n            null != this.underlyingSubscription && this.underlyingSubscription.unsubscribe();\n          }, e.prototype.putTokenIntoHeader = function (e) {\n            this.headers.Authorization = \"Bearer \" + e, this.logger.verbose(\"TokenProvidingSubscription: token fetched: \" + e);\n          }, e;\n        }(),\n            s = function () {\n          function e(e) {\n            this.logger = e, e.verbose(\"TokenProvidingSubscription: transitioning to InactiveState\");\n          }\n\n          return e.prototype.subscribe = function (e, t) {\n            this.logger.verbose(\"TokenProvidingSubscription: subscribe called in Inactive state; doing nothing\");\n          }, e.prototype.unsubscribe = function () {\n            this.logger.verbose(\"TokenProvidingSubscription: unsubscribe called in Inactive state; doing nothing\");\n          }, e;\n        }();\n      }, function (e, t, n) {\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        }), t.createTransportStrategy = function (e, t, n) {\n          return function (n, r) {\n            return t.subscribe(e, n, r);\n          };\n        };\n      }, function (e, t, n) {\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        }), t.HOST_BASE = \"pusherplatform.io\";\n      }, function (e, t, n) {\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        });\n        var r = n(3);\n        t.BaseClient = r.BaseClient;\n        var o = n(9);\n        t.HOST_BASE = o.HOST_BASE;\n        var i = n(15);\n        t.Instance = i.default;\n        var s = n(1);\n        t.ConsoleLogger = s.ConsoleLogger, t.EmptyLogger = s.EmptyLogger;\n        var a = n(0);\n        t.ErrorResponse = a.ErrorResponse, t.NetworkError = a.NetworkError, t.responseToHeadersObject = a.responseToHeadersObject, t.XhrReadyState = a.XhrReadyState;\n        var u = n(4);\n        t.executeNetworkRequest = u.executeNetworkRequest, t.sendRawRequest = u.sendRawRequest;\n        var c = n(5);\n        t.createResumingStrategy = c.createResumingStrategy;\n        var h = n(2);\n        t.createRetryStrategyOptionsOrDefault = h.createRetryStrategyOptionsOrDefault, t.DoNotRetry = h.DoNotRetry, t.Retry = h.Retry, t.RetryResolution = h.RetryResolution;\n        var d = n(6);\n        t.createRetryingStrategy = d.createRetryingStrategy;\n        var l = n(7);\n        t.createTokenProvidingStrategy = l.createTokenProvidingStrategy;\n        var f = n(8);\n        t.createTransportStrategy = f.createTransportStrategy, t.default = {\n          BaseClient: r.BaseClient,\n          ConsoleLogger: s.ConsoleLogger,\n          EmptyLogger: s.EmptyLogger,\n          Instance: i.default\n        };\n      }, function (e, t, n) {\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        }), t.subscribeStrategyListenersFromSubscriptionListeners = function (e) {\n          return {\n            onEnd: e.onEnd,\n            onError: e.onError,\n            onEvent: e.onEvent,\n            onOpen: e.onOpen,\n            onRetrying: e.onRetrying\n          };\n        };\n      }, function (e, t, n) {\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        }), t.replaceMissingListenersWithNoOps = function (e) {\n          return {\n            onEnd: e.onEnd || function (e) {},\n            onError: e.onError || function (e) {},\n            onEvent: e.onEvent || function (e) {},\n            onOpen: e.onOpen || function (e) {},\n            onRetrying: e.onRetrying || function () {},\n            onSubscribe: e.onSubscribe || function () {}\n          };\n        };\n      }, function (e, t, n) {\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        });\n        var r,\n            o = n(0);\n        !function (e) {\n          e[e.UNOPENED = 0] = \"UNOPENED\", e[e.OPENING = 1] = \"OPENING\", e[e.OPEN = 2] = \"OPEN\", e[e.ENDING = 3] = \"ENDING\", e[e.ENDED = 4] = \"ENDED\";\n        }(r = t.HttpTransportState || (t.HttpTransportState = {}));\n\n        var i = function () {\n          function e(e, t) {\n            var n = this;\n            return this.gotEOS = !1, this.lastNewlineIndex = 0, this.state = r.UNOPENED, this.xhr = e, this.listeners = t, this.xhr.onreadystatechange = function () {\n              switch (n.xhr.readyState) {\n                case o.XhrReadyState.UNSENT:\n                case o.XhrReadyState.OPENED:\n                case o.XhrReadyState.HEADERS_RECEIVED:\n                  n.assertStateIsIn(r.OPENING);\n                  break;\n\n                case o.XhrReadyState.LOADING:\n                  n.onLoading();\n                  break;\n\n                case o.XhrReadyState.DONE:\n                  n.onDone();\n              }\n            }, this.state = r.OPENING, this.xhr.send(), this;\n          }\n\n          return e.prototype.unsubscribe = function () {\n            this.state = r.ENDED, this.xhr.abort(), this.listeners.onEnd && this.listeners.onEnd(null);\n          }, e.prototype.onLoading = function () {\n            if (this.assertStateIsIn(r.OPENING, r.OPEN, r.ENDING), 200 === this.xhr.status) {\n              this.state === r.OPENING && (this.state = r.OPEN, this.listeners.onOpen && this.listeners.onOpen(o.responseToHeadersObject(this.xhr.getAllResponseHeaders()))), this.assertStateIsIn(r.OPEN);\n              var e = this.onChunk();\n              this.assertStateIsIn(r.OPEN, r.ENDING), e && (this.state = r.ENDED, e instanceof o.ErrorResponse && 204 !== e.statusCode && this.listeners.onError && this.listeners.onError(e));\n            }\n          }, e.prototype.onDone = function () {\n            if (200 === this.xhr.status) {\n              this.state === r.OPENING && (this.state = r.OPEN, this.listeners.onOpen && this.listeners.onOpen(o.responseToHeadersObject(this.xhr.getAllResponseHeaders()))), this.assertStateIsIn(r.OPEN, r.ENDING);\n              var e = this.onChunk();\n              e ? (this.state = r.ENDED, 204 === e.statusCode ? this.listeners.onEnd && this.listeners.onEnd(null) : this.listeners.onError && this.listeners.onError(e)) : this.state <= r.ENDING ? this.listeners.onError && this.listeners.onError(new Error(\"HTTP response ended without receiving EOS message\")) : this.listeners.onEnd && this.listeners.onEnd(null);\n            } else {\n              if (this.assertStateIsIn(r.OPENING, r.OPEN, r.ENDED), this.state === r.ENDED) return;\n              0 === this.xhr.status ? this.listeners.onError && this.listeners.onError(new o.NetworkError(\"Connection lost.\")) : this.listeners.onError && this.listeners.onError(o.ErrorResponse.fromXHR(this.xhr));\n            }\n          }, e.prototype.onChunk = function () {\n            this.assertStateIsIn(r.OPEN);\n            var e = this.xhr.responseText,\n                t = e.lastIndexOf(\"\\n\");\n\n            if (t > this.lastNewlineIndex) {\n              var n = e.slice(this.lastNewlineIndex, t).split(\"\\n\");\n              this.lastNewlineIndex = t;\n\n              for (var o = 0, i = n; o < i.length; o++) {\n                var s = i[o];\n\n                if (0 !== s.length) {\n                  var a = JSON.parse(s),\n                      u = this.onMessage(a);\n                  if (null != u) return u;\n                }\n              }\n            }\n          }, e.prototype.assertStateIsIn = function () {\n            for (var e = this, t = [], n = 0; n < arguments.length; n++) t[n] = arguments[n];\n\n            if (!t.some(function (t) {\n              return t === e.state;\n            })) {\n              var o = t.map(function (e) {\n                return r[e];\n              }).join(\", \"),\n                  i = r[this.state];\n              window.console.warn(\"Expected this.state to be one of [\" + o + \"] but it is \" + i);\n            }\n          }, e.prototype.onMessage = function (e) {\n            switch (this.assertStateIsIn(r.OPEN), this.verifyMessage(e), e[0]) {\n              case 0:\n                return null;\n\n              case 1:\n                return this.onEventMessage(e);\n\n              case 255:\n                return this.onEOSMessage(e);\n\n              default:\n                return new Error(\"Unknown Message: \" + JSON.stringify(e));\n            }\n          }, e.prototype.onEventMessage = function (e) {\n            if (this.assertStateIsIn(r.OPEN), 4 !== e.length) return new Error(\"Event message has \" + e.length + \" elements (expected 4)\");\n            e[0];\n            var t = e[1],\n                n = e[2],\n                o = e[3];\n            return \"string\" != typeof t ? new Error(\"Invalid event ID in message: \" + JSON.stringify(e)) : \"object\" != typeof n || Array.isArray(n) ? new Error(\"Invalid event headers in message: \" + JSON.stringify(e)) : (this.listeners.onEvent && this.listeners.onEvent({\n              body: o,\n              headers: n,\n              eventId: t\n            }), null);\n          }, e.prototype.onEOSMessage = function (e) {\n            if (this.assertStateIsIn(r.OPEN), 4 !== e.length) return new Error(\"EOS message has \" + e.length + \" elements (expected 4)\");\n            e[0];\n            var t = e[1],\n                n = e[2],\n                i = e[3];\n            return \"number\" != typeof t ? new Error(\"Invalid EOS Status Code\") : \"object\" != typeof n || Array.isArray(n) ? new Error(\"Invalid EOS ElementsHeaders\") : (this.state = r.ENDING, new o.ErrorResponse(t, n, i));\n          }, e.prototype.verifyMessage = function (e) {\n            return this.gotEOS ? new Error(\"Got another message after EOS message\") : Array.isArray(e) ? e.length < 1 ? new Error(\"Message is empty array\") : void 0 : new Error(\"Message is not an array\");\n          }, e;\n        }(),\n            s = function () {\n          function e(e, t) {\n            void 0 === t && (t = !0), this.baseURL = (t ? \"https\" : \"http\") + \"://\" + e;\n          }\n\n          return e.prototype.request = function (e) {\n            return this.createXHR(this.baseURL, e);\n          }, e.prototype.subscribe = function (e, t, n) {\n            var r = {\n              headers: n,\n              method: \"SUBSCRIBE\",\n              path: e\n            };\n            return new i(this.createXHR(this.baseURL, r), t);\n          }, e.prototype.createXHR = function (e, t) {\n            var n = new window.XMLHttpRequest(),\n                r = e + \"/\" + t.path.replace(/^\\/+/, \"\");\n            if (n.open(t.method.toUpperCase(), r, !0), n = this.setJSONHeaderIfAppropriate(n, t), t.jwt && n.setRequestHeader(\"authorization\", \"Bearer \" + t.jwt), t.headers) for (var o in t.headers) t.headers.hasOwnProperty(o) && n.setRequestHeader(o, t.headers[o]);\n            return n;\n          }, e.prototype.setJSONHeaderIfAppropriate = function (e, t) {\n            return t.json && e.setRequestHeader(\"content-type\", \"application/json\"), e;\n          }, e;\n        }();\n\n        t.default = s;\n      }, function (e, t, n) {\n        var r = this && this.__assign || Object.assign || function (e) {\n          for (var t, n = 1, r = arguments.length; n < r; n++) for (var o in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);\n\n          return e;\n        };\n\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        });\n        var o,\n            i = n(0);\n        !function (e) {\n          e[e.Connecting = 0] = \"Connecting\", e[e.Open = 1] = \"Open\", e[e.Closing = 2] = \"Closing\", e[e.Closed = 3] = \"Closed\";\n        }(o = t.WSReadyState || (t.WSReadyState = {}));\n\n        var s = function () {\n          function e() {\n            this.subscriptions = {};\n          }\n\n          return e.prototype.add = function (e, t, n, r) {\n            return this.subscriptions[e] = {\n              headers: r,\n              listeners: n,\n              path: t\n            }, e;\n          }, e.prototype.has = function (e) {\n            return void 0 !== this.subscriptions[e];\n          }, e.prototype.isEmpty = function () {\n            return 0 === Object.keys(this.subscriptions).length;\n          }, e.prototype.remove = function (e) {\n            return delete this.subscriptions[e];\n          }, e.prototype.get = function (e) {\n            return this.subscriptions[e];\n          }, e.prototype.getAll = function () {\n            return this.subscriptions;\n          }, e.prototype.getAllAsArray = function () {\n            var e = this;\n            return Object.keys(this.subscriptions).map(function (t) {\n              return r({\n                subID: parseInt(t, 10)\n              }, e.subscriptions[parseInt(t, 10)]);\n            });\n          }, e.prototype.removeAll = function () {\n            this.subscriptions = {};\n          }, e;\n        }(),\n            a = function () {\n          function e(e, t) {\n            this.wsTransport = e, this.subID = t;\n          }\n\n          return e.prototype.unsubscribe = function () {\n            this.wsTransport.unsubscribe(this.subID);\n          }, e;\n        }(),\n            u = function () {\n          function e(e, t) {\n            this.webSocketPath = \"/ws\", this.forcedClose = !1, this.closedError = null, this.lastSentPingID = null, this.baseURL = \"wss://\" + e + this.webSocketPath, this.lastSubscriptionID = 0, this.logger = t, this.subscriptions = new s(), this.pendingSubscriptions = new s(), this.connect();\n          }\n\n          return e.prototype.subscribe = function (e, t, n) {\n            this.tryReconnectIfNeeded();\n            var r = this.lastSubscriptionID++;\n            return this.socket.readyState !== o.Open ? (this.pendingSubscriptions.add(r, e, t, n), new a(this, r)) : (this.subscriptions.add(r, e, t, n), this.sendMessage(this.getMessage(100, r, e, n)), new a(this, r));\n          }, e.prototype.unsubscribe = function (e) {\n            this.sendMessage(this.getMessage(198, e));\n            var t = this.subscriptions.get(e);\n            t.listeners.onEnd && t.listeners.onEnd(null), this.subscriptions.remove(e);\n          }, e.prototype.connect = function () {\n            var e = this;\n            this.forcedClose = !1, this.closedError = null, this.socket = new window.WebSocket(this.baseURL), this.socket.onopen = function (t) {\n              e.pendingSubscriptions.getAllAsArray().forEach(function (t) {\n                var n = t.subID,\n                    r = t.path,\n                    o = t.listeners,\n                    i = t.headers;\n                e.subscribePending(r, o, i, n);\n              }), e.pendingSubscriptions.removeAll(), e.pingInterval = window.setInterval(function () {\n                if (!e.pongTimeout) {\n                  var t = new Date().getTime();\n                  1e4 > t - e.lastMessageReceivedTimestamp || (e.sendMessage(e.getMessage(16, t)), e.lastSentPingID = t, e.pongTimeout = window.setTimeout(function () {\n                    1e4 > new Date().getTime() - e.lastMessageReceivedTimestamp ? e.pongTimeout = null : e.close(new i.NetworkError(\"Pong response wasn't received within timeout\"));\n                  }, 1e4));\n                }\n              }, 3e4);\n            }, this.socket.onmessage = function (t) {\n              return e.receiveMessage(t);\n            }, this.socket.onerror = function (t) {\n              e.logger.verbose(\"WebSocket encountered an error event\", t);\n            }, this.socket.onclose = function (t) {\n              e.logger.verbose(\"WebSocket encountered a close event\", t);\n              var n = e.subscriptions.getAllAsArray().concat(e.pendingSubscriptions.getAllAsArray());\n              e.subscriptions.removeAll(), e.pendingSubscriptions.removeAll(), n.forEach(function (t) {\n                t.listeners.onError && t.listeners.onError(e.closedError);\n              }), e.tryReconnectIfNeeded();\n            };\n          }, e.prototype.close = function (e) {\n            if (this.socket instanceof window.WebSocket) {\n              var t = function (e) {};\n\n              null != this.socket.onclose && (t = this.socket.onclose.bind(this)), this.socket.onclose = function () {}, this.socket.onerror = function () {}, this.socket.onmessage = function () {}, this.socket.onopen = function () {}, this.forcedClose = !0, this.closedError = e, this.socket.close(), window.clearTimeout(this.pingInterval), window.clearTimeout(this.pongTimeout), this.pongTimeout = null, this.pingInterval = null, this.lastSentPingID = null, t();\n            }\n          }, e.prototype.tryReconnectIfNeeded = function () {\n            (this.forcedClose || this.socket.readyState === o.Closed) && this.connect();\n          }, e.prototype.subscribePending = function (e, t, n, r) {\n            void 0 !== r ? (this.subscriptions.add(r, e, t, n), this.sendMessage(this.getMessage(100, r, e, n))) : this.logger.debug(\"Subscription to path \" + e + \" has an undefined ID\");\n          }, e.prototype.getMessage = function (e, t, n, r) {\n            return [e, t, n, r];\n          }, e.prototype.sendMessage = function (e) {\n            this.socket.readyState === o.Open ? this.socket.send(JSON.stringify(e)) : this.logger.warn(\"Can't send on socket in \\\"\" + o[this.socket.readyState] + '\" state');\n          }, e.prototype.subscription = function (e) {\n            return this.subscriptions.get(e);\n          }, e.prototype.receiveMessage = function (e) {\n            var t;\n            this.lastMessageReceivedTimestamp = new Date().getTime();\n\n            try {\n              t = JSON.parse(e.data);\n            } catch (t) {\n              return void this.close(new i.ProtocolError(\"Message is not valid JSON format. Getting \" + e.data));\n            }\n\n            var n = this.validateMessage(t);\n            if (n) this.close(n);else {\n              var r = t.shift();\n\n              switch (r) {\n                case 17:\n                  return void this.onPongMessage(t);\n\n                case 16:\n                  return void this.onPingMessage(t);\n\n                case 99:\n                  return void this.onCloseMessage(t);\n              }\n\n              var o = t.shift(),\n                  s = this.subscription(o);\n\n              if (s) {\n                var a = s.listeners;\n\n                switch (r) {\n                  case 101:\n                    this.onOpenMessage(t, o, a);\n                    break;\n\n                  case 102:\n                    this.onEventMessage(t, a);\n                    break;\n\n                  case 199:\n                    this.onEOSMessage(t, o, a);\n                    break;\n\n                  default:\n                    this.close(new i.ProtocolError(\"Received unknown type of message.\"));\n                }\n              } else this.logger.debug(\"Received message for unknown subscription ID: \" + o);\n            }\n          }, e.prototype.validateMessage = function (e) {\n            return Array.isArray(e) ? e.length < 1 ? new i.ProtocolError(\"Message is empty array: \" + JSON.stringify(e)) : null : new i.ProtocolError(\"Message is expected to be an array. Getting: \" + JSON.stringify(e));\n          }, e.prototype.onOpenMessage = function (e, t, n) {\n            n.onOpen && n.onOpen(e[1]);\n          }, e.prototype.onEventMessage = function (e, t) {\n            if (3 === e.length) {\n              var n = e[0],\n                  r = e[1],\n                  o = e[2];\n              \"string\" == typeof n ? \"object\" != typeof r || Array.isArray(r) ? t.onError && t.onError(new i.ProtocolError(\"Invalid event headers in message: \" + JSON.stringify(e))) : t.onEvent && t.onEvent({\n                eventId: n,\n                headers: r,\n                body: o\n              }) : t.onError && t.onError(new i.ProtocolError(\"Invalid event ID in message: \" + JSON.stringify(e)));\n            } else t.onError && t.onError(new i.ProtocolError(\"Event message has \" + e.length + \" elements (expected 4)\"));\n          }, e.prototype.onEOSMessage = function (e, t, n) {\n            if (this.subscriptions.remove(t), 3 === e.length) {\n              var r = e[0],\n                  o = e[1],\n                  s = e[2];\n              \"number\" == typeof r ? \"object\" != typeof o || Array.isArray(o) ? n.onError && n.onError(new i.ProtocolError(\"Invalid EOS ElementsHeaders\")) : 204 !== r ? n.onError && n.onError(new i.ErrorResponse(r, o, s)) : n.onEnd && n.onEnd(null) : n.onError && n.onError(new i.ProtocolError(\"Invalid EOS Status Code\"));\n            } else n.onError && n.onError(new i.ProtocolError(\"EOS message has \" + e.length + \" elements (expected 4)\"));\n          }, e.prototype.onCloseMessage = function (e) {\n            var t = e[0],\n                n = e[1],\n                r = e[2];\n            if (\"number\" == typeof t) {\n              if (\"object\" != typeof n || Array.isArray(n)) this.close(new i.ProtocolError(\"Close message: Invalid EOS ElementsHeaders\"));else {\n                var o = {\n                  error: r.error || \"network_error\",\n                  error_description: r.error_description || \"Network error\"\n                };\n                this.close(new i.ErrorResponse(t, n, o));\n              }\n            } else this.close(new i.ProtocolError(\"Close message: Invalid EOS Status Code\"));\n          }, e.prototype.onPongMessage = function (e) {\n            var t = e[0];\n            this.lastSentPingID !== t && this.close(new i.ProtocolError(\"Received pong with ID \" + t + \" but last sent ping ID was \" + this.lastSentPingID)), window.clearTimeout(this.pongTimeout), delete this.pongTimeout, this.lastSentPingID = null;\n          }, e.prototype.onPingMessage = function (e) {\n            var t = e[0];\n            this.sendMessage(this.getMessage(17, t));\n          }, e;\n        }();\n\n        t.default = u;\n      }, function (e, t, n) {\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        });\n\n        var r = n(3),\n            o = n(9),\n            i = n(1),\n            s = function () {\n          function e(e) {\n            if (!e.locator) throw new Error(\"Expected `locator` property in Instance options!\");\n            var t = e.locator.split(\":\");\n            if (3 !== t.length) throw new Error(\"The instance locator supplied is invalid. Did you copy it correctly from the Pusher dashboard?\");\n            if (!e.serviceName) throw new Error(\"Expected `serviceName` property in Instance options!\");\n            if (!e.serviceVersion) throw new Error(\"Expected `serviceVersion` property in Instance options!\");\n            this.platformVersion = t[0], this.cluster = t[1], this.id = t[2], this.serviceName = e.serviceName, this.serviceVersion = e.serviceVersion, this.host = e.host || this.cluster + \".\" + o.HOST_BASE, this.logger = e.logger || new i.ConsoleLogger(), this.client = e.client || new r.BaseClient({\n              encrypted: e.encrypted,\n              host: this.host,\n              logger: this.logger\n            }), this.tokenProvider = e.tokenProvider;\n          }\n\n          return e.prototype.request = function (e, t) {\n            return e.path = this.absPath(e.path), null != e.headers && void 0 !== e.headers || (e.headers = {}), e.tokenProvider = e.tokenProvider || this.tokenProvider, this.client.request(e, t);\n          }, e.prototype.subscribeNonResuming = function (e) {\n            var t = e.headers || {},\n                n = e.retryStrategyOptions || {},\n                r = e.tokenProvider || this.tokenProvider;\n            return this.client.subscribeNonResuming(this.absPath(e.path), t, e.listeners, n, r);\n          }, e.prototype.subscribeResuming = function (e) {\n            var t = e.headers || {},\n                n = e.retryStrategyOptions || {},\n                r = e.tokenProvider || this.tokenProvider;\n            return this.client.subscribeResuming(this.absPath(e.path), t, e.listeners, n, e.initialEventId, r);\n          }, e.prototype.absPath = function (e) {\n            return (\"/services/\" + this.serviceName + \"/\" + this.serviceVersion + \"/\" + this.id + \"/\" + e).replace(/\\/+/g, \"/\").replace(/\\/+$/, \"\");\n          }, e;\n        }();\n\n        t.default = s;\n      }]);\n    }, e.exports = n();\n  }(e = {\n    exports: {}\n  }, e.exports), e.exports);\n  (t = n) && t.__esModule && Object.prototype.hasOwnProperty.call(t, \"default\") && t.default;\n  var r = n.BaseClient,\n      o = n.HOST_BASE,\n      i = n.Instance,\n      s = n.sendRawRequest;\n\n  function a(e) {\n    return null != e && \"object\" == typeof e && !0 === e[\"@@functional/placeholder\"];\n  }\n\n  function u(e) {\n    return function t(n) {\n      return 0 === arguments.length || a(n) ? t : e.apply(this, arguments);\n    };\n  }\n\n  function c(e) {\n    return function t(n, r) {\n      switch (arguments.length) {\n        case 0:\n          return t;\n\n        case 1:\n          return a(n) ? t : u(function (t) {\n            return e(n, t);\n          });\n\n        default:\n          return a(n) && a(r) ? t : a(n) ? u(function (t) {\n            return e(t, r);\n          }) : a(r) ? u(function (t) {\n            return e(n, t);\n          }) : e(n, r);\n      }\n    };\n  }\n\n  function h(e, t) {\n    var n;\n    e = e || [], t = t || [];\n    var r = e.length,\n        o = t.length,\n        i = [];\n\n    for (n = 0; n < r;) i[i.length] = e[n], n += 1;\n\n    for (n = 0; n < o;) i[i.length] = t[n], n += 1;\n\n    return i;\n  }\n\n  function d(e, t) {\n    switch (e) {\n      case 0:\n        return function () {\n          return t.apply(this, arguments);\n        };\n\n      case 1:\n        return function (e) {\n          return t.apply(this, arguments);\n        };\n\n      case 2:\n        return function (e, n) {\n          return t.apply(this, arguments);\n        };\n\n      case 3:\n        return function (e, n, r) {\n          return t.apply(this, arguments);\n        };\n\n      case 4:\n        return function (e, n, r, o) {\n          return t.apply(this, arguments);\n        };\n\n      case 5:\n        return function (e, n, r, o, i) {\n          return t.apply(this, arguments);\n        };\n\n      case 6:\n        return function (e, n, r, o, i, s) {\n          return t.apply(this, arguments);\n        };\n\n      case 7:\n        return function (e, n, r, o, i, s, a) {\n          return t.apply(this, arguments);\n        };\n\n      case 8:\n        return function (e, n, r, o, i, s, a, u) {\n          return t.apply(this, arguments);\n        };\n\n      case 9:\n        return function (e, n, r, o, i, s, a, u, c) {\n          return t.apply(this, arguments);\n        };\n\n      case 10:\n        return function (e, n, r, o, i, s, a, u, c, h) {\n          return t.apply(this, arguments);\n        };\n\n      default:\n        throw new Error(\"First argument to _arity must be a non-negative integer no greater than ten\");\n    }\n  }\n\n  function l(e, t, n) {\n    return function () {\n      for (var r = [], o = 0, i = e, s = 0; s < t.length || o < arguments.length;) {\n        var u;\n        s < t.length && (!a(t[s]) || o >= arguments.length) ? u = t[s] : (u = arguments[o], o += 1), r[s] = u, a(u) || (i -= 1), s += 1;\n      }\n\n      return i <= 0 ? n.apply(this, r) : d(i, l(e, r, n));\n    };\n  }\n\n  var f = c(function (e, t) {\n    return 1 === e ? u(t) : d(e, l(e, [], t));\n  });\n\n  function p(e) {\n    return function t(n, r, o) {\n      switch (arguments.length) {\n        case 0:\n          return t;\n\n        case 1:\n          return a(n) ? t : c(function (t, r) {\n            return e(n, t, r);\n          });\n\n        case 2:\n          return a(n) && a(r) ? t : a(n) ? c(function (t, n) {\n            return e(t, r, n);\n          }) : a(r) ? c(function (t, r) {\n            return e(n, t, r);\n          }) : u(function (t) {\n            return e(n, r, t);\n          });\n\n        default:\n          return a(n) && a(r) && a(o) ? t : a(n) && a(r) ? c(function (t, n) {\n            return e(t, n, o);\n          }) : a(n) && a(o) ? c(function (t, n) {\n            return e(t, r, n);\n          }) : a(r) && a(o) ? c(function (t, r) {\n            return e(n, t, r);\n          }) : a(n) ? u(function (t) {\n            return e(t, r, o);\n          }) : a(r) ? u(function (t) {\n            return e(n, t, o);\n          }) : a(o) ? u(function (t) {\n            return e(n, r, t);\n          }) : e(n, r, o);\n      }\n    };\n  }\n\n  var g = Array.isArray || function (e) {\n    return null != e && e.length >= 0 && \"[object Array]\" === Object.prototype.toString.call(e);\n  };\n\n  function m(e, t, n) {\n    return function () {\n      if (0 === arguments.length) return n();\n      var r = Array.prototype.slice.call(arguments, 0),\n          o = r.pop();\n\n      if (!g(o)) {\n        for (var i = 0; i < e.length;) {\n          if (\"function\" == typeof o[e[i]]) return o[e[i]].apply(o, r);\n          i += 1;\n        }\n\n        if (function (e) {\n          return \"function\" == typeof e[\"@@transducer/step\"];\n        }(o)) return t.apply(null, r)(o);\n      }\n\n      return n.apply(this, arguments);\n    };\n  }\n\n  var v = {\n    init: function () {\n      return this.xf[\"@@transducer/init\"]();\n    },\n    result: function (e) {\n      return this.xf[\"@@transducer/result\"](e);\n    }\n  },\n      b = c(function (e, t) {\n    return t > e ? t : e;\n  });\n\n  function y(e, t) {\n    for (var n = 0, r = t.length, o = Array(r); n < r;) o[n] = e(t[n]), n += 1;\n\n    return o;\n  }\n\n  function S(e) {\n    return \"[object String]\" === Object.prototype.toString.call(e);\n  }\n\n  var w = u(function (e) {\n    return !!g(e) || !!e && \"object\" == typeof e && !S(e) && (1 === e.nodeType ? !!e.length : 0 === e.length || e.length > 0 && e.hasOwnProperty(0) && e.hasOwnProperty(e.length - 1));\n  }),\n      I = function () {\n    function e(e) {\n      this.f = e;\n    }\n\n    return e.prototype[\"@@transducer/init\"] = function () {\n      throw new Error(\"init not implemented on XWrap\");\n    }, e.prototype[\"@@transducer/result\"] = function (e) {\n      return e;\n    }, e.prototype[\"@@transducer/step\"] = function (e, t) {\n      return this.f(e, t);\n    }, e;\n  }();\n\n  function k(e) {\n    return new I(e);\n  }\n\n  var E = c(function (e, t) {\n    return d(e.length, function () {\n      return e.apply(t, arguments);\n    });\n  });\n\n  function R(e, t, n) {\n    for (var r = n.next(); !r.done;) {\n      if ((t = e[\"@@transducer/step\"](t, r.value)) && t[\"@@transducer/reduced\"]) {\n        t = t[\"@@transducer/value\"];\n        break;\n      }\n\n      r = n.next();\n    }\n\n    return e[\"@@transducer/result\"](t);\n  }\n\n  function T(e, t, n, r) {\n    return e[\"@@transducer/result\"](n[r](E(e[\"@@transducer/step\"], e), t));\n  }\n\n  var _ = \"undefined\" != typeof Symbol ? Symbol.iterator : \"@@iterator\";\n\n  function P(e, t, n) {\n    if (\"function\" == typeof e && (e = k(e)), w(n)) return function (e, t, n) {\n      for (var r = 0, o = n.length; r < o;) {\n        if ((t = e[\"@@transducer/step\"](t, n[r])) && t[\"@@transducer/reduced\"]) {\n          t = t[\"@@transducer/value\"];\n          break;\n        }\n\n        r += 1;\n      }\n\n      return e[\"@@transducer/result\"](t);\n    }(e, t, n);\n    if (\"function\" == typeof n[\"fantasy-land/reduce\"]) return T(e, t, n, \"fantasy-land/reduce\");\n    if (null != n[_]) return R(e, t, n[_]());\n    if (\"function\" == typeof n.next) return R(e, t, n);\n    if (\"function\" == typeof n.reduce) return T(e, t, n, \"reduce\");\n    throw new TypeError(\"reduce: list must be array or iterable\");\n  }\n\n  var O = function () {\n    function e(e, t) {\n      this.xf = t, this.f = e;\n    }\n\n    return e.prototype[\"@@transducer/init\"] = v.init, e.prototype[\"@@transducer/result\"] = v.result, e.prototype[\"@@transducer/step\"] = function (e, t) {\n      return this.xf[\"@@transducer/step\"](e, this.f(t));\n    }, e;\n  }(),\n      N = c(function (e, t) {\n    return new O(e, t);\n  });\n\n  function U(e, t) {\n    return Object.prototype.hasOwnProperty.call(t, e);\n  }\n\n  var C = Object.prototype.toString,\n      M = !{\n    toString: null\n  }.propertyIsEnumerable(\"toString\"),\n      A = [\"constructor\", \"valueOf\", \"isPrototypeOf\", \"toString\", \"propertyIsEnumerable\", \"hasOwnProperty\", \"toLocaleString\"],\n      D = function () {\n    return arguments.propertyIsEnumerable(\"length\");\n  }(),\n      j = function (e, t) {\n    for (var n = 0; n < e.length;) {\n      if (e[n] === t) return !0;\n      n += 1;\n    }\n\n    return !1;\n  },\n      x = u(\"function\" != typeof Object.keys || D ? function (e) {\n    if (Object(e) !== e) return [];\n\n    var t,\n        n,\n        r = [],\n        o = D && function () {\n      return \"[object Arguments]\" === C.call(arguments) ? function (e) {\n        return \"[object Arguments]\" === C.call(e);\n      } : function (e) {\n        return U(\"callee\", e);\n      };\n    }(e);\n\n    for (t in e) !U(t, e) || o && \"length\" === t || (r[r.length] = t);\n\n    if (M) for (n = A.length - 1; n >= 0;) U(t = A[n], e) && !j(r, t) && (r[r.length] = t), n -= 1;\n    return r;\n  } : function (e) {\n    return Object(e) !== e ? [] : Object.keys(e);\n  }),\n      L = c(m([\"fantasy-land/map\", \"map\"], N, function (e, t) {\n    switch (Object.prototype.toString.call(t)) {\n      case \"[object Function]\":\n        return f(t.length, function () {\n          return e.call(this, t.apply(this, arguments));\n        });\n\n      case \"[object Object]\":\n        return P(function (n, r) {\n          return n[r] = e(t[r]), n;\n        }, {}, x(t));\n\n      default:\n        return y(e, t);\n    }\n  })),\n      q = c(function (e, t) {\n    for (var n = t, r = 0; r < e.length;) {\n      if (null == n) return;\n      n = n[e[r]], r += 1;\n    }\n\n    return n;\n  }),\n      B = c(function (e, t) {\n    return q([e], t);\n  }),\n      H = p(P),\n      V = c(function (e, t) {\n    return h(t, [e]);\n  }),\n      F = u(function (e) {\n    for (var t = x(e), n = t.length, r = [], o = 0; o < n;) r[o] = e[t[o]], o += 1;\n\n    return r;\n  });\n\n  var J = u(function (e) {\n    return null === e ? \"Null\" : void 0 === e ? \"Undefined\" : Object.prototype.toString.call(e).slice(8, -1);\n  });\n\n  function G(e, t) {\n    return function () {\n      return t.call(this, e.apply(this, arguments));\n    };\n  }\n\n  function W(e, t) {\n    return function () {\n      var n = arguments.length;\n      if (0 === n) return t();\n      var r = arguments[n - 1];\n      return g(r) || \"function\" != typeof r[e] ? t.apply(this, arguments) : r[e].apply(r, Array.prototype.slice.call(arguments, 0, n - 1));\n    };\n  }\n\n  var $ = p(W(\"slice\", function (e, t, n) {\n    return Array.prototype.slice.call(n, e, t);\n  })),\n      z = u(W(\"tail\", $(1, 1 / 0)));\n\n  function X() {\n    if (0 === arguments.length) throw new Error(\"pipe requires at least one argument\");\n    return d(arguments[0].length, H(G, arguments[0], z(arguments)));\n  }\n\n  var K = u(function (e) {\n    return S(e) ? e.split(\"\").reverse().join(\"\") : Array.prototype.slice.call(e, 0).reverse();\n  });\n\n  function Y() {\n    if (0 === arguments.length) throw new Error(\"compose requires at least one argument\");\n    return X.apply(this, K(arguments));\n  }\n\n  function Z(e) {\n    for (var t, n = []; !(t = e.next()).done;) n.push(t.value);\n\n    return n;\n  }\n\n  function Q(e, t, n) {\n    for (var r = 0, o = n.length; r < o;) {\n      if (e(t, n[r])) return !0;\n      r += 1;\n    }\n\n    return !1;\n  }\n\n  var ee = c(function (e, t) {\n    return e === t ? 0 !== e || 1 / e == 1 / t : e != e && t != t;\n  });\n\n  function te(e, t, n, r) {\n    var o = Z(e);\n\n    function i(e, t) {\n      return ne(e, t, n.slice(), r.slice());\n    }\n\n    return !Q(function (e, t) {\n      return !Q(i, t, e);\n    }, Z(t), o);\n  }\n\n  function ne(e, t, n, r) {\n    if (ee(e, t)) return !0;\n    var o,\n        i,\n        s = J(e);\n    if (s !== J(t)) return !1;\n    if (null == e || null == t) return !1;\n    if (\"function\" == typeof e[\"fantasy-land/equals\"] || \"function\" == typeof t[\"fantasy-land/equals\"]) return \"function\" == typeof e[\"fantasy-land/equals\"] && e[\"fantasy-land/equals\"](t) && \"function\" == typeof t[\"fantasy-land/equals\"] && t[\"fantasy-land/equals\"](e);\n    if (\"function\" == typeof e.equals || \"function\" == typeof t.equals) return \"function\" == typeof e.equals && e.equals(t) && \"function\" == typeof t.equals && t.equals(e);\n\n    switch (s) {\n      case \"Arguments\":\n      case \"Array\":\n      case \"Object\":\n        if (\"function\" == typeof e.constructor && \"Promise\" === (o = e.constructor, null == (i = String(o).match(/^function (\\w*)/)) ? \"\" : i[1])) return e === t;\n        break;\n\n      case \"Boolean\":\n      case \"Number\":\n      case \"String\":\n        if (typeof e != typeof t || !ee(e.valueOf(), t.valueOf())) return !1;\n        break;\n\n      case \"Date\":\n        if (!ee(e.valueOf(), t.valueOf())) return !1;\n        break;\n\n      case \"Error\":\n        return e.name === t.name && e.message === t.message;\n\n      case \"RegExp\":\n        if (e.source !== t.source || e.global !== t.global || e.ignoreCase !== t.ignoreCase || e.multiline !== t.multiline || e.sticky !== t.sticky || e.unicode !== t.unicode) return !1;\n    }\n\n    for (var a = n.length - 1; a >= 0;) {\n      if (n[a] === e) return r[a] === t;\n      a -= 1;\n    }\n\n    switch (s) {\n      case \"Map\":\n        return e.size === t.size && te(e.entries(), t.entries(), n.concat([e]), r.concat([t]));\n\n      case \"Set\":\n        return e.size === t.size && te(e.values(), t.values(), n.concat([e]), r.concat([t]));\n\n      case \"Arguments\":\n      case \"Array\":\n      case \"Object\":\n      case \"Boolean\":\n      case \"Number\":\n      case \"String\":\n      case \"Date\":\n      case \"Error\":\n      case \"RegExp\":\n      case \"Int8Array\":\n      case \"Uint8Array\":\n      case \"Uint8ClampedArray\":\n      case \"Int16Array\":\n      case \"Uint16Array\":\n      case \"Int32Array\":\n      case \"Uint32Array\":\n      case \"Float32Array\":\n      case \"Float64Array\":\n      case \"ArrayBuffer\":\n        break;\n\n      default:\n        return !1;\n    }\n\n    var u = x(e);\n    if (u.length !== x(t).length) return !1;\n    var c = n.concat([e]),\n        h = r.concat([t]);\n\n    for (a = u.length - 1; a >= 0;) {\n      var d = u[a];\n      if (!U(d, t) || !ne(t[d], e[d], c, h)) return !1;\n      a -= 1;\n    }\n\n    return !0;\n  }\n\n  var re = c(function (e, t) {\n    return ne(e, t, [], []);\n  });\n\n  function oe(e, t) {\n    return function (e, t, n) {\n      var r, o;\n      if (\"function\" == typeof e.indexOf) switch (typeof t) {\n        case \"number\":\n          if (0 === t) {\n            for (r = 1 / t; n < e.length;) {\n              if (0 === (o = e[n]) && 1 / o === r) return n;\n              n += 1;\n            }\n\n            return -1;\n          }\n\n          if (t != t) {\n            for (; n < e.length;) {\n              if (\"number\" == typeof (o = e[n]) && o != o) return n;\n              n += 1;\n            }\n\n            return -1;\n          }\n\n          return e.indexOf(t, n);\n\n        case \"string\":\n        case \"boolean\":\n        case \"function\":\n        case \"undefined\":\n          return e.indexOf(t, n);\n\n        case \"object\":\n          if (null === t) return e.indexOf(t, n);\n      }\n\n      for (; n < e.length;) {\n        if (re(e[n], t)) return n;\n        n += 1;\n      }\n\n      return -1;\n    }(t, e, 0) >= 0;\n  }\n\n  function ie(e) {\n    return '\"' + e.replace(/\\\\/g, \"\\\\\\\\\").replace(/[\\b]/g, \"\\\\b\").replace(/\\f/g, \"\\\\f\").replace(/\\n/g, \"\\\\n\").replace(/\\r/g, \"\\\\r\").replace(/\\t/g, \"\\\\t\").replace(/\\v/g, \"\\\\v\").replace(/\\0/g, \"\\\\0\").replace(/\"/g, '\\\\\"') + '\"';\n  }\n\n  var se = function (e) {\n    return (e < 10 ? \"0\" : \"\") + e;\n  },\n      ae = \"function\" == typeof Date.prototype.toISOString ? function (e) {\n    return e.toISOString();\n  } : function (e) {\n    return e.getUTCFullYear() + \"-\" + se(e.getUTCMonth() + 1) + \"-\" + se(e.getUTCDate()) + \"T\" + se(e.getUTCHours()) + \":\" + se(e.getUTCMinutes()) + \":\" + se(e.getUTCSeconds()) + \".\" + (e.getUTCMilliseconds() / 1e3).toFixed(3).slice(2, 5) + \"Z\";\n  };\n\n  var ue = function () {\n    function e(e, t) {\n      this.xf = t, this.f = e;\n    }\n\n    return e.prototype[\"@@transducer/init\"] = v.init, e.prototype[\"@@transducer/result\"] = v.result, e.prototype[\"@@transducer/step\"] = function (e, t) {\n      return this.f(t) ? this.xf[\"@@transducer/step\"](e, t) : e;\n    }, e;\n  }(),\n      ce = c(m([\"filter\"], c(function (e, t) {\n    return new ue(e, t);\n  }), function (e, t) {\n    return n = t, \"[object Object]\" === Object.prototype.toString.call(n) ? P(function (n, r) {\n      return e(t[r]) && (n[r] = t[r]), n;\n    }, {}, x(t)) : function (e, t) {\n      for (var n = 0, r = t.length, o = []; n < r;) e(t[n]) && (o[o.length] = t[n]), n += 1;\n\n      return o;\n    }(e, t);\n    var n;\n  })),\n      he = c(function (e, t) {\n    return ce((n = e, function () {\n      return !n.apply(this, arguments);\n    }), t);\n    var n;\n  });\n\n  var de = u(function (e) {\n    return function e(t, n) {\n      var r = function (r) {\n        var o = n.concat([t]);\n        return oe(r, o) ? \"<Circular>\" : e(r, o);\n      },\n          o = function (e, t) {\n        return y(function (t) {\n          return ie(t) + \": \" + r(e[t]);\n        }, t.slice().sort());\n      };\n\n      switch (Object.prototype.toString.call(t)) {\n        case \"[object Arguments]\":\n          return \"(function() { return arguments; }(\" + y(r, t).join(\", \") + \"))\";\n\n        case \"[object Array]\":\n          return \"[\" + y(r, t).concat(o(t, he(function (e) {\n            return /^\\d+$/.test(e);\n          }, x(t)))).join(\", \") + \"]\";\n\n        case \"[object Boolean]\":\n          return \"object\" == typeof t ? \"new Boolean(\" + r(t.valueOf()) + \")\" : t.toString();\n\n        case \"[object Date]\":\n          return \"new Date(\" + (isNaN(t.valueOf()) ? r(NaN) : ie(ae(t))) + \")\";\n\n        case \"[object Null]\":\n          return \"null\";\n\n        case \"[object Number]\":\n          return \"object\" == typeof t ? \"new Number(\" + r(t.valueOf()) + \")\" : 1 / t == -1 / 0 ? \"-0\" : t.toString(10);\n\n        case \"[object String]\":\n          return \"object\" == typeof t ? \"new String(\" + r(t.valueOf()) + \")\" : ie(t);\n\n        case \"[object Undefined]\":\n          return \"undefined\";\n\n        default:\n          if (\"function\" == typeof t.toString) {\n            var i = t.toString();\n            if (\"[object Object]\" !== i) return i;\n          }\n\n          return \"{\" + o(t, x(t)).join(\", \") + \"}\";\n      }\n    }(e, []);\n  }),\n      le = c(oe),\n      fe = c(W(\"forEach\", function (e, t) {\n    for (var n = t.length, r = 0; r < n;) e(t[r]), r += 1;\n\n    return t;\n  })),\n      pe = c(function (e, t) {\n    for (var n = x(t), r = 0; r < n.length;) {\n      var o = n[r];\n      e(t[o], o, t), r += 1;\n    }\n\n    return t;\n  }),\n      ge = c(U);\n\n  function me(e) {\n    return e;\n  }\n\n  var ve = u(me),\n      be = function () {\n    function e() {\n      this._nativeSet = \"function\" == typeof Set ? new Set() : null, this._items = {};\n    }\n\n    return e.prototype.add = function (e) {\n      return !ye(e, !0, this);\n    }, e.prototype.has = function (e) {\n      return ye(e, !1, this);\n    }, e;\n  }();\n\n  function ye(e, t, n) {\n    var r,\n        o = typeof e;\n\n    switch (o) {\n      case \"string\":\n      case \"number\":\n        return 0 === e && 1 / e == -1 / 0 ? !!n._items[\"-0\"] || (t && (n._items[\"-0\"] = !0), !1) : null !== n._nativeSet ? t ? (r = n._nativeSet.size, n._nativeSet.add(e), n._nativeSet.size === r) : n._nativeSet.has(e) : o in n._items ? e in n._items[o] || (t && (n._items[o][e] = !0), !1) : (t && (n._items[o] = {}, n._items[o][e] = !0), !1);\n\n      case \"boolean\":\n        if (o in n._items) {\n          var i = e ? 1 : 0;\n          return !!n._items[o][i] || (t && (n._items[o][i] = !0), !1);\n        }\n\n        return t && (n._items[o] = e ? [!1, !0] : [!0, !1]), !1;\n\n      case \"function\":\n        return null !== n._nativeSet ? t ? (r = n._nativeSet.size, n._nativeSet.add(e), n._nativeSet.size === r) : n._nativeSet.has(e) : o in n._items ? !!oe(e, n._items[o]) || (t && n._items[o].push(e), !1) : (t && (n._items[o] = [e]), !1);\n\n      case \"undefined\":\n        return !!n._items[o] || (t && (n._items[o] = !0), !1);\n\n      case \"object\":\n        if (null === e) return !!n._items.null || (t && (n._items.null = !0), !1);\n\n      default:\n        return (o = Object.prototype.toString.call(e)) in n._items ? !!oe(e, n._items[o]) || (t && n._items[o].push(e), !1) : (t && (n._items[o] = [e]), !1);\n    }\n  }\n\n  var Se = c(function (e, t) {\n    for (var n, r, o = new be(), i = [], s = 0; s < t.length;) n = e(r = t[s]), o.add(n) && i.push(r), s += 1;\n\n    return i;\n  })(ve),\n      we = c(function (e, t) {\n    return f(e + 1, function () {\n      var n,\n          r = arguments[e];\n      if (null != r && (n = r[t], \"[object Function]\" === Object.prototype.toString.call(n))) return r[t].apply(r, Array.prototype.slice.call(arguments, 0, e));\n      throw new TypeError(de(r) + ' does not have a method named \"' + t + '\"');\n    });\n  }),\n      Ie = we(1, \"join\");\n\n  var ke = c(function (e, t) {\n    return Array.prototype.slice.call(t, 0).sort(e);\n  }),\n      Ee = we(1, \"split\"),\n      Re = u(function (e) {\n    var t = [];\n\n    for (var n in e) U(n, e) && (t[t.length] = [n, e[n]]);\n\n    return t;\n  }),\n      Te = \"\\t\\n\\v\\f\\r   ᠎             　\\u2028\\u2029\\ufeff\",\n      _e = (String.prototype.trim, \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (e) {\n    return typeof e;\n  } : function (e) {\n    return e && \"function\" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? \"symbol\" : typeof e;\n  }),\n      Pe = function (e, t) {\n    if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n  },\n      Oe = function () {\n    function e(e, t) {\n      for (var n = 0; n < t.length; n++) {\n        var r = t[n];\n        r.enumerable = r.enumerable || !1, r.configurable = !0, \"value\" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);\n      }\n    }\n\n    return function (t, n, r) {\n      return n && e(t.prototype, n), r && e(t, r), t;\n    };\n  }(),\n      Ne = Object.assign || function (e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var n = arguments[t];\n\n      for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);\n    }\n\n    return e;\n  },\n      Ue = function (e, t) {\n    var n = {};\n\n    for (var r in e) t.indexOf(r) >= 0 || Object.prototype.hasOwnProperty.call(e, r) && (n[r] = e[r]);\n\n    return n;\n  },\n      Ce = function () {\n    return function (e, t) {\n      if (Array.isArray(e)) return e;\n      if (Symbol.iterator in Object(e)) return function (e, t) {\n        var n = [],\n            r = !0,\n            o = !1,\n            i = void 0;\n\n        try {\n          for (var s, a = e[Symbol.iterator](); !(r = (s = a.next()).done) && (n.push(s.value), !t || n.length !== t); r = !0);\n        } catch (e) {\n          o = !0, i = e;\n        } finally {\n          try {\n            !r && a.return && a.return();\n          } finally {\n            if (o) throw i;\n          }\n        }\n\n        return n;\n      }(e, t);\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    };\n  }(),\n      Me = function (e) {\n    if (Array.isArray(e)) {\n      for (var t = 0, n = Array(e.length); t < e.length; t++) n[t] = e[t];\n\n      return n;\n    }\n\n    return Array.from(e);\n  },\n      Ae = X(ce(function (e) {\n    return void 0 !== e;\n  }), Re, L(function (e) {\n    var t = Ce(e, 2),\n        n = t[0],\n        r = t[1];\n    return n + \"=\" + encodeURIComponent(r);\n  }), Ie(\"&\")),\n      De = function (e, t, n) {\n    var r = void 0 === n ? \"undefined\" : _e(n);\n    if (r !== t) throw new TypeError(\"expected \" + e + \" to be of type \" + t + \" but was of type \" + r);\n  },\n      je = function (e, t, n) {\n    if (!Array.isArray(n)) throw new TypeError(\"expected \" + e + \" to be an array\");\n    n.forEach(function (n, r) {\n      return De(e + \"[\" + r + \"]\", t, n);\n    });\n  },\n      xe = function (e, t, n) {\n    De(e, \"object\", n), pe(function (n, r) {\n      return De(e + \".\" + r, t, n);\n    }, n);\n  },\n      Le = function () {\n    return Math.floor(Date.now() / 1e3);\n  },\n      qe = function () {\n    function e() {\n      var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n          n = t.url,\n          r = t.queryParams,\n          o = t.headers,\n          i = t.withCredentials;\n      Pe(this, e), De(\"url\", \"string\", n), r && De(\"queryParams\", \"object\", r), o && De(\"headers\", \"object\", o), this.url = n, this.queryParams = r, this.headers = o, this.withCredentials = i, this.fetchToken = this.fetchToken.bind(this), this.fetchFreshToken = this.fetchFreshToken.bind(this), this.cacheIsStale = this.cacheIsStale.bind(this), this.cache = this.cache.bind(this), this.clearCache = this.clearCache.bind(this), this.setUserId = this.setUserId.bind(this);\n    }\n\n    return Oe(e, [{\n      key: \"fetchToken\",\n      value: function () {\n        var e = this;\n        return this.cacheIsStale() ? (this.req || this.fetchFreshToken()).then(function (t) {\n          var n = t.token,\n              r = t.expiresIn;\n          return e.cache(n, r), n;\n        }) : Promise.resolve(this.cachedToken);\n      }\n    }, {\n      key: \"fetchFreshToken\",\n      value: function () {\n        var e,\n            t,\n            n = this;\n        return this.req = s({\n          method: \"POST\",\n          url: (e = Ne({\n            user_id: this.userId\n          }, this.queryParams), t = this.url, t + (le(\"?\", t) ? \"&\" : \"?\") + Ae(e)),\n          body: Ae({\n            grant_type: \"client_credentials\"\n          }),\n          headers: Ne({\n            \"content-type\": \"application/x-www-form-urlencoded\"\n          }, this.headers),\n          withCredentials: this.withCredentials\n        }).then(function (e) {\n          var t = JSON.parse(e),\n              r = t.access_token,\n              o = t.expires_in;\n          return delete n.req, {\n            token: r,\n            expiresIn: o\n          };\n        }).catch(function (e) {\n          throw delete n.req, e;\n        }), this.req;\n      }\n    }, {\n      key: \"cacheIsStale\",\n      value: function () {\n        return !this.cachedToken || Le() > this.cacheExpiresAt;\n      }\n    }, {\n      key: \"cache\",\n      value: function (e, t) {\n        this.cachedToken = e, this.cacheExpiresAt = Le() + t;\n      }\n    }, {\n      key: \"clearCache\",\n      value: function () {\n        this.cachedToken = void 0, this.cacheExpiresAt = void 0;\n      }\n    }, {\n      key: \"setUserId\",\n      value: function (e) {\n        this.clearCache(), this.userId = e;\n      }\n    }]), e;\n  }(),\n      Be = function (e) {\n    return {\n      createdAt: e.created_at,\n      createdByUserId: e.created_by_id,\n      id: e.id,\n      isPrivate: e.private,\n      name: e.name,\n      updatedAt: e.updated_at,\n      customData: e.custom_data,\n      deletedAt: e.deleted_at,\n      unreadCount: e.unread_count,\n      lastMessageAt: e.last_message_at\n    };\n  },\n      He = function (e) {\n    return {\n      avatarURL: e.avatar_url,\n      createdAt: e.created_at,\n      customData: e.custom_data,\n      id: e.id,\n      name: e.name,\n      updatedAt: e.updated_at\n    };\n  },\n      Ve = function (e) {\n    var t = {\n      roomId: e.room_id,\n      id: e.id,\n      senderId: e.user_id,\n      createdAt: e.created_at,\n      updatedAt: e.updated_at,\n      deletedAt: e.deleted_at\n    };\n    return e.parts ? t.parts = e.parts.map(function (e) {\n      return Ge(e);\n    }) : (t.text = e.text, e.attachment && (t.attachment = Je(e.attachment))), t;\n  },\n      Fe = function (e) {\n    return {\n      position: e.position,\n      updatedAt: e.updated_at,\n      userId: e.user_id,\n      roomId: e.room_id,\n      type: e.cursor_type\n    };\n  },\n      Je = function (e) {\n    return {\n      link: e.resource_link,\n      type: e.type,\n      name: e.name\n    };\n  },\n      Ge = function (e) {\n    if (null != e.content) return {\n      partType: \"inline\",\n      payload: {\n        type: e.type,\n        content: e.content\n      }\n    };\n    if (null != e.url) return {\n      partType: \"url\",\n      payload: {\n        type: e.type,\n        url: e.url\n      }\n    };\n    if (null != e.attachment) return {\n      partType: \"attachment\",\n      payload: {\n        type: e.type,\n        name: e.attachment.name,\n        size: e.attachment.size,\n        customData: e.attachment.custom_data,\n        _id: e.attachment.id,\n        _downloadURL: e.attachment.download_url,\n        _expiration: new Date(e.attachment.expiration)\n      }\n    };\n    throw new TypeError(\"failed to parse message part\");\n  },\n      We = function () {\n    function e(t, n) {\n      Pe(this, e), this.avatarURL = t.avatarURL, this.createdAt = t.createdAt, this.customData = t.customData, this.id = t.id, this.name = t.name, this.updatedAt = t.updatedAt, this.presenceStore = n;\n    }\n\n    return Oe(e, [{\n      key: \"presence\",\n      get: function () {\n        return {\n          state: this.presenceStore[this.id] || \"unknown\"\n        };\n      }\n    }]), e;\n  }();\n\n  function $e(e, t) {\n    var n = [],\n        r = !0,\n        o = !1,\n        i = void 0;\n\n    try {\n      for (var s, a = t.pending[Symbol.iterator](); !(r = (s = a.next()).done); r = !0) {\n        var u = s.value;\n        n.push(u), t.inProgress.add(u);\n      }\n    } catch (e) {\n      o = !0, i = e;\n    } finally {\n      try {\n        !r && a.return && a.return();\n      } finally {\n        if (o) throw i;\n      }\n    }\n\n    return t.pending.clear(), e(n).then(function (e) {\n      var r = !0,\n          o = !1,\n          i = void 0;\n\n      try {\n        for (var s, a = n[Symbol.iterator](); !(r = (s = a.next()).done); r = !0) {\n          var u = s.value,\n              c = !0,\n              h = !1,\n              d = void 0;\n\n          try {\n            for (var l, f = t.callbacks[u][Symbol.iterator](); !(c = (l = f.next()).done); c = !0) {\n              l.value.resolve(e);\n            }\n          } catch (e) {\n            h = !0, d = e;\n          } finally {\n            try {\n              !c && f.return && f.return();\n            } finally {\n              if (h) throw d;\n            }\n          }\n\n          t.inProgress.delete(u), delete t.callbacks[u];\n        }\n      } catch (e) {\n        o = !0, i = e;\n      } finally {\n        try {\n          !r && a.return && a.return();\n        } finally {\n          if (o) throw i;\n        }\n      }\n    }).catch(function (e) {\n      var r = !0,\n          o = !1,\n          i = void 0;\n\n      try {\n        for (var s, a = n[Symbol.iterator](); !(r = (s = a.next()).done); r = !0) {\n          var u = s.value,\n              c = !0,\n              h = !1,\n              d = void 0;\n\n          try {\n            for (var l, f = t.callbacks[u][Symbol.iterator](); !(c = (l = f.next()).done); c = !0) {\n              l.value.reject(e);\n            }\n          } catch (e) {\n            h = !0, d = e;\n          } finally {\n            try {\n              !c && f.return && f.return();\n            } finally {\n              if (h) throw d;\n            }\n          }\n\n          t.inProgress.delete(u), delete t.callbacks[u];\n        }\n      } catch (e) {\n        o = !0, i = e;\n      } finally {\n        try {\n          !r && a.return && a.return();\n        } finally {\n          if (o) throw i;\n        }\n      }\n    });\n  }\n\n  var ze = 50,\n      Xe = 250,\n      Ke = 2e4,\n      Ye = function () {\n    function e(t) {\n      var n,\n          r,\n          o,\n          i,\n          s = t.instance,\n          a = t.presenceStore,\n          u = t.logger;\n      Pe(this, e), this.instance = s, this.presenceStore = a, this.logger = u, this.onSetHooks = [], this.users = {}, this.set = this.set.bind(this), this.get = this.get.bind(this), this.fetchMissingUser = (n = this._fetchMissingUserBatch.bind(this), r = ze, o = Xe, i = {\n        callbacks: {},\n        pending: new Set(),\n        inProgress: new Set()\n      }, function (e) {\n        return new Promise(function (t, s) {\n          i.pending.has(e) || i.inProgress.has(e) ? i.callbacks[e].push({\n            resolve: t,\n            reject: s\n          }) : (i.pending.add(e), i.callbacks[e] = [{\n            resolve: t,\n            reject: s\n          }]), i.pending.size >= o ? (clearTimeout(i.timeout), $e(n, i), delete i.timeout) : i.timeout || (i.timeout = setTimeout(function () {\n            $e(n, i), delete i.timeout;\n          }, r));\n        });\n      }), this.fetchMissingUsers = this.fetchMissingUsers.bind(this), this.fetchMissingUserReq = this.fetchMissingUserReq.bind(this), this.snapshot = this.snapshot.bind(this), this.getSync = this.getSync.bind(this), this.decorate = this.decorate.bind(this);\n    }\n\n    return Oe(e, [{\n      key: \"set\",\n      value: function (e) {\n        return this.users[e.id] = this.decorate(e), this.onSetHooks.forEach(function (t) {\n          return t(e.id);\n        }), Promise.resolve(this.users[e.id]);\n      }\n    }, {\n      key: \"get\",\n      value: function (e) {\n        var t = this;\n        return this.fetchMissingUser(e).then(function () {\n          return t.users[e];\n        });\n      }\n    }, {\n      key: \"fetchMissingUsers\",\n      value: function (e) {\n        var t = this;\n        return Promise.all(e.map(function (e) {\n          return t.fetchMissingUser(e);\n        }));\n      }\n    }, {\n      key: \"_fetchMissingUserBatch\",\n      value: function (e) {\n        var t = this,\n            n = e.filter(function (e) {\n          return !t.users[e];\n        });\n        return n.length > 0 ? this.fetchMissingUserReq(n) : Promise.resolve();\n      }\n    }, {\n      key: \"fetchMissingUserReq\",\n      value: function (e) {\n        var t,\n            n,\n            r,\n            o,\n            i,\n            s = this;\n        return this.instance.request({\n          method: \"GET\",\n          path: (t = \"id\", n = e, r = \"/users_by_ids\", o = le(\"?\", r) ? \"\" : \"?\", i = L(function (e) {\n            return encodeURIComponent(t) + \"=\" + encodeURIComponent(e);\n          }, n), r + o + Ie(\"&\", i))\n        }).then(function (e) {\n          JSON.parse(e).map(function (e) {\n            return He(e);\n          }).forEach(function (e) {\n            s.set(e);\n          });\n        }).catch(function (e) {\n          throw s.logger.warn(\"error fetching missing users:\", e), e;\n        });\n      }\n    }, {\n      key: \"snapshot\",\n      value: function () {\n        return this.users;\n      }\n    }, {\n      key: \"getSync\",\n      value: function (e) {\n        return this.users[e];\n      }\n    }, {\n      key: \"decorate\",\n      value: function (e) {\n        return e ? new We(e, this.presenceStore) : void 0;\n      }\n    }]), e;\n  }(),\n      Ze = function () {\n    function e(t) {\n      var n = t.basicRoom,\n          r = t.userStore,\n          o = t.isSubscribedTo,\n          i = t.logger;\n      Pe(this, e), this.createdAt = n.createdAt, this.createdByUserId = n.createdByUserId, this.deletedAt = n.deletedAt, this.id = n.id, this.isPrivate = n.isPrivate, this.name = n.name, this.updatedAt = n.updatedAt, this.customData = n.customData, this.unreadCount = n.unreadCount, this.lastMessageAt = n.lastMessageAt, this.userIds = [], this.userStore = r, this.isSubscribedTo = o, this.logger = i, this.eq = this.eq.bind(this);\n    }\n\n    return Oe(e, [{\n      key: \"eq\",\n      value: function (e) {\n        return this.createdAt === e.createdAt && this.createdByUserId === e.createdByUserId && this.deletedAt === e.deletedAt && this.id === e.id && this.isPrivate === e.isPrivate && this.name === e.name && this.updatedAt === e.updatedAt && JSON.stringify(this.customData) === JSON.stringify(e.customData);\n      }\n    }, {\n      key: \"users\",\n      get: function () {\n        var e = this;\n\n        if (!this.isSubscribedTo(this.id)) {\n          var t = new Error(\"Must be subscribed to room \" + this.id + \" to access users property\");\n          throw this.logger.error(t), t;\n        }\n\n        return ce(function (t) {\n          return le(t.id, e.userIds);\n        }, F(this.userStore.snapshot()));\n      }\n    }]), e;\n  }(),\n      Qe = function () {\n    function e(t) {\n      Pe(this, e), this.instance = t.instance, this.userStore = t.userStore, this.isSubscribedTo = t.isSubscribedTo, this.logger = t.logger, this.rooms = {}, this.setSync = this.setSync.bind(this), this.set = this.set.bind(this), this.get = this.get.bind(this), this.popSync = this.popSync.bind(this), this.pop = this.pop.bind(this), this.addUserToRoom = this.addUserToRoom.bind(this), this.removeUserFromRoom = this.removeUserFromRoom.bind(this), this.updateSync = this.updateSync.bind(this), this.update = this.update.bind(this), this.fetchBasicRoom = this.fetchBasicRoom.bind(this), this.snapshot = this.snapshot.bind(this), this.getSync = this.getSync.bind(this), this.decorate = this.decorate.bind(this);\n    }\n\n    return Oe(e, [{\n      key: \"setSync\",\n      value: function (e) {\n        return this.rooms[e.id] || (this.rooms[e.id] = this.decorate(e)), this.rooms[e.id];\n      }\n    }, {\n      key: \"set\",\n      value: function (e) {\n        return Promise.resolve(this.setSync(e));\n      }\n    }, {\n      key: \"get\",\n      value: function (e) {\n        var t = this;\n        return Promise.resolve(this.rooms[e]).then(function (n) {\n          return n || t.fetchBasicRoom(e).then(function (n) {\n            return t.set(e, n);\n          });\n        });\n      }\n    }, {\n      key: \"popSync\",\n      value: function (e) {\n        var t = this.rooms[e];\n        return delete this.rooms[e], t;\n      }\n    }, {\n      key: \"pop\",\n      value: function (e) {\n        return Promise.resolve(this.popSync(e));\n      }\n    }, {\n      key: \"addUserToRoom\",\n      value: function (e, t) {\n        return Promise.all([this.get(e).then(function (e) {\n          return e.userIds = Se(V(t, e.userIds)), e;\n        }), this.userStore.fetchMissingUser(t)]).then(function (e) {\n          return Ce(e, 1)[0];\n        });\n      }\n    }, {\n      key: \"removeUserFromRoom\",\n      value: function (e, t) {\n        return this.get(e).then(function (e) {\n          return e.userIds = e.userIds.filter(function (e) {\n            return e !== t;\n          }), e;\n        });\n      }\n    }, {\n      key: \"updateSync\",\n      value: function (e, t) {\n        var n = this.getSync(e);\n\n        for (var r in t) n[r] = t[r];\n\n        return n;\n      }\n    }, {\n      key: \"update\",\n      value: function (e, t) {\n        var n = this;\n        return Promise.all([this.get(e).then(function () {\n          return n.updateSync(e, t);\n        }), this.userStore.fetchMissingUsers(t.userIds || [])]).then(function (e) {\n          return Ce(e, 1)[0];\n        });\n      }\n    }, {\n      key: \"fetchBasicRoom\",\n      value: function (e) {\n        var t = this;\n        return this.instance.request({\n          method: \"GET\",\n          path: \"/rooms/\" + encodeURIComponent(e)\n        }).then(X(JSON.parse, Be)).catch(function (n) {\n          t.logger.warn(\"error fetching details for room \" + e + \":\", n);\n        });\n      }\n    }, {\n      key: \"snapshot\",\n      value: function () {\n        return this.rooms;\n      }\n    }, {\n      key: \"getSync\",\n      value: function (e) {\n        return this.rooms[e];\n      }\n    }, {\n      key: \"decorate\",\n      value: function (e) {\n        return e ? new Ze({\n          basicRoom: e,\n          userStore: this.userStore,\n          isSubscribedTo: this.isSubscribedTo,\n          logger: this.logger\n        }) : void 0;\n      }\n    }]), e;\n  }(),\n      et = function () {\n    function e(t, n, r) {\n      Pe(this, e), this.position = t.position, this.updatedAt = t.updatedAt, this.userId = t.userId, this.roomId = t.roomId, this.type = t.type, this.userStore = n, this.roomStore = r;\n    }\n\n    return Oe(e, [{\n      key: \"user\",\n      get: function () {\n        return this.userStore.getSync(this.userId);\n      }\n    }, {\n      key: \"room\",\n      get: function () {\n        return this.roomStore.getSync(this.roomId);\n      }\n    }]), e;\n  }(),\n      tt = function () {\n    function e(t) {\n      var n = t.instance,\n          r = t.userStore,\n          o = t.roomStore,\n          i = t.logger;\n      Pe(this, e), this.instance = n, this.userStore = r, this.roomStore = o, this.logger = i, this.cursors = {}, this.set = this.set.bind(this), this.get = this.get.bind(this), this.getSync = this.getSync.bind(this), this.fetchBasicCursor = this.fetchBasicCursor.bind(this), this.decorate = this.decorate.bind(this);\n    }\n\n    return Oe(e, [{\n      key: \"set\",\n      value: function (e) {\n        var t = this,\n            n = nt(e.userId, e.roomId);\n        return this.cursors[n] = this.decorate(e), this.userStore.fetchMissingUser(e.userId).then(function () {\n          return t.cursors[n];\n        });\n      }\n    }, {\n      key: \"get\",\n      value: function (e, t) {\n        var n = this,\n            r = nt(e, t);\n        return this.cursors[r] ? Promise.resolve(this.cursors[r]) : this.fetchBasicCursor(e, t).then(function (e) {\n          return n.set(e);\n        });\n      }\n    }, {\n      key: \"getSync\",\n      value: function (e, t) {\n        return this.cursors[nt(e, t)];\n      }\n    }, {\n      key: \"fetchBasicCursor\",\n      value: function (e, t) {\n        var n = this;\n        return this.instance.request({\n          method: \"GET\",\n          path: \"/cursors/0/rooms/\" + encodeURIComponent(t) + \"/users/\" + encodeURIComponent(e)\n        }).then(function (e) {\n          var t = JSON.parse(e);\n          if (t) return Fe(t);\n        }).catch(function (e) {\n          throw n.logger.warn(\"error fetching cursor:\", e), e;\n        });\n      }\n    }, {\n      key: \"decorate\",\n      value: function (e) {\n        return e ? new et(e, this.userStore, this.roomStore) : void 0;\n      }\n    }]), e;\n  }(),\n      nt = function (e, t) {\n    return encodeURIComponent(e) + \"/\" + encodeURIComponent(t);\n  },\n      rt = function () {\n    function e(t) {\n      var n = t.hooks,\n          r = t.instance,\n          o = t.logger;\n      Pe(this, e), this.hooks = n, this.instance = r, this.logger = o, this.lastSentRequests = {}, this.timers = {}, this.sendThrottledRequest = this.sendThrottledRequest.bind(this), this.onIsTyping = this.onIsTyping.bind(this), this.onStarted = this.onStarted.bind(this), this.onStopped = this.onStopped.bind(this);\n    }\n\n    return Oe(e, [{\n      key: \"sendThrottledRequest\",\n      value: function (e) {\n        var t = this,\n            n = Date.now(),\n            r = this.lastSentRequests[e];\n        return r && n - r < 1e3 ? Promise.resolve() : (this.lastSentRequests[e] = n, this.instance.request({\n          method: \"POST\",\n          path: \"/rooms/\" + encodeURIComponent(e) + \"/typing_indicators\"\n        }).catch(function (n) {\n          throw delete t.typingRequestSent[e], t.logger.warn(\"Error sending typing indicator in room \" + e, n), n;\n        }));\n      }\n    }, {\n      key: \"onIsTyping\",\n      value: function (e, t) {\n        var n = this;\n        this.timers[e.id] || (this.timers[e.id] = {}), this.timers[e.id][t.id] ? clearTimeout(this.timers[e.id][t.id]) : this.onStarted(e, t), this.timers[e.id][t.id] = setTimeout(function () {\n          n.onStopped(e, t), delete n.timers[e.id][t.id];\n        }, 1500);\n      }\n    }, {\n      key: \"onStarted\",\n      value: function (e, t) {\n        this.hooks.global.onUserStartedTyping && this.hooks.global.onUserStartedTyping(e, t), this.hooks.rooms[e.id] && this.hooks.rooms[e.id].onUserStartedTyping && this.hooks.rooms[e.id].onUserStartedTyping(t);\n      }\n    }, {\n      key: \"onStopped\",\n      value: function (e, t) {\n        this.hooks.global.onUserStoppedTyping && this.hooks.global.onUserStoppedTyping(e, t), this.hooks.rooms[e.id] && this.hooks.rooms[e.id].onUserStoppedTyping && this.hooks.rooms[e.id].onUserStoppedTyping(t);\n      }\n    }]), e;\n  }();\n\n  function ot(e) {\n    var t = e.basicCursors,\n        n = e.cursorStore,\n        r = e.onNewCursorHook;\n    return Promise.all(t.map(function (e) {\n      var t = n.getSync(e.userId, e.roomId);\n      if (!t || t.position !== e.position) return n.set(e).then(function (e) {\n        r && r(e);\n      });\n    }));\n  }\n\n  var it = function () {\n    function e(t) {\n      Pe(this, e), this.userId = t.userId, this.hooks = t.hooks, this.instance = t.instance, this.roomStore = t.roomStore, this.cursorStore = t.cursorStore, this.roomSubscriptions = t.roomSubscriptions, this.logger = t.logger, this.connectionTimeout = t.connectionTimeout, this.currentUser = t.currentUser, this.connect = this.connect.bind(this), this.cancel = this.cancel.bind(this), this.onEvent = this.onEvent.bind(this), this.onInitialState = this.onInitialState.bind(this), this.onAddedToRoom = this.onAddedToRoom.bind(this), this.onRemovedFromRoom = this.onRemovedFromRoom.bind(this), this.onRoomUpdated = this.onRoomUpdated.bind(this), this.onRoomDeleted = this.onRoomDeleted.bind(this);\n    }\n\n    return Oe(e, [{\n      key: \"connect\",\n      value: function () {\n        var e = this;\n        return new Promise(function (t, n) {\n          e.timeout = setTimeout(function () {\n            n(new Error(\"user subscription timed out\"));\n          }, e.connectionTimeout), e.onSubscriptionEstablished = function (n) {\n            clearTimeout(e.timeout), t(n);\n          }, e.sub = e.instance.subscribeNonResuming({\n            path: \"/users\",\n            listeners: {\n              onError: function (t) {\n                clearTimeout(e.timeout), n(t);\n              },\n              onEvent: e.onEvent\n            }\n          });\n        });\n      }\n    }, {\n      key: \"cancel\",\n      value: function () {\n        clearTimeout(this.timeout);\n\n        try {\n          this.sub && this.sub.unsubscribe();\n        } catch (e) {\n          this.logger.debug(\"error when cancelling user subscription\", e);\n        }\n      }\n    }, {\n      key: \"onEvent\",\n      value: function (e) {\n        var t = e.body;\n\n        switch (t.event_name) {\n          case \"initial_state\":\n            this.onInitialState(t.data);\n            break;\n\n          case \"added_to_room\":\n            this.onAddedToRoom(t.data);\n            break;\n\n          case \"removed_from_room\":\n            this.onRemovedFromRoom(t.data);\n            break;\n\n          case \"room_updated\":\n            this.onRoomUpdated(t.data);\n            break;\n\n          case \"room_deleted\":\n            this.onRoomDeleted(t.data);\n            break;\n\n          case \"new_cursor\":\n            this.onNewCursor(t.data);\n        }\n      }\n    }, {\n      key: \"onInitialState\",\n      value: function (e) {\n        var t = e.current_user,\n            n = e.rooms,\n            r = e.cursors,\n            o = He(t),\n            i = n.map(function (e) {\n          return Be(e);\n        }),\n            s = r.map(function (e) {\n          return Fe(e);\n        });\n        this.established ? function (e) {\n          var t = e.basicUser,\n              n = e.basicRooms,\n              r = e.basicCursors,\n              o = e.currentUser,\n              i = e.roomStore,\n              s = e.cursorStore,\n              a = e.hooks;\n          o.setPropertiesFromBasicUser(t);\n          var u = !0,\n              c = !1,\n              h = void 0;\n\n          try {\n            for (var d, l = n[Symbol.iterator](); !(u = (d = l.next()).done); u = !0) {\n              var f = d.value,\n                  p = i.getSync(f.id);\n\n              if (!p) {\n                var g = i.setSync(f);\n                a.global.onAddedToRoom && a.global.onAddedToRoom(g);\n              }\n\n              p && !p.eq(f) && (i.updateSync(f.id, f), a.global.onRoomUpdated && a.global.onRoomUpdated(p));\n            }\n          } catch (e) {\n            c = !0, h = e;\n          } finally {\n            try {\n              !u && l.return && l.return();\n            } finally {\n              if (c) throw h;\n            }\n          }\n\n          var m = function (e) {\n            if (!n.some(function (t) {\n              return t.id === e;\n            })) {\n              var t = i.popSync(e);\n              a.global.onRemovedFromRoom && a.global.onRemovedFromRoom(t);\n            }\n          };\n\n          for (var v in i.snapshot()) m(v);\n\n          ot({\n            basicCursors: r,\n            cursorStore: s,\n            onNewCursorHook: a.global.onNewReadCursor\n          });\n        }({\n          basicUser: o,\n          basicRooms: i,\n          basicCursors: s,\n          currentUser: this.currentUser,\n          roomStore: this.roomStore,\n          cursorStore: this.cursorStore,\n          hooks: this.hooks\n        }) : (this.established = !0, this.onSubscriptionEstablished({\n          basicUser: o,\n          basicRooms: i,\n          basicCursors: s\n        }));\n      }\n    }, {\n      key: \"onAddedToRoom\",\n      value: function (e) {\n        var t = this,\n            n = e.room;\n        this.roomStore.set(Be(n)).then(function (e) {\n          t.hooks.global.onAddedToRoom && t.hooks.global.onAddedToRoom(e);\n        });\n      }\n    }, {\n      key: \"onRemovedFromRoom\",\n      value: function (e) {\n        var t = this,\n            n = e.room_id;\n        this.roomStore.pop(n).then(function (e) {\n          e && t.hooks.global.onRemovedFromRoom && t.hooks.global.onRemovedFromRoom(e);\n        });\n      }\n    }, {\n      key: \"onRoomUpdated\",\n      value: function (e) {\n        var t = this,\n            n = e.room,\n            r = Be(n);\n        this.roomStore.update(r.id, r).then(function (e) {\n          t.hooks.global.onRoomUpdated && t.hooks.global.onRoomUpdated(e);\n        });\n      }\n    }, {\n      key: \"onRoomDeleted\",\n      value: function (e) {\n        var t = this,\n            n = e.room_id;\n        this.roomStore.pop(n).then(function (e) {\n          e && t.hooks.global.onRoomDeleted && t.hooks.global.onRoomDeleted(e);\n        });\n      }\n    }, {\n      key: \"onNewCursor\",\n      value: function (e) {\n        var t = this;\n        return this.cursorStore.set(Fe(e)).then(function (e) {\n          t.hooks.global.onNewReadCursor && 0 === e.type && t.hooks.global.onNewReadCursor(e);\n        });\n      }\n    }]), e;\n  }(),\n      st = function () {\n    function e(t) {\n      Pe(this, e), this.userId = t.userId, this.instance = t.instance, this.logger = t.logger, this.connectionTimeout = t.connectionTimeout;\n    }\n\n    return Oe(e, [{\n      key: \"connect\",\n      value: function () {\n        var e = this;\n        return new Promise(function (t, n) {\n          e.timeout = setTimeout(function () {\n            n(new Error(\"presence subscription timed out\"));\n          }, e.connectionTimeout), e.sub = e.instance.subscribeNonResuming({\n            path: \"/users/\" + encodeURIComponent(e.userId) + \"/register\",\n            listeners: {\n              onOpen: function () {\n                clearTimeout(e.timeout), t();\n              },\n              onError: function (t) {\n                clearTimeout(e.timeout), n(t);\n              }\n            }\n          });\n        });\n      }\n    }, {\n      key: \"cancel\",\n      value: function () {\n        clearTimeout(this.timeout);\n\n        try {\n          this.sub && this.sub.unsubscribe();\n        } catch (e) {\n          this.logger.debug(\"error when cancelling presence subscription\", e);\n        }\n      }\n    }]), e;\n  }(),\n      at = function () {\n    function e(t) {\n      Pe(this, e), this.userId = t.userId, this.hooks = t.hooks, this.instance = t.instance, this.userStore = t.userStore, this.roomStore = t.roomStore, this.presenceStore = t.presenceStore, this.logger = t.logger, this.connectionTimeout = t.connectionTimeout, this.connect = this.connect.bind(this), this.cancel = this.cancel.bind(this), this.onEvent = this.onEvent.bind(this), this.onPresenceState = this.onPresenceState.bind(this);\n    }\n\n    return Oe(e, [{\n      key: \"connect\",\n      value: function () {\n        var e = this;\n        return new Promise(function (t, n) {\n          e.timeout = setTimeout(function () {\n            n(new Error(\"user presence subscription timed out\"));\n          }, e.connectionTimeout), e.onSubscriptionEstablished = function () {\n            clearTimeout(e.timeout), t();\n          }, e.sub = e.instance.subscribeNonResuming({\n            path: \"/users/\" + encodeURIComponent(e.userId),\n            listeners: {\n              onError: function (t) {\n                clearTimeout(e.timeout), n(t);\n              },\n              onEvent: e.onEvent\n            }\n          });\n        });\n      }\n    }, {\n      key: \"cancel\",\n      value: function () {\n        clearTimeout(this.timeout);\n\n        try {\n          this.sub && this.sub.unsubscribe();\n        } catch (e) {\n          this.logger.debug(\"error when cancelling user presence subscription\", e);\n        }\n      }\n    }, {\n      key: \"onEvent\",\n      value: function (e) {\n        var t = e.body;\n\n        switch (t.event_name) {\n          case \"presence_state\":\n            this.onPresenceState(t.data);\n        }\n      }\n    }, {\n      key: \"onPresenceState\",\n      value: function (e) {\n        var t = this;\n        this.onSubscriptionEstablished();\n\n        var n = this.presenceStore[this.userId] || \"unknown\",\n            r = function (e) {\n          return {\n            state: [\"online\", \"offline\"].includes(e.state) ? e.state : \"unknown\"\n          };\n        }(e).state;\n\n        r !== n && (this.presenceStore[this.userId] = r, this.userStore.get(this.userId).then(function (e) {\n          t.hooks.global.onPresenceChanged && t.hooks.global.onPresenceChanged({\n            current: r,\n            previous: n\n          }, e), Y(fe(function (o) {\n            var i = Ce(o, 2),\n                s = i[0],\n                a = i[1];\n            return t.roomStore.get(s).then(function (t) {\n              le(e.id, t.userIds) && a.onPresenceChanged({\n                current: r,\n                previous: n\n              }, e);\n            });\n          }), ce(function (e) {\n            return void 0 !== e[1].onPresenceChanged;\n          }), Re)(t.hooks.rooms);\n        }));\n      }\n    }]), e;\n  }(),\n      ut = function () {\n    function e(t) {\n      Pe(this, e), this.onNewCursorHook = t.onNewCursorHook, this.roomId = t.roomId, this.cursorStore = t.cursorStore, this.instance = t.instance, this.logger = t.logger, this.connectionTimeout = t.connectionTimeout, this.connect = this.connect.bind(this), this.cancel = this.cancel.bind(this), this.onEvent = this.onEvent.bind(this), this.onInitialState = this.onInitialState.bind(this), this.onNewCursor = this.onNewCursor.bind(this);\n    }\n\n    return Oe(e, [{\n      key: \"connect\",\n      value: function () {\n        var e = this;\n        return new Promise(function (t, n) {\n          e.timeout = setTimeout(function () {\n            n(new Error(\"cursor subscription timed out\"));\n          }, e.connectionTimeout), e.onSubscriptionEstablished = function (n) {\n            clearTimeout(e.timeout), t(n);\n          }, e.sub = e.instance.subscribeNonResuming({\n            path: \"/cursors/0/rooms/\" + encodeURIComponent(e.roomId),\n            listeners: {\n              onError: function (t) {\n                clearTimeout(e.timeout), n(t);\n              },\n              onEvent: e.onEvent\n            }\n          });\n        });\n      }\n    }, {\n      key: \"cancel\",\n      value: function () {\n        clearTimeout(this.timeout);\n\n        try {\n          this.sub && this.sub.unsubscribe();\n        } catch (e) {\n          this.logger.debug(\"error when cancelling cursor subscription\", e);\n        }\n      }\n    }, {\n      key: \"onEvent\",\n      value: function (e) {\n        var t = e.body;\n\n        switch (t.event_name) {\n          case \"initial_state\":\n            this.onInitialState(t.data);\n            break;\n\n          case \"new_cursor\":\n            this.onNewCursor(t.data);\n        }\n      }\n    }, {\n      key: \"onInitialState\",\n      value: function (e) {\n        var t = this,\n            n = e.cursors.map(function (e) {\n          return Fe(e);\n        });\n        this.established ? ot({\n          basicCursors: n,\n          cursorStore: this.cursorStore,\n          onNewCursorHook: this.onNewCursorHook\n        }) : (this.established = !0, Promise.all(n.map(function (e) {\n          return t.cursorStore.set(e);\n        })).then(this.onSubscriptionEstablished));\n      }\n    }, {\n      key: \"onNewCursor\",\n      value: function (e) {\n        var t = this;\n        return this.cursorStore.set(Fe(e)).then(function (e) {\n          return t.onNewCursorHook(e);\n        });\n      }\n    }]), e;\n  }(),\n      ct = function () {\n    function e(t, n, r) {\n      Pe(this, e), this.type = t.type, this.name = t.name, this.size = t.size, void 0 !== t.customData && (this.customData = t.customData), this._id = t._id, this._downloadURL = t._downloadURL, this._expiration = t._expiration, this._roomId = n, this._instance = r, this.url = this.url.bind(this), this.urlExpiry = this.urlExpiry.bind(this), this._fetchNewDownloadURL = this._fetchNewDownloadURL.bind(this);\n    }\n\n    return Oe(e, [{\n      key: \"url\",\n      value: function () {\n        return this.urlExpiry().getTime() - Date.now() < 18e5 ? this._fetchNewDownloadURL() : Promise.resolve(this._downloadURL);\n      }\n    }, {\n      key: \"urlExpiry\",\n      value: function () {\n        return this._expiration;\n      }\n    }, {\n      key: \"_fetchNewDownloadURL\",\n      value: function () {\n        var e = this;\n        return this._instance.request({\n          method: \"GET\",\n          path: \"rooms/\" + encodeURIComponent(this._roomId) + \"/attachments/\" + this._id\n        }).then(function (t) {\n          var n = JSON.parse(t),\n              r = n.download_url,\n              o = n.expiration;\n          return e._downloadURL = r, e._expiration = new Date(o), e._downloadURL;\n        });\n      }\n    }]), e;\n  }(),\n      ht = function () {\n    function e(t, n, r, o) {\n      var i = this;\n      Pe(this, e), this.id = t.id, this.senderId = t.senderId, this.roomId = t.roomId, this.createdAt = t.createdAt, this.updatedAt = t.updatedAt, this.deletedAt = t.deletedAt, t.parts ? this.parts = t.parts.map(function (e) {\n        var t = e.partType,\n            n = e.payload;\n        return \"attachment\" === t ? {\n          partType: t,\n          payload: new ct(n, i.roomId, o)\n        } : {\n          partType: t,\n          payload: n\n        };\n      }) : (this.text = t.text, t.attachment && (this.attachment = t.attachment)), this.userStore = n, this.roomStore = r;\n    }\n\n    return Oe(e, [{\n      key: \"sender\",\n      get: function () {\n        return this.userStore.getSync(this.senderId);\n      }\n    }, {\n      key: \"room\",\n      get: function () {\n        return this.roomStore.getSync(this.roomId);\n      }\n    }]), e;\n  }(),\n      dt = function () {\n    function e(t) {\n      Pe(this, e), this.roomId = t.roomId, this.messageLimit = t.messageLimit, this.userId = t.userId, this.instance = t.instance, this.userStore = t.userStore, this.roomStore = t.roomStore, this.typingIndicators = t.typingIndicators, this.messageBuffer = [], this.logger = t.logger, this.connectionTimeout = t.connectionTimeout, this.onMessageHook = t.onMessageHook, this.onMessageDeletedHook = t.onMessageDeletedHook, this.connect = this.connect.bind(this), this.cancel = this.cancel.bind(this), this.onEvent = this.onEvent.bind(this), this.onMessage = this.onMessage.bind(this), this.onMessageDeleted = this.onMessageDeleted.bind(this), this.flushBuffer = this.flushBuffer.bind(this), this.onIsTyping = this.onIsTyping.bind(this);\n    }\n\n    return Oe(e, [{\n      key: \"connect\",\n      value: function () {\n        var e = this;\n        return new Promise(function (t, n) {\n          e.timeout = setTimeout(function () {\n            n(new Error(\"message subscription timed out\"));\n          }, e.connectionTimeout), e.sub = e.instance.subscribeResuming({\n            path: \"/rooms/\" + encodeURIComponent(e.roomId) + \"?\" + Ae({\n              message_limit: e.messageLimit\n            }),\n            listeners: {\n              onOpen: function () {\n                clearTimeout(e.timeout), t();\n              },\n              onError: function (t) {\n                clearTimeout(e.timeout), n(t);\n              },\n              onEvent: e.onEvent\n            }\n          });\n        });\n      }\n    }, {\n      key: \"cancel\",\n      value: function () {\n        clearTimeout(this.timeout);\n\n        try {\n          this.sub && this.sub.unsubscribe();\n        } catch (e) {\n          this.logger.debug(\"error when cancelling message subscription\", e);\n        }\n      }\n    }, {\n      key: \"onEvent\",\n      value: function (e) {\n        var t = e.body;\n\n        switch (t.event_name) {\n          case \"new_message\":\n            this.onMessage(t.data);\n            break;\n\n          case \"message_deleted\":\n            this.onMessageDeleted(t.data);\n            break;\n\n          case \"is_typing\":\n            this.onIsTyping(t.data);\n        }\n      }\n    }, {\n      key: \"onMessage\",\n      value: function (e) {\n        var t = this,\n            n = {\n          message: new ht(Ve(e), this.userStore, this.roomStore, this.instance),\n          ready: !1\n        };\n        this.messageBuffer.push(n), this.userStore.fetchMissingUser(n.message.senderId).catch(function (e) {\n          t.logger.error(\"error fetching missing user information:\", e);\n        }).then(function () {\n          n.ready = !0, t.flushBuffer();\n        });\n      }\n    }, {\n      key: \"onMessageDeleted\",\n      value: function (e) {\n        this.onMessageDeletedHook(e.message_id);\n      }\n    }, {\n      key: \"flushBuffer\",\n      value: function () {\n        for (; this.messageBuffer.length > 0 && this.messageBuffer[0].ready;) this.onMessageHook(this.messageBuffer.shift().message);\n      }\n    }, {\n      key: \"onIsTyping\",\n      value: function (e) {\n        var t = this,\n            n = e.user_id;\n        n !== this.userId && Promise.all([this.roomStore.get(this.roomId), this.userStore.get(n)]).then(function (e) {\n          var n = Ce(e, 2),\n              r = n[0],\n              o = n[1];\n          return t.typingIndicators.onIsTyping(r, o);\n        });\n      }\n    }]), e;\n  }(),\n      lt = function () {\n    function e(t) {\n      Pe(this, e), this.roomId = t.roomId, this.instance = t.instance, this.userStore = t.userStore, this.roomStore = t.roomStore, this.logger = t.logger, this.connectionTimeout = t.connectionTimeout, this.onUserJoinedRoomHook = t.onUserJoinedRoomHook, this.onUserLeftRoomHook = t.onUserLeftRoomHook, this.connect = this.connect.bind(this), this.cancel = this.cancel.bind(this), this.onEvent = this.onEvent.bind(this), this.onInitialState = this.onInitialState.bind(this), this.onUserJoined = this.onUserJoined.bind(this), this.onUserLeft = this.onUserLeft.bind(this);\n    }\n\n    return Oe(e, [{\n      key: \"connect\",\n      value: function () {\n        var e = this;\n        return new Promise(function (t, n) {\n          e.timeout = setTimeout(function () {\n            n(new Error(\"membership subscription timed out\"));\n          }, e.connectionTimeout), e.onSubscriptionEstablished = function (n) {\n            clearTimeout(e.timeout), t(n);\n          }, e.sub = e.instance.subscribeNonResuming({\n            path: \"/rooms/\" + encodeURIComponent(e.roomId) + \"/memberships\",\n            listeners: {\n              onError: function (t) {\n                clearTimeout(e.timeout), n(t);\n              },\n              onEvent: e.onEvent\n            }\n          });\n        });\n      }\n    }, {\n      key: \"cancel\",\n      value: function () {\n        clearTimeout(this.timeout);\n\n        try {\n          this.sub && this.sub.unsubscribe();\n        } catch (e) {\n          this.logger.debug(\"error when cancelling membership subscription\", e);\n        }\n      }\n    }, {\n      key: \"onEvent\",\n      value: function (e) {\n        var t = e.body;\n\n        switch (t.event_name) {\n          case \"initial_state\":\n            this.onInitialState(t.data);\n            break;\n\n          case \"user_joined\":\n            this.onUserJoined(t.data);\n            break;\n\n          case \"user_left\":\n            this.onUserLeft(t.data);\n        }\n      }\n    }, {\n      key: \"onInitialState\",\n      value: function (e) {\n        var t = this,\n            n = e.user_ids;\n        this.established ? function (e) {\n          var t = e.userIds,\n              n = e.roomId,\n              r = e.roomStore,\n              o = e.userStore,\n              i = e.onUserJoinedRoomHook,\n              s = e.onUserLeftRoomHook;\n          o.fetchMissingUsers(t).then(function () {\n            var e = r.getSync(n);\n            return t.filter(function (t) {\n              return !e.userIds.includes(t);\n            }).forEach(function (t) {\n              return o.get(t).then(function (t) {\n                return i(e, t);\n              });\n            }), e.userIds.filter(function (e) {\n              return !t.includes(e);\n            }).forEach(function (t) {\n              return o.get(t).then(function (t) {\n                return s(e, t);\n              });\n            }), r.update(n, {\n              userIds: t\n            });\n          });\n        }({\n          userIds: n,\n          roomId: this.roomId,\n          roomStore: this.roomStore,\n          userStore: this.userStore,\n          onUserJoinedRoomHook: this.onUserJoinedRoomHook,\n          onUserLeftRoomHook: this.onUserLeftRoomHook\n        }) : (this.established = !0, this.roomStore.update(this.roomId, {\n          userIds: n\n        }).then(function () {\n          t.onSubscriptionEstablished();\n        }));\n      }\n    }, {\n      key: \"onUserJoined\",\n      value: function (e) {\n        var t = this,\n            n = e.user_id;\n        this.roomStore.addUserToRoom(this.roomId, n).then(function (e) {\n          return t.userStore.get(n).then(function (n) {\n            return t.onUserJoinedRoomHook(e, n);\n          });\n        });\n      }\n    }, {\n      key: \"onUserLeft\",\n      value: function (e) {\n        var t = this,\n            n = e.user_id;\n        this.roomStore.removeUserFromRoom(this.roomId, n).then(function (e) {\n          return t.userStore.get(n).then(function (n) {\n            return t.onUserLeftRoomHook(e, n);\n          });\n        });\n      }\n    }]), e;\n  }(),\n      ft = function () {\n    function e(t) {\n      Pe(this, e), this.buffer = [], this.messageSub = new dt({\n        roomId: t.roomId,\n        messageLimit: t.messageLimit,\n        userId: t.userId,\n        instance: t.serverInstance,\n        userStore: t.userStore,\n        roomStore: t.roomStore,\n        typingIndicators: t.typingIndicators,\n        logger: t.logger,\n        connectionTimeout: t.connectionTimeout,\n        onMessageHook: this.bufferWhileConnecting(function (e) {\n          t.hooks.rooms[t.roomId] && t.hooks.rooms[t.roomId].onMessage && t.hooks.rooms[t.roomId].onMessage(e);\n        }),\n        onMessageDeletedHook: this.bufferWhileConnecting(function (e) {\n          t.hooks.rooms[t.roomId] && t.hooks.rooms[t.roomId].onMessageDeleted && t.hooks.rooms[t.roomId].onMessageDeleted(e);\n        })\n      }), this.cursorSub = new ut({\n        roomId: t.roomId,\n        cursorStore: t.cursorStore,\n        instance: t.cursorsInstance,\n        logger: t.logger,\n        connectionTimeout: t.connectionTimeout,\n        onNewCursorHook: this.bufferWhileConnecting(function (e) {\n          t.hooks.rooms[t.roomId] && t.hooks.rooms[t.roomId].onNewReadCursor && 0 === e.type && e.userId !== t.userId && t.hooks.rooms[t.roomId].onNewReadCursor(e);\n        })\n      }), this.membershipSub = new lt({\n        roomId: t.roomId,\n        instance: t.serverInstance,\n        userStore: t.userStore,\n        roomStore: t.roomStore,\n        logger: t.logger,\n        connectionTimeout: t.connectionTimeout,\n        onUserJoinedRoomHook: this.bufferWhileConnecting(function (e, n) {\n          t.hooks.global.onUserJoinedRoom && t.hooks.global.onUserJoinedRoom(e, n), t.hooks.rooms[e.id] && t.hooks.rooms[e.id].onUserJoined && t.hooks.rooms[e.id].onUserJoined(n);\n        }),\n        onUserLeftRoomHook: this.bufferWhileConnecting(function (e, n) {\n          t.hooks.global.onUserLeftRoom && t.hooks.global.onUserLeftRoom(e, n), t.hooks.rooms[e.id] && t.hooks.rooms[e.id].onUserLeft && t.hooks.rooms[e.id].onUserLeft(n);\n        })\n      });\n    }\n\n    return Oe(e, [{\n      key: \"connect\",\n      value: function () {\n        var e = this;\n        return this.cancelled ? Promise.reject(new Error(\"attempt to connect a cancelled room subscription\")) : Promise.all([this.messageSub.connect(), this.cursorSub.connect(), this.membershipSub.connect()]).then(function () {\n          return e.flushBuffer();\n        });\n      }\n    }, {\n      key: \"cancel\",\n      value: function () {\n        this.cancelled = !0, this.messageSub.cancel(), this.cursorSub.cancel(), this.membershipSub.cancel();\n      }\n    }, {\n      key: \"bufferWhileConnecting\",\n      value: function (e) {\n        var t = this;\n        return function () {\n          for (var n = arguments.length, r = Array(n), o = 0; o < n; o++) r[o] = arguments[o];\n\n          t.connected ? e.apply(void 0, r) : t.buffer.push(e.bind.apply(e, [t].concat(r)));\n        };\n      }\n    }, {\n      key: \"flushBuffer\",\n      value: function () {\n        this.connected = !0, this.buffer.forEach(function (e) {\n          return e();\n        }), delete this.buffer;\n      }\n    }]), e;\n  }(),\n      pt = function () {\n    function e(t) {\n      Pe(this, e), this.onNotificationHook = t.onNotificationHook, this.userId = t.userId, this.instance = t.instance, this.logger = t.logger, this.connectionTimeout = t.connectionTimeout, this.connect = this.connect.bind(this), this.cancel = this.cancel.bind(this), this.onEvent = this.onEvent.bind(this), this.onNotification = this.onNotification.bind(this);\n    }\n\n    return Oe(e, [{\n      key: \"connect\",\n      value: function () {\n        var e = this;\n        return new Promise(function (t, n) {\n          e.timeout = setTimeout(function () {\n            n(new Error(\"notification subscription timed out\"));\n          }, e.connectionTimeout), e.sub = e.instance.subscribeNonResuming({\n            path: \"/users/\" + encodeURIComponent(e.userId),\n            listeners: {\n              onOpen: function () {\n                clearTimeout(e.timeout), t();\n              },\n              onError: function (t) {\n                clearTimeout(e.timeout), n(t);\n              },\n              onEvent: e.onEvent\n            }\n          });\n        });\n      }\n    }, {\n      key: \"cancel\",\n      value: function () {\n        clearTimeout(this.timeout);\n\n        try {\n          this.sub && this.sub.unsubscribe();\n        } catch (e) {\n          this.logger.debug(\"error when cancelling notification subscription\", e);\n        }\n      }\n    }, {\n      key: \"onEvent\",\n      value: function (e) {\n        var t = e.body;\n\n        switch (t.event_name) {\n          case \"push_notification\":\n            this.onNotification(t.data);\n        }\n      }\n    }, {\n      key: \"onNotification\",\n      value: function (e) {\n        this.onNotificationHook(e);\n      }\n    }]), e;\n  }();\n\n  var gt = function () {\n    function e(t) {\n      var n = this,\n          r = t.serverInstanceV2,\n          o = t.serverInstanceV6,\n          i = t.connectionTimeout,\n          s = t.cursorsInstance,\n          a = t.filesInstance,\n          u = t.hooks,\n          c = t.id,\n          h = t.presenceInstance,\n          d = t.beamsTokenProviderInstance,\n          l = t.pushNotificationsInstance,\n          f = t.beamsInstanceInitFn;\n      Pe(this, e), this.hooks = {\n        global: u,\n        rooms: {}\n      }, this.id = c, this.encodedId = encodeURIComponent(this.id), this.serverInstanceV2 = r, this.serverInstanceV6 = o, this.filesInstance = a, this.cursorsInstance = s, this.connectionTimeout = i, this.presenceInstance = h, this.beamsTokenProviderInstance = d, this.pushNotificationsInstance = l, this.beamsInstanceInitFn = f, this.logger = o.logger, this.presenceStore = {}, this.userStore = new Ye({\n        instance: this.serverInstanceV6,\n        presenceStore: this.presenceStore,\n        logger: this.logger\n      }), this.roomStore = new Qe({\n        instance: this.serverInstanceV6,\n        userStore: this.userStore,\n        isSubscribedTo: function (e) {\n          return n.isSubscribedTo(e);\n        },\n        logger: this.logger\n      }), this.cursorStore = new tt({\n        instance: this.cursorsInstance,\n        userStore: this.userStore,\n        roomStore: this.roomStore,\n        logger: this.logger\n      }), this.typingIndicators = new rt({\n        hooks: this.hooks,\n        instance: this.serverInstanceV6,\n        logger: this.logger\n      }), this.userStore.onSetHooks.push(function (e) {\n        return n.subscribeToUserPresence(e);\n      }), this.roomSubscriptions = {}, this.readCursorBuffer = {}, this.userPresenceSubscriptions = {}, this.setReadCursor = this.setReadCursor.bind(this), this.readCursor = this.readCursor.bind(this), this.isTypingIn = this.isTypingIn.bind(this), this.createRoom = this.createRoom.bind(this), this.getJoinableRooms = this.getJoinableRooms.bind(this), this.joinRoom = this.joinRoom.bind(this), this.leaveRoom = this.leaveRoom.bind(this), this.addUserToRoom = this.addUserToRoom.bind(this), this.removeUserFromRoom = this.removeUserFromRoom.bind(this), this.sendMessage = this.sendMessage.bind(this), this.sendSimpleMessage = this.sendSimpleMessage.bind(this), this.sendMultipartMessage = this.sendMultipartMessage.bind(this), this.fetchMessages = this.fetchMessages.bind(this), this.fetchMultipartMessages = this.fetchMultipartMessages.bind(this), this.subscribeToRoom = this.subscribeToRoom.bind(this), this.subscribeToRoomMultipart = this.subscribeToRoomMultipart.bind(this), this.updateRoom = this.updateRoom.bind(this), this.deleteRoom = this.deleteRoom.bind(this), this.setReadCursorRequest = this.setReadCursorRequest.bind(this), this.uploadDataAttachment = this.uploadDataAttachment.bind(this), this.isMemberOf = this.isMemberOf.bind(this), this.isSubscribedTo = this.isSubscribedTo.bind(this), this.decorateMessage = this.decorateMessage.bind(this), this.setPropertiesFromBasicUser = this.setPropertiesFromBasicUser.bind(this), this.establishUserSubscription = this.establishUserSubscription.bind(this), this.establishPresenceSubscription = this.establishPresenceSubscription.bind(this), this.subscribeToUserPresence = this.subscribeToUserPresence.bind(this), this.disconnect = this.disconnect.bind(this), this._uploadAttachment = this._uploadAttachment.bind(this);\n    }\n\n    return Oe(e, [{\n      key: \"setReadCursor\",\n      value: function () {\n        var e = this,\n            t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            n = t.roomId,\n            r = t.position;\n        return De(\"roomId\", \"string\", n), De(\"position\", \"number\", r), new Promise(function (t, o) {\n          void 0 !== e.readCursorBuffer[n] ? (e.readCursorBuffer[n].position = b(e.readCursorBuffer[n].position, r), e.readCursorBuffer[n].callbacks.push({\n            resolve: t,\n            reject: o\n          })) : (e.readCursorBuffer[n] = {\n            position: r,\n            callbacks: [{\n              resolve: t,\n              reject: o\n            }]\n          }, setTimeout(function () {\n            e.setReadCursorRequest(Ne({\n              roomId: n\n            }, e.readCursorBuffer[n])), delete e.readCursorBuffer[n];\n          }, 500));\n        });\n      }\n    }, {\n      key: \"readCursor\",\n      value: function () {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            t = e.roomId,\n            n = e.userId,\n            r = void 0 === n ? this.id : n;\n\n        if (De(\"roomId\", \"string\", t), De(\"userId\", \"string\", r), r !== this.id && !this.isSubscribedTo(t)) {\n          var o = new Error(\"Must be subscribed to room \" + t + \" to access member's read cursors\");\n          throw this.logger.error(o), o;\n        }\n\n        return this.cursorStore.getSync(r, t);\n      }\n    }, {\n      key: \"isTypingIn\",\n      value: function () {\n        var e = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}).roomId;\n        return De(\"roomId\", \"string\", e), this.typingIndicators.sendThrottledRequest(e);\n      }\n    }, {\n      key: \"createRoom\",\n      value: function () {\n        var e = this,\n            t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            n = t.id,\n            r = t.name,\n            o = t.pushNotificationTitleOverride,\n            i = t.addUserIds,\n            s = t.customData,\n            a = Ue(t, [\"id\", \"name\", \"pushNotificationTitleOverride\", \"addUserIds\", \"customData\"]);\n        return n && De(\"id\", \"string\", n), r && De(\"name\", \"string\", r), o && De(\"pushNotificationTitleOverride\", \"string\", o), i && je(\"addUserIds\", \"string\", i), s && De(\"customData\", \"object\", s), this.serverInstanceV6.request({\n          method: \"POST\",\n          path: \"/rooms\",\n          json: {\n            id: n,\n            created_by_id: this.id,\n            name: r,\n            push_notification_title_override: o,\n            private: !!a.private,\n            user_ids: i,\n            custom_data: s\n          }\n        }).then(function (t) {\n          return e.roomStore.set(Be(JSON.parse(t)));\n        }).catch(function (t) {\n          throw e.logger.warn(\"error creating room:\", t), t;\n        });\n      }\n    }, {\n      key: \"getJoinableRooms\",\n      value: function () {\n        var e = this;\n        return this.serverInstanceV6.request({\n          method: \"GET\",\n          path: \"/users/\" + this.encodedId + \"/rooms?joinable=true\"\n        }).then(X(JSON.parse, L(Be))).catch(function (t) {\n          throw e.logger.warn(\"error getting joinable rooms:\", t), t;\n        });\n      }\n    }, {\n      key: \"joinRoom\",\n      value: function () {\n        var e = this,\n            t = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}).roomId;\n        return De(\"roomId\", \"string\", t), this.isMemberOf(t) ? this.roomStore.get(t) : this.serverInstanceV6.request({\n          method: \"POST\",\n          path: \"/users/\" + this.encodedId + \"/rooms/\" + encodeURIComponent(t) + \"/join\"\n        }).then(function (t) {\n          return e.roomStore.set(Be(JSON.parse(t)));\n        }).catch(function (n) {\n          throw e.logger.warn(\"error joining room \" + t + \":\", n), n;\n        });\n      }\n    }, {\n      key: \"leaveRoom\",\n      value: function () {\n        var e = this,\n            t = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}).roomId;\n        return De(\"roomId\", \"string\", t), this.roomStore.get(t).then(function (n) {\n          return e.serverInstanceV6.request({\n            method: \"POST\",\n            path: \"/users/\" + e.encodedId + \"/rooms/\" + encodeURIComponent(t) + \"/leave\"\n          }).then(function () {\n            return n;\n          });\n        }).catch(function (n) {\n          throw e.logger.warn(\"error leaving room \" + t + \":\", n), n;\n        });\n      }\n    }, {\n      key: \"addUserToRoom\",\n      value: function () {\n        var e = this,\n            t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            n = t.userId,\n            r = t.roomId;\n        return De(\"userId\", \"string\", n), De(\"roomId\", \"string\", r), this.serverInstanceV6.request({\n          method: \"PUT\",\n          path: \"/rooms/\" + encodeURIComponent(r) + \"/users/add\",\n          json: {\n            user_ids: [n]\n          }\n        }).then(function () {\n          return e.roomStore.addUserToRoom(r, n);\n        }).catch(function (t) {\n          throw e.logger.warn(\"error adding user \" + n + \" to room \" + r + \":\", t), t;\n        });\n      }\n    }, {\n      key: \"removeUserFromRoom\",\n      value: function () {\n        var e = this,\n            t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            n = t.userId,\n            r = t.roomId;\n        return De(\"userId\", \"string\", n), De(\"roomId\", \"string\", r), this.serverInstanceV6.request({\n          method: \"PUT\",\n          path: \"/rooms/\" + encodeURIComponent(r) + \"/users/remove\",\n          json: {\n            user_ids: [n]\n          }\n        }).then(function () {\n          return e.roomStore.removeUserFromRoom(r, n);\n        }).catch(function (t) {\n          throw e.logger.warn(\"error removing user \" + n + \" from room \" + r + \":\", t), t;\n        });\n      }\n    }, {\n      key: \"sendMessage\",\n      value: function () {\n        var e = this,\n            t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            n = t.text,\n            r = t.roomId,\n            o = t.attachment;\n        return De(\"text\", \"string\", n), De(\"roomId\", \"string\", r), new Promise(function (t, n) {\n          void 0 !== o && mt(o) ? t(e.uploadDataAttachment(r, o)) : void 0 !== o && vt(o) ? t({\n            resource_link: o.link,\n            type: o.type\n          }) : void 0 !== o ? n(new TypeError(\"attachment was malformed\")) : t();\n        }).then(function (t) {\n          return e.serverInstanceV2.request({\n            method: \"POST\",\n            path: \"/rooms/\" + encodeURIComponent(r) + \"/messages\",\n            json: {\n              text: n,\n              attachment: t\n            }\n          });\n        }).then(X(JSON.parse, B(\"message_id\"))).catch(function (t) {\n          throw e.logger.warn(\"error sending message to room \" + r + \":\", t), t;\n        });\n      }\n    }, {\n      key: \"sendSimpleMessage\",\n      value: function () {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            t = e.roomId,\n            n = e.text;\n        return this.sendMultipartMessage({\n          roomId: t,\n          parts: [{\n            type: \"text/plain\",\n            content: n\n          }]\n        });\n      }\n    }, {\n      key: \"sendMultipartMessage\",\n      value: function () {\n        var e = this,\n            t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            n = t.roomId,\n            r = t.parts;\n        return De(\"roomId\", \"string\", n), je(\"parts\", \"object\", r), 0 === r.length ? Promise.reject(new TypeError(\"message must contain at least one part\")) : Promise.all(r.map(function (t) {\n          return t.type = t.type || t.file && t.file.type, De(\"part.type\", \"string\", t.type), t.content && De(\"part.content\", \"string\", t.content), t.url && De(\"part.url\", \"string\", t.url), t.name && De(\"part.name\", \"string\", t.name), t.file && De(\"part.file.size\", \"number\", t.file.size), t.file ? e._uploadAttachment({\n            roomId: n,\n            part: t\n          }) : t;\n        })).then(function (t) {\n          return e.serverInstanceV6.request({\n            method: \"POST\",\n            path: \"/rooms/\" + encodeURIComponent(n) + \"/messages\",\n            json: {\n              parts: t.map(function (e) {\n                return {\n                  type: e.type,\n                  content: e.content,\n                  url: e.url,\n                  attachment: e.attachment\n                };\n              })\n            }\n          });\n        }).then(function (e) {\n          return JSON.parse(e).message_id;\n        }).catch(function (t) {\n          throw e.logger.warn(\"error sending message to room \" + n + \":\", t), t;\n        });\n      }\n    }, {\n      key: \"fetchMessages\",\n      value: function () {\n        var e = this,\n            t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            n = t.roomId,\n            r = t.initialId,\n            o = t.limit,\n            i = t.direction,\n            s = t.serverInstance;\n        return De(\"roomId\", \"string\", n), r && De(\"initialId\", \"number\", r), o && De(\"limit\", \"number\", o), i && function (e, t, n) {\n          if (!le(n, t)) throw new TypeError(\"expected \" + e + \" to be one of \" + t + \" but was \" + n);\n        }(\"direction\", [\"older\", \"newer\"], i), (s || this.serverInstanceV2).request({\n          method: \"GET\",\n          path: \"/rooms/\" + encodeURIComponent(n) + \"/messages?\" + Ae({\n            initial_id: r,\n            limit: o,\n            direction: i\n          })\n        }).then(function (t) {\n          var n = JSON.parse(t).map(function (t) {\n            return e.decorateMessage(Ve(t));\n          });\n          return e.userStore.fetchMissingUsers(Se(L(B(\"senderId\"), n))).then(function () {\n            return ke(function (e, t) {\n              return e.id - t.id;\n            }, n);\n          });\n        }).catch(function (t) {\n          throw e.logger.warn(\"error fetching messages from room \" + n + \":\", t), t;\n        });\n      }\n    }, {\n      key: \"fetchMultipartMessages\",\n      value: function () {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n        return this.fetchMessages(Ne({}, e, {\n          serverInstance: this.serverInstanceV6\n        }));\n      }\n    }, {\n      key: \"subscribeToRoom\",\n      value: function () {\n        var e = this,\n            t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            n = t.roomId,\n            r = t.hooks,\n            o = void 0 === r ? {} : r,\n            i = t.messageLimit,\n            s = t.serverInstance;\n        De(\"roomId\", \"string\", n), xe(\"hooks\", \"function\", o), !s && o.onMessageDeleted && this.logger.warn(\"`subscribeToRoom` does not support the `onMessageDeleted` hook. Please use `subscribeToRoomMultipart` instead.\"), i && De(\"messageLimit\", \"number\", i), this.roomSubscriptions[n] && this.roomSubscriptions[n].cancel(), this.hooks.rooms[n] = o;\n        var a = new ft({\n          serverInstance: s || this.serverInstanceV2,\n          connectionTimeout: this.connectionTimeout,\n          cursorStore: this.cursorStore,\n          cursorsInstance: this.cursorsInstance,\n          hooks: this.hooks,\n          logger: this.logger,\n          messageLimit: i,\n          roomId: n,\n          roomStore: this.roomStore,\n          typingIndicators: this.typingIndicators,\n          userId: this.id,\n          userStore: this.userStore\n        });\n        return this.roomSubscriptions[n] = a, this.joinRoom({\n          roomId: n\n        }).then(function (e) {\n          return a.connect().then(function () {\n            return e;\n          });\n        }).catch(function (t) {\n          throw e.logger.warn(\"error subscribing to room \" + n + \":\", t), t;\n        });\n      }\n    }, {\n      key: \"subscribeToRoomMultipart\",\n      value: function () {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n        return this.subscribeToRoom(Ne({}, e, {\n          serverInstance: this.serverInstanceV6\n        }));\n      }\n    }, {\n      key: \"updateRoom\",\n      value: function () {\n        var e = this,\n            t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            n = t.roomId,\n            r = t.name,\n            o = t.pushNotificationTitleOverride,\n            i = t.customData,\n            s = Ue(t, [\"roomId\", \"name\", \"pushNotificationTitleOverride\", \"customData\"]);\n        return De(\"roomId\", \"string\", n), r && De(\"name\", \"string\", r), o && De(\"pushNotificationTitleOverride\", \"string\", o), s.private && De(\"private\", \"boolean\", s.private), i && De(\"customData\", \"object\", i), this.serverInstanceV6.request({\n          method: \"PUT\",\n          path: \"/rooms/\" + encodeURIComponent(n),\n          json: {\n            name: r,\n            push_notification_title_override: o,\n            private: s.private,\n            custom_data: i\n          }\n        }).then(function () {}).catch(function (t) {\n          throw e.logger.warn(\"error updating room:\", t), t;\n        });\n      }\n    }, {\n      key: \"deleteRoom\",\n      value: function () {\n        var e = this,\n            t = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}).roomId;\n        return De(\"roomId\", \"string\", t), this.serverInstanceV2.request({\n          method: \"DELETE\",\n          path: \"/rooms/\" + encodeURIComponent(t)\n        }).then(function () {}).catch(function (t) {\n          throw e.logger.warn(\"error deleting room:\", t), t;\n        });\n      }\n    }, {\n      key: \"setReadCursorRequest\",\n      value: function (e) {\n        var t = this,\n            n = e.roomId,\n            r = e.position,\n            o = e.callbacks;\n        return this.cursorsInstance.request({\n          method: \"PUT\",\n          path: \"/cursors/0/rooms/\" + encodeURIComponent(n) + \"/users/\" + this.encodedId,\n          json: {\n            position: r\n          }\n        }).then(function () {\n          return L(function (e) {\n            return e.resolve();\n          }, o);\n        }).catch(function (e) {\n          t.logger.warn(\"error setting cursor:\", e), L(function (t) {\n            return t.reject(e);\n          }, o);\n        });\n      }\n    }, {\n      key: \"uploadDataAttachment\",\n      value: function (e, t) {\n        var n = t.file,\n            r = t.name,\n            o = new FormData();\n        return o.append(\"file\", n, r), this.filesInstance.request({\n          method: \"POST\",\n          path: \"/rooms/\" + encodeURIComponent(e) + \"/users/\" + this.encodedId + \"/files/\" + encodeURIComponent(r),\n          body: o\n        }).then(JSON.parse);\n      }\n    }, {\n      key: \"_uploadAttachment\",\n      value: function (e) {\n        var t = e.roomId,\n            n = e.part,\n            r = n.type,\n            o = n.name,\n            i = n.customData,\n            a = n.file;\n        return this.serverInstanceV6.request({\n          method: \"POST\",\n          path: \"/rooms/\" + encodeURIComponent(t) + \"/attachments\",\n          json: {\n            content_type: r,\n            content_length: a.size,\n            name: o || a.name,\n            custom_data: i\n          }\n        }).then(function (e) {\n          var t = JSON.parse(e),\n              n = t.attachment_id,\n              o = t.upload_url;\n          return s({\n            method: \"PUT\",\n            url: o,\n            body: a,\n            headers: {\n              \"content-type\": r\n            }\n          }).then(function () {\n            return {\n              type: r,\n              attachment: {\n                id: n\n              }\n            };\n          });\n        });\n      }\n    }, {\n      key: \"isMemberOf\",\n      value: function (e) {\n        return le(e, L(B(\"id\"), this.rooms));\n      }\n    }, {\n      key: \"isSubscribedTo\",\n      value: function (e) {\n        return ge(e, this.roomSubscriptions);\n      }\n    }, {\n      key: \"decorateMessage\",\n      value: function (e) {\n        return new ht(e, this.userStore, this.roomStore, this.serverInstanceV6);\n      }\n    }, {\n      key: \"setPropertiesFromBasicUser\",\n      value: function (e) {\n        this.avatarURL = e.avatarURL, this.createdAt = e.createdAt, this.customData = e.customData, this.name = e.name, this.updatedAt = e.updatedAt;\n      }\n    }, {\n      key: \"establishUserSubscription\",\n      value: function () {\n        var e = this;\n        return this.userSubscription = new it({\n          hooks: this.hooks,\n          userId: this.id,\n          instance: this.serverInstanceV6,\n          roomStore: this.roomStore,\n          cursorStore: this.cursorStore,\n          typingIndicators: this.typingIndicators,\n          logger: this.logger,\n          connectionTimeout: this.connectionTimeout,\n          currentUser: this\n        }), this.userSubscription.connect().then(function (t) {\n          var n = t.basicUser,\n              r = t.basicRooms,\n              o = t.basicCursors;\n          return e.setPropertiesFromBasicUser(n), Promise.all([].concat(Me(r.map(function (t) {\n            return e.roomStore.set(t);\n          })), Me(o.map(function (t) {\n            return e.cursorStore.set(t);\n          }))));\n        }).catch(function (t) {\n          throw e.logger.error(\"error establishing user subscription:\", t), t;\n        });\n      }\n    }, {\n      key: \"establishPresenceSubscription\",\n      value: function () {\n        var e = this;\n        return this.presenceSubscription = new st({\n          userId: this.id,\n          instance: this.presenceInstance,\n          logger: this.logger,\n          connectionTimeout: this.connectionTimeout\n        }), Promise.all([this.userStore.fetchMissingUser(this.id), this.subscribeToUserPresence(this.id), this.presenceSubscription.connect().catch(function (t) {\n          throw e.logger.warn(\"error establishing presence subscription:\", t), t;\n        })]);\n      }\n    }, {\n      key: \"subscribeToUserPresence\",\n      value: function (e) {\n        if (this.userPresenceSubscriptions[e]) return Promise.resolve();\n        var t = new at({\n          hooks: this.hooks,\n          userId: e,\n          instance: this.presenceInstance,\n          userStore: this.userStore,\n          roomStore: this.roomStore,\n          presenceStore: this.presenceStore,\n          logger: this.logger,\n          connectionTimeout: this.connectionTimeout\n        });\n        return this.userPresenceSubscriptions[e] = t, t.connect();\n      }\n    }, {\n      key: \"enablePushNotifications\",\n      value: function () {\n        var e = this,\n            t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            n = t.onClick,\n            r = t.serviceWorkerRegistration,\n            o = t.showNotificationsTabOpen,\n            i = void 0 === o || o,\n            s = t.showNotificationsTabClosed,\n            a = void 0 === s || s,\n            u = t._Notification,\n            c = void 0 === u ? Notification : u,\n            h = t._visibilityStateOverride;\n\n        try {\n          if (n && De(\"onClick\", \"function\", n), De(\"showNotificationsTabOpen\", \"boolean\", i), De(\"showNotificationsTabClosed\", \"boolean\", a), !this._hasPermissionToSendNotifications()) return Promise.reject(\"Failed to get permission to send notifications\");\n          var d = [];\n          return i && d.push(this._enableTabOpenNotifications({\n            onClick: n,\n            Notification: c,\n            visibilityStateOverride: h\n          })), a ? d.push(this._enableTabClosedNotifications(r)) : d.push(this._disableTabClosedNotifications()), Promise.all(d).catch(function (t) {\n            return e.logger.warn(\"Chatkit error when enabling push notifications:\", t), Promise.reject(\"Chatkit error when enabling push notifications: \" + t);\n          });\n        } catch (e) {\n          return this.logger.warn(\"Chatkit error when enabling push notifications:\", e), Promise.reject(\"Chatkit error when enabling push notifications: \" + e);\n        }\n      }\n    }, {\n      key: \"disablePushNotifications\",\n      value: function () {\n        var e = this;\n        return this._disableTabClosedNotifications().then(function () {\n          return e._disableTabOpenNotifications();\n        });\n      }\n    }, {\n      key: \"_hasPermissionToSendNotifications\",\n      value: function () {\n        return Notification.requestPermission().then(function (e) {\n          return \"granted\" === e;\n        });\n      }\n    }, {\n      key: \"_enableTabOpenNotifications\",\n      value: function (e) {\n        var t = e.onClick,\n            n = e.Notification,\n            r = e.visibilityStateOverride,\n            o = new pt({\n          onNotificationHook: function (e) {\n            return function (e) {\n              var t = e.notification,\n                  n = e.data,\n                  r = e.onClick,\n                  o = e.Notification;\n              \"hidden\" === (e.visibilityStateOverride || document.visibilityState) && (new o(t.title || \"\", {\n                body: t.body || \"\",\n                icon: t.icon,\n                data: Object.assign(n, {\n                  pusher: {\n                    deep_link: t.deep_link\n                  }\n                })\n              }).onclick = function (e) {\n                e.preventDefault(), window.focus(), r && r(e.target.data.chatkit), e.target.close();\n              });\n            }({\n              notification: e.notification,\n              data: e.data,\n              onClick: t,\n              Notification: n,\n              visibilityStateOverride: r\n            });\n          },\n          userId: this.id,\n          instance: this.pushNotificationsInstance,\n          logger: this.logger,\n          connectionTimeout: this.connectionTimeout\n        });\n        return this.notificationSubscription = o, o.connect();\n      }\n    }, {\n      key: \"_disableTabOpenNotifications\",\n      value: function () {\n        this.notificationSubscription.cancel();\n      }\n    }, {\n      key: \"_enableTabClosedNotifications\",\n      value: function (e) {\n        var t = this,\n            n = function (e) {\n          return t.beamsTokenProviderInstance.request({\n            method: \"GET\",\n            path: \"/beams-tokens?user_id=\" + encodeURIComponent(e)\n          }).then(JSON.parse).catch(function (e) {\n            return Promise.reject(\"Internal error: \" + e.statusCode + \" status code, info: \" + e.info.error_description);\n          });\n        };\n\n        return this.beamsInstanceInitFn({\n          serviceWorkerRegistration: e\n        }).then(function (e) {\n          return e.start();\n        }).then(function (e) {\n          return e.setUserId(t.id, {\n            fetchToken: n\n          });\n        });\n      }\n    }, {\n      key: \"_disableTabClosedNotifications\",\n      value: function () {\n        return this.beamsInstanceInitFn().then(function (e) {\n          return e.stop();\n        });\n      }\n    }, {\n      key: \"disconnect\",\n      value: function () {\n        this.userSubscription.cancel(), this.presenceSubscription.cancel(), this.notificationSubscription && this.notificationSubscription.cancel(), pe(function (e) {\n          return e.cancel();\n        }, this.roomSubscriptions), pe(function (e) {\n          return e.cancel();\n        }, this.userPresenceSubscriptions);\n      }\n    }, {\n      key: \"rooms\",\n      get: function () {\n        return F(this.roomStore.snapshot());\n      }\n    }, {\n      key: \"users\",\n      get: function () {\n        return F(this.userStore.snapshot());\n      }\n    }]), e;\n  }(),\n      mt = function (e) {\n    var t = e.file,\n        n = e.name;\n    return void 0 !== t && void 0 !== n && (De(\"attachment.file\", \"object\", t), De(\"attachment.name\", \"string\", n), !0);\n  },\n      vt = function (e) {\n    var t = e.link,\n        n = e.type;\n    return void 0 !== t && void 0 !== n && (De(\"attachment.link\", \"string\", t), De(\"attachment.type\", \"string\", n), !0);\n  },\n      bt = \"1.13.3\";\n\n  function yt(e, t, n) {\n    return t in e ? Object.defineProperty(e, t, {\n      value: n,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }) : e[t] = n, e;\n  }\n\n  function St({\n    method: e,\n    path: t,\n    body: n = null,\n    headers: r = {}\n  }) {\n    const o = {\n      method: e,\n      headers: r\n    };\n    return null !== n && (o.body = JSON.stringify(n), o.headers = function (e) {\n      for (var t = 1; t < arguments.length; t++) {\n        var n = null != arguments[t] ? arguments[t] : {},\n            r = Object.keys(n);\n        \"function\" == typeof Object.getOwnPropertySymbols && (r = r.concat(Object.getOwnPropertySymbols(n).filter(function (e) {\n          return Object.getOwnPropertyDescriptor(n, e).enumerable;\n        }))), r.forEach(function (t) {\n          yt(e, t, n[t]);\n        });\n      }\n\n      return e;\n    }({\n      \"Content-Type\": \"application/json\"\n    }, r)), fetch(t, o).then(async e => {\n      e.ok || (await async function (e) {\n        let t;\n\n        try {\n          const _ref = await e.json(),\n                _ref$error = _ref.error,\n                n = _ref$error === void 0 ? \"Unknown error\" : _ref$error,\n                _ref$description = _ref.description,\n                r = _ref$description === void 0 ? \"No description\" : _ref$description;\n\n          t = `Unexpected status code ${e.status}: ${n}, ${r}`;\n        } catch (n) {\n          t = `Unexpected status code ${e.status}: Cannot parse error response`;\n        }\n\n        throw new Error(t);\n      }(e));\n\n      try {\n        return await e.json();\n      } catch (e) {\n        return null;\n      }\n    });\n  }\n\n  class wt {\n    constructor(e) {\n      this._instanceId = e, this._dbConn = null;\n    }\n\n    get _dbName() {\n      return `beams-${this._instanceId}`;\n    }\n\n    get isConnected() {\n      return null !== this._dbConn;\n    }\n\n    connect() {\n      return new Promise((e, t) => {\n        const n = indexedDB.open(this._dbName);\n        n.onsuccess = t => {\n          const n = t.target.result;\n          this._dbConn = n, this._readState().then(e => null === e ? this.clear() : Promise.resolve()).then(e);\n        }, n.onupgradeneeded = e => {\n          e.target.result.createObjectStore(\"beams\", {\n            keyPath: \"instance_id\"\n          });\n        }, n.onerror = e => {\n          const n = new Error(`Database error: ${e.target.error}`);\n          t(n);\n        };\n      });\n    }\n\n    clear() {\n      return this._writeState({\n        instance_id: this._instanceId,\n        device_id: null,\n        token: null,\n        user_id: null\n      });\n    }\n\n    _readState() {\n      if (!this.isConnected) throw new Error(\"Cannot read value: DeviceStateStore not connected to IndexedDB\");\n      return new Promise((e, t) => {\n        const n = this._dbConn.transaction(\"beams\").objectStore(\"beams\").get(this._instanceId);\n\n        n.onsuccess = t => {\n          const n = t.target.result;\n          n || e(null), e(n);\n        }, n.onerror = e => {\n          t(e.target.error);\n        };\n      });\n    }\n\n    async _readProperty(e) {\n      const t = await this._readState();\n      return null === t ? null : t[e] || null;\n    }\n\n    _writeState(e) {\n      if (!this.isConnected) throw new Error(\"Cannot write value: DeviceStateStore not connected to IndexedDB\");\n      return new Promise((t, n) => {\n        const r = this._dbConn.transaction(\"beams\", \"readwrite\").objectStore(\"beams\").put(e);\n\n        r.onsuccess = e => {\n          t();\n        }, r.onerror = e => {\n          n(e.target.error);\n        };\n      });\n    }\n\n    async _writeProperty(e, t) {\n      const n = await this._readState();\n      n[e] = t, await this._writeState(n);\n    }\n\n    getToken() {\n      return this._readProperty(\"token\");\n    }\n\n    setToken(e) {\n      return this._writeProperty(\"token\", e);\n    }\n\n    getDeviceId() {\n      return this._readProperty(\"device_id\");\n    }\n\n    setDeviceId(e) {\n      return this._writeProperty(\"device_id\", e);\n    }\n\n    getUserId() {\n      return this._readProperty(\"user_id\");\n    }\n\n    setUserId(e) {\n      return this._writeProperty(\"user_id\", e);\n    }\n\n    getLastSeenSdkVersion() {\n      return this._readProperty(\"last_seen_sdk_version\");\n    }\n\n    setLastSeenSdkVersion(e) {\n      return this._writeProperty(\"last_seen_sdk_version\", e);\n    }\n\n    getLastSeenUserAgent() {\n      return this._readProperty(\"last_seen_user_agent\");\n    }\n\n    setLastSeenUserAgent(e) {\n      return this._writeProperty(\"last_seen_user_agent\", e);\n    }\n\n  }\n\n  var It = \"0.9.1\";\n  const kt = `/service-worker.js?pusherBeamsWebSDKVersion=${It}`;\n\n  class Et {\n    constructor({\n      instanceId: e,\n      deviceId: t,\n      token: n,\n      userId: r,\n      serviceWorkerRegistration: o,\n      deviceStateStore: i,\n      endpointOverride: s = null\n    }) {\n      if (this.instanceId = e, this.deviceId = t, this.token = n, this.userId = r, this._deviceStateStore = i, this._endpoint = s, o) {\n        const e = o.scope;\n        if (!window.location.href.startsWith(e)) throw new Error(`Could not initialize Pusher web push: current page not in serviceWorkerRegistration scope (${e})`);\n      }\n\n      this._serviceWorkerRegistration = o;\n    }\n\n    get _baseURL() {\n      return null !== this._endpoint ? this._endpoint : `https://${this.instanceId}.pushnotifications.pusher.com`;\n    }\n\n    async start() {\n      if (!Rt()) return console.warn(\"Pusher Web Push Notifications only supports Google Chrome (whilst in Beta)\"), this;\n      if (null !== this.deviceId) return this;\n\n      const _ref2 = await this._getPublicKey(),\n            e = _ref2.vapidPublicKey,\n            t = await this._getPushToken(e),\n            n = await this._registerDevice(t);\n\n      return await this._deviceStateStore.setToken(t), await this._deviceStateStore.setDeviceId(n), await this._deviceStateStore.setLastSeenSdkVersion(It), await this._deviceStateStore.setLastSeenUserAgent(window.navigator.userAgent), this.token = t, this.deviceId = n, this;\n    }\n\n    async setUserId(e, t) {\n      if (!Rt()) return void console.warn(\"Pusher Web Push Notifications only supports Google Chrome (whilst in Beta)\");\n\n      if (null === this.deviceId) {\n        const e = new Error(\".start must be called before .setUserId\");\n        return Promise.reject(e);\n      }\n\n      if (\"string\" != typeof e) throw new Error(`User ID must be a string (was ${e})`);\n      if (\"\" === e) throw new Error(\"User ID cannot be the empty string\");\n      if (null !== this.userId && this.userId !== e) throw new Error(\"Changing the `userId` is not allowed.\");\n\n      const n = `${this._baseURL}/device_api/v1/instances/${encodeURIComponent(this.instanceId)}/devices/web/${this.deviceId}/user`,\n            _ref3 = await t.fetchToken(e),\n            r = _ref3.token,\n            o = {\n        method: \"PUT\",\n        path: n,\n        headers: {\n          Authorization: `Bearer ${r}`\n        }\n      };\n\n      return await St(o), this.userId = e, this._deviceStateStore.setUserId(e);\n    }\n\n    async stop() {\n      Rt() ? null !== this.deviceId && (await this._deleteDevice(), await this._deviceStateStore.clear(), this.deviceId = null, this.token = null, this.userId = null) : console.warn(\"Pusher Web Push Notifications only supports Google Chrome (whilst in Beta)\");\n    }\n\n    async clearAllState() {\n      Rt() ? (await this.stop(), await this.start()) : console.warn(\"Pusher Web Push Notifications only supports Google Chrome (whilst in Beta)\");\n    }\n\n    async _getPublicKey() {\n      return St({\n        method: \"GET\",\n        path: `${this._baseURL}/device_api/v1/instances/${encodeURIComponent(this.instanceId)}/web-vapid-public-key`\n      });\n    }\n\n    async _getPushToken(e) {\n      try {\n        let t;\n        if (this._serviceWorkerRegistration) t = this._serviceWorkerRegistration;else {\n          const _ref4 = await fetch(kt),\n                e = _ref4.status;\n\n          if (200 !== e) throw new Error(\"Cannot start SDK, service worker missing: No file found at /service-worker.js\");\n          window.navigator.serviceWorker.register(kt, {\n            updateViaCache: \"none\"\n          }), t = await window.navigator.serviceWorker.ready;\n        }\n        const n = await t.pushManager.subscribe({\n          userVisibleOnly: !0,\n          applicationServerKey: function (e) {\n            const t = \"=\".repeat((4 - e.length % 4) % 4),\n                  n = (e + t).replace(/-/g, \"+\").replace(/_/g, \"/\"),\n                  r = window.atob(n);\n            return Uint8Array.from([...r].map(e => e.charCodeAt(0)));\n          }(e)\n        });\n        return btoa(JSON.stringify(n));\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    }\n\n    async _registerDevice(e) {\n      const t = {\n        method: \"POST\",\n        path: `${this._baseURL}/device_api/v1/instances/${encodeURIComponent(this.instanceId)}/devices/web`,\n        body: {\n          token: e,\n          metadata: {\n            sdkVersion: It\n          }\n        }\n      };\n      return (await St(t)).id;\n    }\n\n    async _deleteDevice() {\n      const e = {\n        method: \"DELETE\",\n        path: `${this._baseURL}/device_api/v1/instances/${encodeURIComponent(this.instanceId)}/devices/web/${encodeURIComponent(this.deviceId)}`\n      };\n      await St(e);\n    }\n\n    async _updateDeviceMetadata() {\n      const e = window.navigator.userAgent,\n            t = await this._deviceStateStore.getLastSeenUserAgent(),\n            n = await this._deviceStateStore.getLastSeenSdkVersion();\n      if (e === t && It === n) return;\n      const r = {\n        method: \"PUT\",\n        path: `${this._baseURL}/device_api/v1/instances/${encodeURIComponent(this.instanceId)}/devices/web/${this.deviceId}/metadata`,\n        body: {\n          sdkVersion: It\n        }\n      };\n      await St(r), await this._deviceStateStore.setLastSeenSdkVersion(It), await this._deviceStateStore.setLastSeenUserAgent(e);\n    }\n\n  }\n\n  function Rt() {\n    const e = window.navigator,\n          t = e.vendor,\n          n = null !== window.chrome && void 0 !== window.chrome,\n          r = e.userAgent.indexOf(\"OPR\") > -1,\n          o = e.userAgent.indexOf(\"Edge\") > -1;\n    return n && \"Google Inc.\" === t && !o && !r || r;\n  }\n\n  return {\n    TokenProvider: qe,\n    ChatManager: function () {\n      function e() {\n        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            n = t.instanceLocator,\n            s = t.tokenProvider,\n            a = t.userId,\n            u = Ue(t, [\"instanceLocator\", \"tokenProvider\", \"userId\"]);\n        Pe(this, e), De(\"instanceLocator\", \"string\", n), De(\"tokenProvider\", \"object\", s), De(\"tokenProvider.fetchToken\", \"function\", s.fetchToken), De(\"userId\", \"string\", a);\n        var c = Ee(\":\", n),\n            h = Ce(c, 3),\n            d = h[0],\n            l = h[1],\n            f = h[2];\n        if (!d || !l || !f) throw new TypeError(\"expected instanceLocator to be of the format x:y:z, but was \" + n);\n        var p = u.baseClient || new r({\n          host: l + \".\" + o,\n          logger: u.logger,\n          sdkProduct: \"chatkit\",\n          sdkLanguage: u.sdkLanguage,\n          sdkVersion: bt\n        });\n        \"function\" == typeof s.setUserId && s.setUserId(a);\n        var g = {\n          client: p,\n          locator: n,\n          logger: u.logger,\n          tokenProvider: s\n        };\n        this.serverInstanceV2 = new i(Ne({\n          serviceName: \"chatkit\",\n          serviceVersion: \"v2\"\n        }, g)), this.serverInstanceV6 = new i(Ne({\n          serviceName: \"chatkit\",\n          serviceVersion: \"v6\"\n        }, g)), this.filesInstance = new i(Ne({\n          serviceName: \"chatkit_files\",\n          serviceVersion: \"v1\"\n        }, g)), this.cursorsInstance = new i(Ne({\n          serviceName: \"chatkit_cursors\",\n          serviceVersion: \"v2\"\n        }, g)), this.presenceInstance = new i(Ne({\n          serviceName: \"chatkit_presence\",\n          serviceVersion: \"v2\"\n        }, g)), this.beamsTokenProviderInstance = new i(Ne({\n          serviceName: \"chatkit_beams_token_provider\",\n          serviceVersion: \"v1\"\n        }, g)), this.pushNotificationsInstance = new i(Ne({\n          serviceName: \"chatkit_push_notifications\",\n          serviceVersion: \"v1\"\n        }, g)), this.beamsInstanceInitFn = u.beamsInstanceInitFn || function (e) {\n          return async function (e) {\n            if (!e) throw new Error(\"Config object required\");\n            const t = e.instanceId,\n                  _e$endpointOverride = e.endpointOverride,\n                  n = _e$endpointOverride === void 0 ? null : _e$endpointOverride,\n                  _e$serviceWorkerRegis = e.serviceWorkerRegistration,\n                  r = _e$serviceWorkerRegis === void 0 ? null : _e$serviceWorkerRegis;\n            if (void 0 === t) throw new Error(\"Instance ID is required\");\n            if (\"string\" != typeof t) throw new Error(\"Instance ID must be a string\");\n            if (0 === t.length) throw new Error(\"Instance ID cannot be empty\");\n            if (!window.indexedDB) throw new Error(\"Pusher Beams does not support this browser version (IndexedDB not supported)\");\n            if (!(\"showNotification\" in ServiceWorkerRegistration.prototype)) throw new Error(\"Pusher Beams does not support this browser version (ServiceWorkerRegistration not supported)\");\n            if (!(\"PushManager\" in window)) throw new Error(\"Pusher Beams does not support this browser version (PushManager not supported)\");\n            const o = new wt(t);\n            await o.connect();\n            const i = await o.getDeviceId(),\n                  s = await o.getToken(),\n                  a = await o.getUserId(),\n                  u = new Et({\n              instanceId: t,\n              deviceId: i,\n              token: s,\n              userId: a,\n              serviceWorkerRegistration: r,\n              deviceStateStore: o,\n              endpointOverride: n\n            });\n            if (null !== i) try {\n              await u._updateDeviceMetadata();\n            } catch (e) {}\n            return u;\n          }(Ne({\n            instanceId: f\n          }, e));\n        }, this.logger = this.serverInstanceV6.logger, this.userId = a, this.connectionTimeout = u.connectionTimeout || Ke, this.connect = this.connect.bind(this), this.disconnect = this.disconnect.bind(this);\n      }\n\n      return Oe(e, [{\n        key: \"connect\",\n        value: function () {\n          var e = this,\n              t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n          xe(\"hooks\", \"function\", t);\n          var n = new gt({\n            hooks: t,\n            id: this.userId,\n            serverInstanceV2: this.serverInstanceV2,\n            serverInstanceV6: this.serverInstanceV6,\n            filesInstance: this.filesInstance,\n            cursorsInstance: this.cursorsInstance,\n            presenceInstance: this.presenceInstance,\n            beamsTokenProviderInstance: this.beamsTokenProviderInstance,\n            pushNotificationsInstance: this.pushNotificationsInstance,\n            beamsInstanceInitFn: this.beamsInstanceInitFn,\n            connectionTimeout: this.connectionTimeout\n          });\n          return Promise.all([n.establishUserSubscription(), n.establishPresenceSubscription()]).then(function () {\n            return e.currentUser = n, n;\n          });\n        }\n      }, {\n        key: \"disconnect\",\n        value: function () {\n          this.currentUser && this.currentUser.disconnect();\n        }\n      }, {\n        key: \"disablePushNotifications\",\n        value: function () {\n          return this.currentUser ? this.currentUser.disablePushNotifications().catch(function (e) {\n            return Promise.reject(\"Chatkit error when disabling push notifications: \" + e.message);\n          }) : Promise.reject(\"Cannot disable notifications until .connect is called\");\n        }\n      }]), e;\n    }()\n  };\n});","map":{"version":3,"sources":["/Users/meikaprince/Desktop/chatkitpractice/chatkitpractice/node_modules/@pusher/chatkit-client/dist/web/chatkit.js"],"names":["e","t","exports","module","define","amd","Chatkit","window","global","self","n","r","o","i","l","call","m","c","d","Object","defineProperty","configurable","enumerable","get","__esModule","default","prototype","hasOwnProperty","p","s","split","length","indexOf","substring","a","value","responseToHeadersObject","statusCode","headers","info","fromXHR","responseText","JSON","parse","status","getAllResponseHeaders","ErrorResponse","error","NetworkError","ProtocolError","UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE","XhrReadyState","VERBOSE","DEBUG","INFO","WARNING","ERROR","LogLevel","threshold","Array","console","group","push","log","groupEnd","pop","verbose","arguments","debug","warn","forEach","errorAwareLog","error_uri","error_description","ConsoleLogger","EmptyLogger","createRetryStrategyOptionsOrDefault","initialTimeoutMillis","maxTimeoutMillis","limit","increaseTimeout","waitTimeMillis","Retry","DoNotRetry","options","logger","retryUnsafeRequests","currentRetryCount","increaseTimeoutFunction","currentBackoffMillis","attemptRetry","constructor","name","calculateMillisToRetry","parseInt","toUpperCase","RetryResolution","__assign","assign","u","h","f","host","replace","websocketTransport","httpTransport","encrypted","sdkProduct","sdkVersion","sdkLanguage","sdkPlatform","navigator","product","request","tokenProvider","fetchToken","then","Authorization","makeRequest","subscribeResuming","replaceMissingListenersWithNoOps","subscribeStrategyListenersFromSubscriptionListeners","createResumingStrategy","createTokenProvidingStrategy","createTransportStrategy","onEnd","onError","onEvent","onOpen","onSubscribe","onRetrying","infoHeaders","subscribeNonResuming","createRetryingStrategy","executeNetworkRequest","catch","BaseClient","onreadystatechange","readyState","response","Promise","json","send","stringify","body","sendRawRequest","XMLHttpRequest","withCredentials","Boolean","open","method","url","setRequestHeader","unsubscribe","state","onTransition","nextSubscribeStrategy","listeners","retryResolution","initialEventId","underlyingSubscription","eventId","timeout","setTimeout","g","clearTimeout","Error","subscribe","isTokenExpiredError","clearToken","putTokenIntoHeader","HOST_BASE","Instance","UNOPENED","OPENING","OPEN","ENDING","ENDED","HttpTransportState","gotEOS","lastNewlineIndex","xhr","assertStateIsIn","onLoading","onDone","abort","onChunk","lastIndexOf","slice","onMessage","some","map","join","verifyMessage","onEventMessage","onEOSMessage","isArray","baseURL","createXHR","path","setJSONHeaderIfAppropriate","jwt","Connecting","Open","Closing","Closed","WSReadyState","subscriptions","add","has","isEmpty","keys","remove","getAll","getAllAsArray","subID","removeAll","wsTransport","webSocketPath","forcedClose","closedError","lastSentPingID","lastSubscriptionID","pendingSubscriptions","connect","tryReconnectIfNeeded","socket","sendMessage","getMessage","WebSocket","onopen","subscribePending","pingInterval","setInterval","pongTimeout","Date","getTime","lastMessageReceivedTimestamp","close","onmessage","receiveMessage","onerror","onclose","concat","bind","subscription","data","validateMessage","shift","onPongMessage","onPingMessage","onCloseMessage","onOpenMessage","locator","serviceName","serviceVersion","platformVersion","cluster","id","client","absPath","retryStrategyOptions","apply","toString","v","init","xf","result","b","y","S","w","nodeType","I","k","E","R","next","done","T","_","Symbol","iterator","P","reduce","TypeError","O","N","U","C","M","propertyIsEnumerable","A","D","j","x","L","q","B","H","V","F","J","G","W","$","z","X","K","reverse","Y","Z","Q","ee","te","ne","equals","String","match","valueOf","message","source","ignoreCase","multiline","sticky","unicode","size","entries","values","re","oe","ie","se","ae","toISOString","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","toFixed","ue","ce","he","de","sort","test","isNaN","NaN","le","fe","pe","ge","me","ve","be","_nativeSet","Set","_items","ye","null","Se","we","Ie","ke","Ee","Re","Te","_e","trim","Pe","Oe","writable","key","Ne","Ue","Ce","return","Me","from","Ae","encodeURIComponent","De","je","xe","Le","Math","floor","now","qe","queryParams","fetchFreshToken","cacheIsStale","cache","clearCache","setUserId","req","token","expiresIn","resolve","cachedToken","user_id","userId","grant_type","access_token","expires_in","cacheExpiresAt","Be","createdAt","created_at","createdByUserId","created_by_id","isPrivate","private","updatedAt","updated_at","customData","custom_data","deletedAt","deleted_at","unreadCount","unread_count","lastMessageAt","last_message_at","He","avatarURL","avatar_url","Ve","roomId","room_id","senderId","parts","Ge","text","attachment","Je","Fe","position","type","cursor_type","link","resource_link","content","partType","payload","_id","_downloadURL","download_url","_expiration","expiration","We","presenceStore","$e","pending","inProgress","clear","callbacks","delete","reject","ze","Xe","Ke","Ye","instance","onSetHooks","users","set","fetchMissingUser","_fetchMissingUserBatch","fetchMissingUsers","fetchMissingUserReq","snapshot","getSync","decorate","all","filter","Ze","basicRoom","userStore","isSubscribedTo","userIds","eq","Qe","rooms","setSync","popSync","addUserToRoom","removeUserFromRoom","updateSync","update","fetchBasicRoom","et","roomStore","tt","cursors","fetchBasicCursor","nt","rt","hooks","lastSentRequests","timers","sendThrottledRequest","onIsTyping","onStarted","onStopped","typingRequestSent","onUserStartedTyping","onUserStoppedTyping","ot","basicCursors","cursorStore","onNewCursorHook","it","roomSubscriptions","connectionTimeout","currentUser","cancel","onInitialState","onAddedToRoom","onRemovedFromRoom","onRoomUpdated","onRoomDeleted","onSubscriptionEstablished","sub","event_name","onNewCursor","current_user","established","basicUser","basicRooms","setPropertiesFromBasicUser","onNewReadCursor","room","st","at","onPresenceState","includes","onPresenceChanged","current","previous","ut","ct","_roomId","_instance","urlExpiry","_fetchNewDownloadURL","ht","dt","messageLimit","typingIndicators","messageBuffer","onMessageHook","onMessageDeletedHook","onMessageDeleted","flushBuffer","message_limit","ready","message_id","lt","onUserJoinedRoomHook","onUserLeftRoomHook","onUserJoined","onUserLeft","user_ids","ft","buffer","messageSub","serverInstance","bufferWhileConnecting","cursorSub","cursorsInstance","membershipSub","onUserJoinedRoom","onUserLeftRoom","cancelled","connected","pt","onNotificationHook","onNotification","gt","serverInstanceV2","serverInstanceV6","filesInstance","presenceInstance","beamsTokenProviderInstance","pushNotificationsInstance","beamsInstanceInitFn","encodedId","subscribeToUserPresence","readCursorBuffer","userPresenceSubscriptions","setReadCursor","readCursor","isTypingIn","createRoom","getJoinableRooms","joinRoom","leaveRoom","sendSimpleMessage","sendMultipartMessage","fetchMessages","fetchMultipartMessages","subscribeToRoom","subscribeToRoomMultipart","updateRoom","deleteRoom","setReadCursorRequest","uploadDataAttachment","isMemberOf","decorateMessage","establishUserSubscription","establishPresenceSubscription","disconnect","_uploadAttachment","pushNotificationTitleOverride","addUserIds","push_notification_title_override","mt","vt","file","part","initialId","direction","initial_id","FormData","append","content_type","content_length","attachment_id","upload_url","userSubscription","presenceSubscription","onClick","serviceWorkerRegistration","showNotificationsTabOpen","showNotificationsTabClosed","_Notification","Notification","_visibilityStateOverride","_hasPermissionToSendNotifications","_enableTabOpenNotifications","visibilityStateOverride","_enableTabClosedNotifications","_disableTabClosedNotifications","_disableTabOpenNotifications","requestPermission","notification","document","visibilityState","title","icon","pusher","deep_link","onclick","preventDefault","focus","target","chatkit","notificationSubscription","start","stop","bt","yt","St","getOwnPropertySymbols","getOwnPropertyDescriptor","fetch","ok","description","wt","_instanceId","_dbConn","_dbName","isConnected","indexedDB","onsuccess","_readState","onupgradeneeded","createObjectStore","keyPath","_writeState","instance_id","device_id","transaction","objectStore","_readProperty","put","_writeProperty","getToken","setToken","getDeviceId","setDeviceId","getUserId","getLastSeenSdkVersion","setLastSeenSdkVersion","getLastSeenUserAgent","setLastSeenUserAgent","It","kt","Et","instanceId","deviceId","deviceStateStore","endpointOverride","_deviceStateStore","_endpoint","scope","location","href","startsWith","_serviceWorkerRegistration","_baseURL","Rt","_getPublicKey","vapidPublicKey","_getPushToken","_registerDevice","userAgent","_deleteDevice","clearAllState","serviceWorker","register","updateViaCache","pushManager","userVisibleOnly","applicationServerKey","repeat","atob","Uint8Array","charCodeAt","btoa","metadata","_updateDeviceMetadata","vendor","chrome","TokenProvider","ChatManager","instanceLocator","baseClient","ServiceWorkerRegistration","disablePushNotifications"],"mappings":"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","sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):e.Chatkit=t()}(this,function(){\"use strict\";\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self&&self;var e,t,n=(function(e,t){var n;\"undefined\"!=typeof self&&self,n=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=10)}([function(e,t,n){function r(e){var t={};if(!e)return t;for(var n=0,r=e.split(\"\\r\\n\");n<r.length;n++){var o=r[n],i=o.indexOf(\": \");if(i>0){var s=o.substring(0,i),a=o.substring(i+2);t[s]=a}}return t}Object.defineProperty(t,\"__esModule\",{value:!0}),t.responseToHeadersObject=r;var o=function(){function e(e,t,n){this.statusCode=e,this.headers=t,this.info=n}return e.fromXHR=function(t){var n=t.responseText;try{n=JSON.parse(t.responseText)}catch(e){}return new e(t.status,r(t.getAllResponseHeaders()),n)},e}();t.ErrorResponse=o;var i=function(){return function(e){this.error=e}}();t.NetworkError=i;var s=function(){return function(e){this.error=e}}();t.ProtocolError=s,function(e){e[e.UNSENT=0]=\"UNSENT\",e[e.OPENED=1]=\"OPENED\",e[e.HEADERS_RECEIVED=2]=\"HEADERS_RECEIVED\",e[e.LOADING=3]=\"LOADING\",e[e.DONE=4]=\"DONE\"}(t.XhrReadyState||(t.XhrReadyState={}))},function(e,t,n){var r;Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){e[e.VERBOSE=1]=\"VERBOSE\",e[e.DEBUG=2]=\"DEBUG\",e[e.INFO=3]=\"INFO\",e[e.WARNING=4]=\"WARNING\",e[e.ERROR=5]=\"ERROR\"}(r=t.LogLevel||(t.LogLevel={}));var o=function(){function e(e){void 0===e&&(e=2),this.threshold=e;var t=Array(),n=\"--------------------------------------------------------------------------------\";window.console.group||(window.console.group=function(e){t.push(e),window.console.log(\"%c \\nBEGIN GROUP: %c\",n,e)}),window.console.groupEnd||(window.console.groupEnd=function(){window.console.log(\"END GROUP: %c\\n%c\",t.pop(),n)})}return e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(window.console.log,r.VERBOSE,e)},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(window.console.log,r.DEBUG,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(window.console.info,r.INFO,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(window.console.warn,r.WARNING,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(window.console.error,r.ERROR,e)},e.prototype.log=function(e,t,n){var o=this;if(t>=this.threshold){var i=\"Logger.\"+r[t];n.length>1?(window.console.group(),n.forEach(function(t){o.errorAwareLog(e,t,i)}),window.console.groupEnd()):this.errorAwareLog(e,n[0],i)}},e.prototype.errorAwareLog=function(e,t,n){if(null!=t&&t.info&&t.info.error_uri){var r=t.info.error_description;e((r||\"An error has occurred\")+\". More information can be found at \"+t.info.error_uri+\". Error object: \",t)}else e(n+\": \",t)},e}();t.ConsoleLogger=o;var i=function(){function e(){}return e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e}();t.EmptyLogger=i},function(e,t,n){Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(0);t.createRetryStrategyOptionsOrDefault=function(e){var t=e.initialTimeoutMillis||1e3,n=e.maxTimeoutMillis||5e3,r=-1;return void 0!==e.limit&&null!=e.limit&&(r=e.limit),{increaseTimeout:void 0!==e.increaseTimeout?e.increaseTimeout:function(e){return 2*e>n?n:2*e},initialTimeoutMillis:t,limit:r,maxTimeoutMillis:n}};var o=function(){return function(e){this.waitTimeMillis=e}}();t.Retry=o;var i=function(){return function(e){this.error=e}}();t.DoNotRetry=i;var s=function(){function e(e,t,n){this.options=e,this.logger=t,this.retryUnsafeRequests=n,this.currentRetryCount=0,this.initialTimeoutMillis=e.initialTimeoutMillis,this.maxTimeoutMillis=e.maxTimeoutMillis,this.limit=e.limit,this.increaseTimeoutFunction=e.increaseTimeout,this.currentBackoffMillis=this.initialTimeoutMillis}return e.prototype.attemptRetry=function(e){if(this.logger.verbose(this.constructor.name+\": Error received\",e),this.currentRetryCount>=this.limit&&this.limit>=0)return this.logger.verbose(this.constructor.name+\": Retry count is over the maximum limit: \"+this.limit),new i(e);if(null==e)return new o(this.calculateMillisToRetry());if(e instanceof r.ErrorResponse&&e.headers[\"Retry-After\"])return this.logger.verbose(this.constructor.name+\": Retry-After header is present, retrying in \"+e.headers[\"Retry-After\"]),new o(1e3*parseInt(e.headers[\"Retry-After\"],10));if(this.retryUnsafeRequests)return new o(this.calculateMillisToRetry());switch(e.constructor){case r.ErrorResponse:var t=e.statusCode,n=e.headers[\"Request-Method\"];return t>=500&&t<600&&(\"GET\"===(s=(s=n).toUpperCase())||\"HEAD\"===s||\"OPTIONS\"===s||\"SUBSCRIBE\"===s)?(this.logger.verbose(this.constructor.name+\": Encountered an error with status code \"+t+\" and request method \"+n+\", will retry\"),new o(this.calculateMillisToRetry())):(this.logger.verbose(this.constructor.name+\": Encountered an error with status code \"+t+\" and request method \"+n+\", will not retry\",e),new i(e));case r.NetworkError:return this.logger.verbose(this.constructor.name+\": Encountered a network error, will retry\",e),new o(this.calculateMillisToRetry());case r.ProtocolError:return this.logger.verbose(this.constructor.name+\": Encountered a protocol error, will retry\",e),new o(this.calculateMillisToRetry());default:return this.logger.verbose(this.constructor.name+\": Encountered an error, will retry\",e),new o(this.calculateMillisToRetry())}var s},e.prototype.calculateMillisToRetry=function(){return this.currentBackoffMillis=this.increaseTimeoutFunction(this.currentBackoffMillis),this.logger.verbose(this.constructor.name+\": Retrying in \"+this.currentBackoffMillis+\"ms\"),this.currentBackoffMillis},e}();t.RetryResolution=s},function(e,t,n){var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(1),i=n(4),s=n(5),a=n(6),u=n(11),c=n(12),h=n(7),d=n(13),l=n(14),f=n(8),p=function(){function e(e){this.options=e,this.host=e.host.replace(/(\\/)+$/,\"\");var t=e.logger||new o.ConsoleLogger;this.logger=t,this.websocketTransport=new l.default(this.host,t),this.httpTransport=new d.default(this.host,e.encrypted),this.sdkProduct=e.sdkProduct||\"unknown\",this.sdkVersion=e.sdkVersion||\"unknown\",this.sdkLanguage=e.sdkLanguage||\"javascript\",this.sdkPlatform=navigator?\"ReactNative\"===navigator.product?\"react-native\":\"web\":\"node\"}return e.prototype.request=function(e,t){var n=this;return e.tokenProvider?e.tokenProvider.fetchToken(t).then(function(t){var n;return void 0!==e.headers?e.headers.Authorization=\"Bearer \"+t:e.headers=((n={}).Authorization=\"Bearer \"+t,n),e}).then(function(e){return n.makeRequest(e)}):this.makeRequest(e)},e.prototype.subscribeResuming=function(e,t,n,o,i,a){var d=c.replaceMissingListenersWithNoOps(n),l=u.subscribeStrategyListenersFromSubscriptionListeners(d),p=!1;return s.createResumingStrategy(o,h.createTokenProvidingStrategy(f.createTransportStrategy(e,this.websocketTransport,this.logger),this.logger,a),this.logger,i)({onEnd:l.onEnd,onError:l.onError,onEvent:l.onEvent,onOpen:function(e){p||(p=!0,l.onOpen(e)),d.onSubscribe()},onRetrying:l.onRetrying},r({},t,this.infoHeaders()))},e.prototype.subscribeNonResuming=function(e,t,n,o,i){var s=c.replaceMissingListenersWithNoOps(n),d=u.subscribeStrategyListenersFromSubscriptionListeners(s),l=!1;return a.createRetryingStrategy(o,h.createTokenProvidingStrategy(f.createTransportStrategy(e,this.websocketTransport,this.logger),this.logger,i),this.logger)({onEnd:d.onEnd,onError:d.onError,onEvent:d.onEvent,onOpen:function(e){l||(l=!0,d.onOpen(e)),s.onSubscribe()},onRetrying:d.onRetrying},r({},t,this.infoHeaders()))},e.prototype.infoHeaders=function(){return{\"X-SDK-Language\":this.sdkLanguage,\"X-SDK-Platform\":this.sdkPlatform,\"X-SDK-Product\":this.sdkProduct,\"X-SDK-Version\":this.sdkVersion}},e.prototype.makeRequest=function(e){var t=this;return i.executeNetworkRequest(function(){return t.httpTransport.request(r({},e,{headers:r({},e.headers,t.infoHeaders())}))},e).catch(function(e){throw t.logger.error(e),e})},e}();t.BaseClient=p},function(e,t,n){Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(0);function o(e,t,n){return e.onreadystatechange=function(){4===e.readyState&&(e.status>=200&&e.status<300?t(e.response):0!==e.status?n(r.ErrorResponse.fromXHR(e)):n(new r.NetworkError(\"No Connection\")))},e}t.executeNetworkRequest=function(e,t){return new Promise(function(n,r){!function(e,t){t.json?e.send(JSON.stringify(t.json)):e.send(t.body)}(o(e(),n,r),t)})},t.sendRawRequest=function(e){return new Promise(function(t,n){var r=o(new window.XMLHttpRequest,t,n);if(r.withCredentials=Boolean(e.withCredentials),r.open(e.method.toUpperCase(),e.url,!0),e.headers)for(var i in e.headers)e.headers.hasOwnProperty(i)&&r.setRequestHeader(i,e.headers[i]);r.send(e.body)})}},function(e,t,n){Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(0),o=n(2);t.createResumingStrategy=function(e,t,n,r){var s=o.createRetryStrategyOptionsOrDefault(e),a=new o.RetryResolution(s,n);return function(e,r){return new i(n,r,t,e,a)}};var i=function(){return function(e,t,n,r,o){var i=this;this.unsubscribe=function(){i.state.unsubscribe()},this.onTransition=function(e){i.state=e},this.state=new s(this.onTransition,e,t,n,r,o)}}(),s=function(){function e(e,t,n,r,o,i,s){var c=this;this.onTransition=e,this.logger=t,this.headers=n,this.nextSubscribeStrategy=r,this.listeners=o,this.retryResolution=i,this.initialEventId=s;var d=s;t.verbose(\"ResumingSubscription: transitioning to OpeningSubscriptionState\"),d&&(n[\"Last-Event-Id\"]=d,t.verbose(\"ResumingSubscription: initialEventId is \"+d)),this.underlyingSubscription=r({onEnd:function(n){e(new h(t,o,n))},onError:function(s){e(new u(s,e,t,n,o,r,i,d))},onEvent:function(e){d=e.eventId,o.onEvent(e)},onOpen:function(n){e(new a(t,n,o,c.underlyingSubscription,e))},onRetrying:o.onRetrying},n)}return e.prototype.unsubscribe=function(){this.onTransition(new c(this.logger)),null!=this.underlyingSubscription&&this.underlyingSubscription.unsubscribe()},e}(),a=function(){function e(e,t,n,r,o){this.logger=e,this.headers=t,this.listeners=n,this.underlyingSubscription=r,this.onTransition=o,e.verbose(\"ResumingSubscription: transitioning to OpenSubscriptionState\"),n.onOpen(t)}return e.prototype.unsubscribe=function(){this.onTransition(new c(this.logger)),this.underlyingSubscription.unsubscribe()},e}(),u=function(){function e(e,t,n,i,s,u,c,l){var f=this;this.onTransition=t,this.logger=n,this.headers=i,this.listeners=s,this.nextSubscribeStrategy=u,this.retryResolution=c,this.timeout=-1,n.verbose(\"ResumingSubscription: transitioning to ResumingSubscriptionState\");var p=function(e,i){s.onRetrying();var a,u=((a=e)instanceof r.ErrorResponse&&(a.headers[\"Request-Method\"]=\"SUBSCRIBE\"),c.attemptRetry(a));u instanceof o.Retry?f.timeout=window.setTimeout(function(){g(i)},u.waitTimeMillis):t(new d(n,s,e))},g=function(e){n.verbose(\"ResumingSubscription: trying to re-establish the subscription\"),e&&(n.verbose(\"ResumingSubscription: lastEventId: \"+e),i[\"Last-Event-Id\"]=e),f.underlyingSubscription=u({onEnd:function(e){t(new h(n,s,e))},onError:function(e){p(e,l)},onEvent:function(e){l=e.eventId,s.onEvent(e)},onOpen:function(e){t(new a(n,e,s,f.underlyingSubscription,t))},onRetrying:s.onRetrying},i)};p(e,l)}return e.prototype.unsubscribe=function(){this.onTransition(new c(this.logger)),window.clearTimeout(this.timeout),null!=this.underlyingSubscription&&this.underlyingSubscription.unsubscribe()},e}(),c=function(){function e(e,t){this.logger=e,e.verbose(\"ResumingSubscription: transitioning to EndingSubscriptionState\")}return e.prototype.unsubscribe=function(){throw new Error(\"Subscription is already ending\")},e}(),h=function(){function e(e,t,n){this.logger=e,this.listeners=t,e.verbose(\"ResumingSubscription: transitioning to EndedSubscriptionState\"),t.onEnd(n)}return e.prototype.unsubscribe=function(){throw new Error(\"Subscription has already ended\")},e}(),d=function(){function e(e,t,n){this.logger=e,this.listeners=t,e.verbose(\"ResumingSubscription: transitioning to FailedSubscriptionState\",n),t.onError(n)}return e.prototype.unsubscribe=function(){throw new Error(\"Subscription has already ended\")},e}()},function(e,t,n){Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(0),o=n(2);t.createRetryingStrategy=function(e,t,n){var r=o.createRetryStrategyOptionsOrDefault(e),s=new o.RetryResolution(r,n);return function(e,r){return new i(n,r,e,t,s)}};var i=function(){return function(e,t,n,r,o){var i=this;this.unsubscribe=function(){i.state.unsubscribe()},this.onTransition=function(e){i.state=e},this.state=new s(this.onTransition,e,t,n,r,o)}}(),s=function(){function e(e,t,n,r,o,i){var s=this;this.logger=t,this.headers=n,this.listeners=r,this.nextSubscribeStrategy=o,this.retryResolution=i,t.verbose(\"RetryingSubscription: transitioning to OpeningSubscriptionState\"),this.underlyingSubscription=o({onEnd:function(n){return e(new c(t,r,n))},onError:function(s){return e(new a(s,e,t,n,r,o,i))},onEvent:r.onEvent,onOpen:function(n){return e(new u(t,r,n,s.underlyingSubscription,e))},onRetrying:r.onRetrying},n)}return e.prototype.unsubscribe=function(){throw this.underlyingSubscription.unsubscribe(),new Error(\"Method not implemented.\")},e}(),a=function(){function e(e,t,n,i,s,a,d){var l=this;this.onTransition=t,this.logger=n,this.headers=i,this.listeners=s,this.nextSubscribeStrategy=a,this.retryResolution=d,this.timeout=-1,n.verbose(\"RetryingSubscription: transitioning to RetryingSubscriptionState\");var f=function(e){s.onRetrying();var i,a=((i=e)instanceof r.ErrorResponse&&(i.headers[\"Request-Method\"]=\"SUBSCRIBE\"),d.attemptRetry(i));a instanceof o.Retry?l.timeout=window.setTimeout(function(){p()},a.waitTimeMillis):t(new h(n,s,e))},p=function(){n.verbose(\"RetryingSubscription: trying to re-establish the subscription\");var e=a({onEnd:function(e){return t(new c(n,s,e))},onError:function(e){return f(e)},onEvent:s.onEvent,onOpen:function(r){t(new u(n,s,r,e,t))},onRetrying:s.onRetrying},i)};f(e)}return e.prototype.unsubscribe=function(){window.clearTimeout(this.timeout),this.onTransition(new c(this.logger,this.listeners))},e}(),u=function(){function e(e,t,n,r,o){this.logger=e,this.listeners=t,this.headers=n,this.underlyingSubscription=r,this.onTransition=o,e.verbose(\"RetryingSubscription: transitioning to OpenSubscriptionState\"),t.onOpen(n)}return e.prototype.unsubscribe=function(){this.underlyingSubscription.unsubscribe(),this.onTransition(new c(this.logger,this.listeners))},e}(),c=function(){function e(e,t,n){this.logger=e,this.listeners=t,e.verbose(\"RetryingSubscription: transitioning to EndedSubscriptionState\"),t.onEnd(n)}return e.prototype.unsubscribe=function(){throw new Error(\"Subscription has already ended\")},e}(),h=function(){function e(e,t,n){this.logger=e,this.listeners=t,e.verbose(\"RetryingSubscription: transitioning to FailedSubscriptionState\",n),t.onError(n)}return e.prototype.unsubscribe=function(){throw new Error(\"Subscription has already ended\")},e}()},function(e,t,n){Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(0);t.createTokenProvidingStrategy=function(e,t,n){return n?function(r,i){return new o(t,r,i,n,e)}:e};var o=function(){function e(e,t,n,r,o){var a=this;this.logger=e,this.listeners=t,this.headers=n,this.tokenProvider=r,this.nextSubscribeStrategy=o,this.unsubscribe=function(){a.state.unsubscribe(),a.state=new s(a.logger)},this.state=new i(e,n,o),this.subscribe()}return e.prototype.subscribe=function(){var e=this;this.tokenProvider.fetchToken().then(function(t){var n=Object.assign({},e.listeners);e.state.subscribe(t,{onEnd:function(t){e.state=new s(e.logger),n.onEnd(t)},onError:function(r){e.isTokenExpiredError(r)?(e.tokenProvider.clearToken(t),e.subscribe()):(e.state=new s(e.logger),n.onError(r))},onEvent:e.listeners.onEvent,onOpen:e.listeners.onOpen})}).catch(function(t){e.logger.debug(\"TokenProvidingSubscription: error when fetching token:\",t),e.state=new s(e.logger),e.listeners.onError(t)})},e.prototype.isTokenExpiredError=function(e){return e instanceof r.ErrorResponse&&401===e.statusCode&&\"authentication/expired\"===e.info},e}(),i=function(){function e(e,t,n){this.logger=e,this.headers=t,this.nextSubscribeStrategy=n,e.verbose(\"TokenProvidingSubscription: transitioning to ActiveState\")}return e.prototype.subscribe=function(e,t){var n=this;this.putTokenIntoHeader(e),this.underlyingSubscription=this.nextSubscribeStrategy({onEnd:function(e){n.logger.verbose(\"TokenProvidingSubscription: subscription ended\"),t.onEnd(e)},onError:function(e){n.logger.verbose(\"TokenProvidingSubscription: subscription errored:\",e),t.onError(e)},onEvent:t.onEvent,onOpen:function(e){n.logger.verbose(\"TokenProvidingSubscription: subscription opened\"),t.onOpen(e)},onRetrying:t.onRetrying},this.headers)},e.prototype.unsubscribe=function(){null!=this.underlyingSubscription&&this.underlyingSubscription.unsubscribe()},e.prototype.putTokenIntoHeader=function(e){this.headers.Authorization=\"Bearer \"+e,this.logger.verbose(\"TokenProvidingSubscription: token fetched: \"+e)},e}(),s=function(){function e(e){this.logger=e,e.verbose(\"TokenProvidingSubscription: transitioning to InactiveState\")}return e.prototype.subscribe=function(e,t){this.logger.verbose(\"TokenProvidingSubscription: subscribe called in Inactive state; doing nothing\")},e.prototype.unsubscribe=function(){this.logger.verbose(\"TokenProvidingSubscription: unsubscribe called in Inactive state; doing nothing\")},e}()},function(e,t,n){Object.defineProperty(t,\"__esModule\",{value:!0}),t.createTransportStrategy=function(e,t,n){return function(n,r){return t.subscribe(e,n,r)}}},function(e,t,n){Object.defineProperty(t,\"__esModule\",{value:!0}),t.HOST_BASE=\"pusherplatform.io\"},function(e,t,n){Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3);t.BaseClient=r.BaseClient;var o=n(9);t.HOST_BASE=o.HOST_BASE;var i=n(15);t.Instance=i.default;var s=n(1);t.ConsoleLogger=s.ConsoleLogger,t.EmptyLogger=s.EmptyLogger;var a=n(0);t.ErrorResponse=a.ErrorResponse,t.NetworkError=a.NetworkError,t.responseToHeadersObject=a.responseToHeadersObject,t.XhrReadyState=a.XhrReadyState;var u=n(4);t.executeNetworkRequest=u.executeNetworkRequest,t.sendRawRequest=u.sendRawRequest;var c=n(5);t.createResumingStrategy=c.createResumingStrategy;var h=n(2);t.createRetryStrategyOptionsOrDefault=h.createRetryStrategyOptionsOrDefault,t.DoNotRetry=h.DoNotRetry,t.Retry=h.Retry,t.RetryResolution=h.RetryResolution;var d=n(6);t.createRetryingStrategy=d.createRetryingStrategy;var l=n(7);t.createTokenProvidingStrategy=l.createTokenProvidingStrategy;var f=n(8);t.createTransportStrategy=f.createTransportStrategy,t.default={BaseClient:r.BaseClient,ConsoleLogger:s.ConsoleLogger,EmptyLogger:s.EmptyLogger,Instance:i.default}},function(e,t,n){Object.defineProperty(t,\"__esModule\",{value:!0}),t.subscribeStrategyListenersFromSubscriptionListeners=function(e){return{onEnd:e.onEnd,onError:e.onError,onEvent:e.onEvent,onOpen:e.onOpen,onRetrying:e.onRetrying}}},function(e,t,n){Object.defineProperty(t,\"__esModule\",{value:!0}),t.replaceMissingListenersWithNoOps=function(e){return{onEnd:e.onEnd||function(e){},onError:e.onError||function(e){},onEvent:e.onEvent||function(e){},onOpen:e.onOpen||function(e){},onRetrying:e.onRetrying||function(){},onSubscribe:e.onSubscribe||function(){}}}},function(e,t,n){Object.defineProperty(t,\"__esModule\",{value:!0});var r,o=n(0);!function(e){e[e.UNOPENED=0]=\"UNOPENED\",e[e.OPENING=1]=\"OPENING\",e[e.OPEN=2]=\"OPEN\",e[e.ENDING=3]=\"ENDING\",e[e.ENDED=4]=\"ENDED\"}(r=t.HttpTransportState||(t.HttpTransportState={}));var i=function(){function e(e,t){var n=this;return this.gotEOS=!1,this.lastNewlineIndex=0,this.state=r.UNOPENED,this.xhr=e,this.listeners=t,this.xhr.onreadystatechange=function(){switch(n.xhr.readyState){case o.XhrReadyState.UNSENT:case o.XhrReadyState.OPENED:case o.XhrReadyState.HEADERS_RECEIVED:n.assertStateIsIn(r.OPENING);break;case o.XhrReadyState.LOADING:n.onLoading();break;case o.XhrReadyState.DONE:n.onDone()}},this.state=r.OPENING,this.xhr.send(),this}return e.prototype.unsubscribe=function(){this.state=r.ENDED,this.xhr.abort(),this.listeners.onEnd&&this.listeners.onEnd(null)},e.prototype.onLoading=function(){if(this.assertStateIsIn(r.OPENING,r.OPEN,r.ENDING),200===this.xhr.status){this.state===r.OPENING&&(this.state=r.OPEN,this.listeners.onOpen&&this.listeners.onOpen(o.responseToHeadersObject(this.xhr.getAllResponseHeaders()))),this.assertStateIsIn(r.OPEN);var e=this.onChunk();this.assertStateIsIn(r.OPEN,r.ENDING),e&&(this.state=r.ENDED,e instanceof o.ErrorResponse&&204!==e.statusCode&&this.listeners.onError&&this.listeners.onError(e))}},e.prototype.onDone=function(){if(200===this.xhr.status){this.state===r.OPENING&&(this.state=r.OPEN,this.listeners.onOpen&&this.listeners.onOpen(o.responseToHeadersObject(this.xhr.getAllResponseHeaders()))),this.assertStateIsIn(r.OPEN,r.ENDING);var e=this.onChunk();e?(this.state=r.ENDED,204===e.statusCode?this.listeners.onEnd&&this.listeners.onEnd(null):this.listeners.onError&&this.listeners.onError(e)):this.state<=r.ENDING?this.listeners.onError&&this.listeners.onError(new Error(\"HTTP response ended without receiving EOS message\")):this.listeners.onEnd&&this.listeners.onEnd(null)}else{if(this.assertStateIsIn(r.OPENING,r.OPEN,r.ENDED),this.state===r.ENDED)return;0===this.xhr.status?this.listeners.onError&&this.listeners.onError(new o.NetworkError(\"Connection lost.\")):this.listeners.onError&&this.listeners.onError(o.ErrorResponse.fromXHR(this.xhr))}},e.prototype.onChunk=function(){this.assertStateIsIn(r.OPEN);var e=this.xhr.responseText,t=e.lastIndexOf(\"\\n\");if(t>this.lastNewlineIndex){var n=e.slice(this.lastNewlineIndex,t).split(\"\\n\");this.lastNewlineIndex=t;for(var o=0,i=n;o<i.length;o++){var s=i[o];if(0!==s.length){var a=JSON.parse(s),u=this.onMessage(a);if(null!=u)return u}}}},e.prototype.assertStateIsIn=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!t.some(function(t){return t===e.state})){var o=t.map(function(e){return r[e]}).join(\", \"),i=r[this.state];window.console.warn(\"Expected this.state to be one of [\"+o+\"] but it is \"+i)}},e.prototype.onMessage=function(e){switch(this.assertStateIsIn(r.OPEN),this.verifyMessage(e),e[0]){case 0:return null;case 1:return this.onEventMessage(e);case 255:return this.onEOSMessage(e);default:return new Error(\"Unknown Message: \"+JSON.stringify(e))}},e.prototype.onEventMessage=function(e){if(this.assertStateIsIn(r.OPEN),4!==e.length)return new Error(\"Event message has \"+e.length+\" elements (expected 4)\");e[0];var t=e[1],n=e[2],o=e[3];return\"string\"!=typeof t?new Error(\"Invalid event ID in message: \"+JSON.stringify(e)):\"object\"!=typeof n||Array.isArray(n)?new Error(\"Invalid event headers in message: \"+JSON.stringify(e)):(this.listeners.onEvent&&this.listeners.onEvent({body:o,headers:n,eventId:t}),null)},e.prototype.onEOSMessage=function(e){if(this.assertStateIsIn(r.OPEN),4!==e.length)return new Error(\"EOS message has \"+e.length+\" elements (expected 4)\");e[0];var t=e[1],n=e[2],i=e[3];return\"number\"!=typeof t?new Error(\"Invalid EOS Status Code\"):\"object\"!=typeof n||Array.isArray(n)?new Error(\"Invalid EOS ElementsHeaders\"):(this.state=r.ENDING,new o.ErrorResponse(t,n,i))},e.prototype.verifyMessage=function(e){return this.gotEOS?new Error(\"Got another message after EOS message\"):Array.isArray(e)?e.length<1?new Error(\"Message is empty array\"):void 0:new Error(\"Message is not an array\")},e}(),s=function(){function e(e,t){void 0===t&&(t=!0),this.baseURL=(t?\"https\":\"http\")+\"://\"+e}return e.prototype.request=function(e){return this.createXHR(this.baseURL,e)},e.prototype.subscribe=function(e,t,n){var r={headers:n,method:\"SUBSCRIBE\",path:e};return new i(this.createXHR(this.baseURL,r),t)},e.prototype.createXHR=function(e,t){var n=new window.XMLHttpRequest,r=e+\"/\"+t.path.replace(/^\\/+/,\"\");if(n.open(t.method.toUpperCase(),r,!0),n=this.setJSONHeaderIfAppropriate(n,t),t.jwt&&n.setRequestHeader(\"authorization\",\"Bearer \"+t.jwt),t.headers)for(var o in t.headers)t.headers.hasOwnProperty(o)&&n.setRequestHeader(o,t.headers[o]);return n},e.prototype.setJSONHeaderIfAppropriate=function(e,t){return t.json&&e.setRequestHeader(\"content-type\",\"application/json\"),e},e}();t.default=s},function(e,t,n){var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,\"__esModule\",{value:!0});var o,i=n(0);!function(e){e[e.Connecting=0]=\"Connecting\",e[e.Open=1]=\"Open\",e[e.Closing=2]=\"Closing\",e[e.Closed=3]=\"Closed\"}(o=t.WSReadyState||(t.WSReadyState={}));var s=function(){function e(){this.subscriptions={}}return e.prototype.add=function(e,t,n,r){return this.subscriptions[e]={headers:r,listeners:n,path:t},e},e.prototype.has=function(e){return void 0!==this.subscriptions[e]},e.prototype.isEmpty=function(){return 0===Object.keys(this.subscriptions).length},e.prototype.remove=function(e){return delete this.subscriptions[e]},e.prototype.get=function(e){return this.subscriptions[e]},e.prototype.getAll=function(){return this.subscriptions},e.prototype.getAllAsArray=function(){var e=this;return Object.keys(this.subscriptions).map(function(t){return r({subID:parseInt(t,10)},e.subscriptions[parseInt(t,10)])})},e.prototype.removeAll=function(){this.subscriptions={}},e}(),a=function(){function e(e,t){this.wsTransport=e,this.subID=t}return e.prototype.unsubscribe=function(){this.wsTransport.unsubscribe(this.subID)},e}(),u=function(){function e(e,t){this.webSocketPath=\"/ws\",this.forcedClose=!1,this.closedError=null,this.lastSentPingID=null,this.baseURL=\"wss://\"+e+this.webSocketPath,this.lastSubscriptionID=0,this.logger=t,this.subscriptions=new s,this.pendingSubscriptions=new s,this.connect()}return e.prototype.subscribe=function(e,t,n){this.tryReconnectIfNeeded();var r=this.lastSubscriptionID++;return this.socket.readyState!==o.Open?(this.pendingSubscriptions.add(r,e,t,n),new a(this,r)):(this.subscriptions.add(r,e,t,n),this.sendMessage(this.getMessage(100,r,e,n)),new a(this,r))},e.prototype.unsubscribe=function(e){this.sendMessage(this.getMessage(198,e));var t=this.subscriptions.get(e);t.listeners.onEnd&&t.listeners.onEnd(null),this.subscriptions.remove(e)},e.prototype.connect=function(){var e=this;this.forcedClose=!1,this.closedError=null,this.socket=new window.WebSocket(this.baseURL),this.socket.onopen=function(t){e.pendingSubscriptions.getAllAsArray().forEach(function(t){var n=t.subID,r=t.path,o=t.listeners,i=t.headers;e.subscribePending(r,o,i,n)}),e.pendingSubscriptions.removeAll(),e.pingInterval=window.setInterval(function(){if(!e.pongTimeout){var t=(new Date).getTime();1e4>t-e.lastMessageReceivedTimestamp||(e.sendMessage(e.getMessage(16,t)),e.lastSentPingID=t,e.pongTimeout=window.setTimeout(function(){1e4>(new Date).getTime()-e.lastMessageReceivedTimestamp?e.pongTimeout=null:e.close(new i.NetworkError(\"Pong response wasn't received within timeout\"))},1e4))}},3e4)},this.socket.onmessage=function(t){return e.receiveMessage(t)},this.socket.onerror=function(t){e.logger.verbose(\"WebSocket encountered an error event\",t)},this.socket.onclose=function(t){e.logger.verbose(\"WebSocket encountered a close event\",t);var n=e.subscriptions.getAllAsArray().concat(e.pendingSubscriptions.getAllAsArray());e.subscriptions.removeAll(),e.pendingSubscriptions.removeAll(),n.forEach(function(t){t.listeners.onError&&t.listeners.onError(e.closedError)}),e.tryReconnectIfNeeded()}},e.prototype.close=function(e){if(this.socket instanceof window.WebSocket){var t=function(e){};null!=this.socket.onclose&&(t=this.socket.onclose.bind(this)),this.socket.onclose=function(){},this.socket.onerror=function(){},this.socket.onmessage=function(){},this.socket.onopen=function(){},this.forcedClose=!0,this.closedError=e,this.socket.close(),window.clearTimeout(this.pingInterval),window.clearTimeout(this.pongTimeout),this.pongTimeout=null,this.pingInterval=null,this.lastSentPingID=null,t()}},e.prototype.tryReconnectIfNeeded=function(){(this.forcedClose||this.socket.readyState===o.Closed)&&this.connect()},e.prototype.subscribePending=function(e,t,n,r){void 0!==r?(this.subscriptions.add(r,e,t,n),this.sendMessage(this.getMessage(100,r,e,n))):this.logger.debug(\"Subscription to path \"+e+\" has an undefined ID\")},e.prototype.getMessage=function(e,t,n,r){return[e,t,n,r]},e.prototype.sendMessage=function(e){this.socket.readyState===o.Open?this.socket.send(JSON.stringify(e)):this.logger.warn(\"Can't send on socket in \\\"\"+o[this.socket.readyState]+'\" state')},e.prototype.subscription=function(e){return this.subscriptions.get(e)},e.prototype.receiveMessage=function(e){var t;this.lastMessageReceivedTimestamp=(new Date).getTime();try{t=JSON.parse(e.data)}catch(t){return void this.close(new i.ProtocolError(\"Message is not valid JSON format. Getting \"+e.data))}var n=this.validateMessage(t);if(n)this.close(n);else{var r=t.shift();switch(r){case 17:return void this.onPongMessage(t);case 16:return void this.onPingMessage(t);case 99:return void this.onCloseMessage(t)}var o=t.shift(),s=this.subscription(o);if(s){var a=s.listeners;switch(r){case 101:this.onOpenMessage(t,o,a);break;case 102:this.onEventMessage(t,a);break;case 199:this.onEOSMessage(t,o,a);break;default:this.close(new i.ProtocolError(\"Received unknown type of message.\"))}}else this.logger.debug(\"Received message for unknown subscription ID: \"+o)}},e.prototype.validateMessage=function(e){return Array.isArray(e)?e.length<1?new i.ProtocolError(\"Message is empty array: \"+JSON.stringify(e)):null:new i.ProtocolError(\"Message is expected to be an array. Getting: \"+JSON.stringify(e))},e.prototype.onOpenMessage=function(e,t,n){n.onOpen&&n.onOpen(e[1])},e.prototype.onEventMessage=function(e,t){if(3===e.length){var n=e[0],r=e[1],o=e[2];\"string\"==typeof n?\"object\"!=typeof r||Array.isArray(r)?t.onError&&t.onError(new i.ProtocolError(\"Invalid event headers in message: \"+JSON.stringify(e))):t.onEvent&&t.onEvent({eventId:n,headers:r,body:o}):t.onError&&t.onError(new i.ProtocolError(\"Invalid event ID in message: \"+JSON.stringify(e)))}else t.onError&&t.onError(new i.ProtocolError(\"Event message has \"+e.length+\" elements (expected 4)\"))},e.prototype.onEOSMessage=function(e,t,n){if(this.subscriptions.remove(t),3===e.length){var r=e[0],o=e[1],s=e[2];\"number\"==typeof r?\"object\"!=typeof o||Array.isArray(o)?n.onError&&n.onError(new i.ProtocolError(\"Invalid EOS ElementsHeaders\")):204!==r?n.onError&&n.onError(new i.ErrorResponse(r,o,s)):n.onEnd&&n.onEnd(null):n.onError&&n.onError(new i.ProtocolError(\"Invalid EOS Status Code\"))}else n.onError&&n.onError(new i.ProtocolError(\"EOS message has \"+e.length+\" elements (expected 4)\"))},e.prototype.onCloseMessage=function(e){var t=e[0],n=e[1],r=e[2];if(\"number\"==typeof t)if(\"object\"!=typeof n||Array.isArray(n))this.close(new i.ProtocolError(\"Close message: Invalid EOS ElementsHeaders\"));else{var o={error:r.error||\"network_error\",error_description:r.error_description||\"Network error\"};this.close(new i.ErrorResponse(t,n,o))}else this.close(new i.ProtocolError(\"Close message: Invalid EOS Status Code\"))},e.prototype.onPongMessage=function(e){var t=e[0];this.lastSentPingID!==t&&this.close(new i.ProtocolError(\"Received pong with ID \"+t+\" but last sent ping ID was \"+this.lastSentPingID)),window.clearTimeout(this.pongTimeout),delete this.pongTimeout,this.lastSentPingID=null},e.prototype.onPingMessage=function(e){var t=e[0];this.sendMessage(this.getMessage(17,t))},e}();t.default=u},function(e,t,n){Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(3),o=n(9),i=n(1),s=function(){function e(e){if(!e.locator)throw new Error(\"Expected `locator` property in Instance options!\");var t=e.locator.split(\":\");if(3!==t.length)throw new Error(\"The instance locator supplied is invalid. Did you copy it correctly from the Pusher dashboard?\");if(!e.serviceName)throw new Error(\"Expected `serviceName` property in Instance options!\");if(!e.serviceVersion)throw new Error(\"Expected `serviceVersion` property in Instance options!\");this.platformVersion=t[0],this.cluster=t[1],this.id=t[2],this.serviceName=e.serviceName,this.serviceVersion=e.serviceVersion,this.host=e.host||this.cluster+\".\"+o.HOST_BASE,this.logger=e.logger||new i.ConsoleLogger,this.client=e.client||new r.BaseClient({encrypted:e.encrypted,host:this.host,logger:this.logger}),this.tokenProvider=e.tokenProvider}return e.prototype.request=function(e,t){return e.path=this.absPath(e.path),null!=e.headers&&void 0!==e.headers||(e.headers={}),e.tokenProvider=e.tokenProvider||this.tokenProvider,this.client.request(e,t)},e.prototype.subscribeNonResuming=function(e){var t=e.headers||{},n=e.retryStrategyOptions||{},r=e.tokenProvider||this.tokenProvider;return this.client.subscribeNonResuming(this.absPath(e.path),t,e.listeners,n,r)},e.prototype.subscribeResuming=function(e){var t=e.headers||{},n=e.retryStrategyOptions||{},r=e.tokenProvider||this.tokenProvider;return this.client.subscribeResuming(this.absPath(e.path),t,e.listeners,n,e.initialEventId,r)},e.prototype.absPath=function(e){return(\"/services/\"+this.serviceName+\"/\"+this.serviceVersion+\"/\"+this.id+\"/\"+e).replace(/\\/+/g,\"/\").replace(/\\/+$/,\"\")},e}();t.default=s}])},e.exports=n()}(e={exports:{}},e.exports),e.exports);(t=n)&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,\"default\")&&t.default;var r=n.BaseClient,o=n.HOST_BASE,i=n.Instance,s=n.sendRawRequest;function a(e){return null!=e&&\"object\"==typeof e&&!0===e[\"@@functional/placeholder\"]}function u(e){return function t(n){return 0===arguments.length||a(n)?t:e.apply(this,arguments)}}function c(e){return function t(n,r){switch(arguments.length){case 0:return t;case 1:return a(n)?t:u(function(t){return e(n,t)});default:return a(n)&&a(r)?t:a(n)?u(function(t){return e(t,r)}):a(r)?u(function(t){return e(n,t)}):e(n,r)}}}function h(e,t){var n;e=e||[],t=t||[];var r=e.length,o=t.length,i=[];for(n=0;n<r;)i[i.length]=e[n],n+=1;for(n=0;n<o;)i[i.length]=t[n],n+=1;return i}function d(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,o){return t.apply(this,arguments)};case 5:return function(e,n,r,o,i){return t.apply(this,arguments)};case 6:return function(e,n,r,o,i,s){return t.apply(this,arguments)};case 7:return function(e,n,r,o,i,s,a){return t.apply(this,arguments)};case 8:return function(e,n,r,o,i,s,a,u){return t.apply(this,arguments)};case 9:return function(e,n,r,o,i,s,a,u,c){return t.apply(this,arguments)};case 10:return function(e,n,r,o,i,s,a,u,c,h){return t.apply(this,arguments)};default:throw new Error(\"First argument to _arity must be a non-negative integer no greater than ten\")}}function l(e,t,n){return function(){for(var r=[],o=0,i=e,s=0;s<t.length||o<arguments.length;){var u;s<t.length&&(!a(t[s])||o>=arguments.length)?u=t[s]:(u=arguments[o],o+=1),r[s]=u,a(u)||(i-=1),s+=1}return i<=0?n.apply(this,r):d(i,l(e,r,n))}}var f=c(function(e,t){return 1===e?u(t):d(e,l(e,[],t))});function p(e){return function t(n,r,o){switch(arguments.length){case 0:return t;case 1:return a(n)?t:c(function(t,r){return e(n,t,r)});case 2:return a(n)&&a(r)?t:a(n)?c(function(t,n){return e(t,r,n)}):a(r)?c(function(t,r){return e(n,t,r)}):u(function(t){return e(n,r,t)});default:return a(n)&&a(r)&&a(o)?t:a(n)&&a(r)?c(function(t,n){return e(t,n,o)}):a(n)&&a(o)?c(function(t,n){return e(t,r,n)}):a(r)&&a(o)?c(function(t,r){return e(n,t,r)}):a(n)?u(function(t){return e(t,r,o)}):a(r)?u(function(t){return e(n,t,o)}):a(o)?u(function(t){return e(n,r,t)}):e(n,r,o)}}}var g=Array.isArray||function(e){return null!=e&&e.length>=0&&\"[object Array]\"===Object.prototype.toString.call(e)};function m(e,t,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),o=r.pop();if(!g(o)){for(var i=0;i<e.length;){if(\"function\"==typeof o[e[i]])return o[e[i]].apply(o,r);i+=1}if(function(e){return\"function\"==typeof e[\"@@transducer/step\"]}(o))return t.apply(null,r)(o)}return n.apply(this,arguments)}}var v={init:function(){return this.xf[\"@@transducer/init\"]()},result:function(e){return this.xf[\"@@transducer/result\"](e)}},b=c(function(e,t){return t>e?t:e});function y(e,t){for(var n=0,r=t.length,o=Array(r);n<r;)o[n]=e(t[n]),n+=1;return o}function S(e){return\"[object String]\"===Object.prototype.toString.call(e)}var w=u(function(e){return!!g(e)||!!e&&(\"object\"==typeof e&&(!S(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&(e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1)))))}),I=function(){function e(e){this.f=e}return e.prototype[\"@@transducer/init\"]=function(){throw new Error(\"init not implemented on XWrap\")},e.prototype[\"@@transducer/result\"]=function(e){return e},e.prototype[\"@@transducer/step\"]=function(e,t){return this.f(e,t)},e}();function k(e){return new I(e)}var E=c(function(e,t){return d(e.length,function(){return e.apply(t,arguments)})});function R(e,t,n){for(var r=n.next();!r.done;){if((t=e[\"@@transducer/step\"](t,r.value))&&t[\"@@transducer/reduced\"]){t=t[\"@@transducer/value\"];break}r=n.next()}return e[\"@@transducer/result\"](t)}function T(e,t,n,r){return e[\"@@transducer/result\"](n[r](E(e[\"@@transducer/step\"],e),t))}var _=\"undefined\"!=typeof Symbol?Symbol.iterator:\"@@iterator\";function P(e,t,n){if(\"function\"==typeof e&&(e=k(e)),w(n))return function(e,t,n){for(var r=0,o=n.length;r<o;){if((t=e[\"@@transducer/step\"](t,n[r]))&&t[\"@@transducer/reduced\"]){t=t[\"@@transducer/value\"];break}r+=1}return e[\"@@transducer/result\"](t)}(e,t,n);if(\"function\"==typeof n[\"fantasy-land/reduce\"])return T(e,t,n,\"fantasy-land/reduce\");if(null!=n[_])return R(e,t,n[_]());if(\"function\"==typeof n.next)return R(e,t,n);if(\"function\"==typeof n.reduce)return T(e,t,n,\"reduce\");throw new TypeError(\"reduce: list must be array or iterable\")}var O=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype[\"@@transducer/init\"]=v.init,e.prototype[\"@@transducer/result\"]=v.result,e.prototype[\"@@transducer/step\"]=function(e,t){return this.xf[\"@@transducer/step\"](e,this.f(t))},e}(),N=c(function(e,t){return new O(e,t)});function U(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var C=Object.prototype.toString,M=!{toString:null}.propertyIsEnumerable(\"toString\"),A=[\"constructor\",\"valueOf\",\"isPrototypeOf\",\"toString\",\"propertyIsEnumerable\",\"hasOwnProperty\",\"toLocaleString\"],D=function(){return arguments.propertyIsEnumerable(\"length\")}(),j=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},x=u(\"function\"!=typeof Object.keys||D?function(e){if(Object(e)!==e)return[];var t,n,r=[],o=D&&function(){return\"[object Arguments]\"===C.call(arguments)?function(e){return\"[object Arguments]\"===C.call(e)}:function(e){return U(\"callee\",e)}}(e);for(t in e)!U(t,e)||o&&\"length\"===t||(r[r.length]=t);if(M)for(n=A.length-1;n>=0;)U(t=A[n],e)&&!j(r,t)&&(r[r.length]=t),n-=1;return r}:function(e){return Object(e)!==e?[]:Object.keys(e)}),L=c(m([\"fantasy-land/map\",\"map\"],N,function(e,t){switch(Object.prototype.toString.call(t)){case\"[object Function]\":return f(t.length,function(){return e.call(this,t.apply(this,arguments))});case\"[object Object]\":return P(function(n,r){return n[r]=e(t[r]),n},{},x(t));default:return y(e,t)}})),q=c(function(e,t){for(var n=t,r=0;r<e.length;){if(null==n)return;n=n[e[r]],r+=1}return n}),B=c(function(e,t){return q([e],t)}),H=p(P),V=c(function(e,t){return h(t,[e])}),F=u(function(e){for(var t=x(e),n=t.length,r=[],o=0;o<n;)r[o]=e[t[o]],o+=1;return r});var J=u(function(e){return null===e?\"Null\":void 0===e?\"Undefined\":Object.prototype.toString.call(e).slice(8,-1)});function G(e,t){return function(){return t.call(this,e.apply(this,arguments))}}function W(e,t){return function(){var n=arguments.length;if(0===n)return t();var r=arguments[n-1];return g(r)||\"function\"!=typeof r[e]?t.apply(this,arguments):r[e].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}var $=p(W(\"slice\",function(e,t,n){return Array.prototype.slice.call(n,e,t)})),z=u(W(\"tail\",$(1,1/0)));function X(){if(0===arguments.length)throw new Error(\"pipe requires at least one argument\");return d(arguments[0].length,H(G,arguments[0],z(arguments)))}var K=u(function(e){return S(e)?e.split(\"\").reverse().join(\"\"):Array.prototype.slice.call(e,0).reverse()});function Y(){if(0===arguments.length)throw new Error(\"compose requires at least one argument\");return X.apply(this,K(arguments))}function Z(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function Q(e,t,n){for(var r=0,o=n.length;r<o;){if(e(t,n[r]))return!0;r+=1}return!1}var ee=c(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t});function te(e,t,n,r){var o=Z(e);function i(e,t){return ne(e,t,n.slice(),r.slice())}return!Q(function(e,t){return!Q(i,t,e)},Z(t),o)}function ne(e,t,n,r){if(ee(e,t))return!0;var o,i,s=J(e);if(s!==J(t))return!1;if(null==e||null==t)return!1;if(\"function\"==typeof e[\"fantasy-land/equals\"]||\"function\"==typeof t[\"fantasy-land/equals\"])return\"function\"==typeof e[\"fantasy-land/equals\"]&&e[\"fantasy-land/equals\"](t)&&\"function\"==typeof t[\"fantasy-land/equals\"]&&t[\"fantasy-land/equals\"](e);if(\"function\"==typeof e.equals||\"function\"==typeof t.equals)return\"function\"==typeof e.equals&&e.equals(t)&&\"function\"==typeof t.equals&&t.equals(e);switch(s){case\"Arguments\":case\"Array\":case\"Object\":if(\"function\"==typeof e.constructor&&\"Promise\"===(o=e.constructor,null==(i=String(o).match(/^function (\\w*)/))?\"\":i[1]))return e===t;break;case\"Boolean\":case\"Number\":case\"String\":if(typeof e!=typeof t||!ee(e.valueOf(),t.valueOf()))return!1;break;case\"Date\":if(!ee(e.valueOf(),t.valueOf()))return!1;break;case\"Error\":return e.name===t.name&&e.message===t.message;case\"RegExp\":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1}for(var a=n.length-1;a>=0;){if(n[a]===e)return r[a]===t;a-=1}switch(s){case\"Map\":return e.size===t.size&&te(e.entries(),t.entries(),n.concat([e]),r.concat([t]));case\"Set\":return e.size===t.size&&te(e.values(),t.values(),n.concat([e]),r.concat([t]));case\"Arguments\":case\"Array\":case\"Object\":case\"Boolean\":case\"Number\":case\"String\":case\"Date\":case\"Error\":case\"RegExp\":case\"Int8Array\":case\"Uint8Array\":case\"Uint8ClampedArray\":case\"Int16Array\":case\"Uint16Array\":case\"Int32Array\":case\"Uint32Array\":case\"Float32Array\":case\"Float64Array\":case\"ArrayBuffer\":break;default:return!1}var u=x(e);if(u.length!==x(t).length)return!1;var c=n.concat([e]),h=r.concat([t]);for(a=u.length-1;a>=0;){var d=u[a];if(!U(d,t)||!ne(t[d],e[d],c,h))return!1;a-=1}return!0}var re=c(function(e,t){return ne(e,t,[],[])});function oe(e,t){return function(e,t,n){var r,o;if(\"function\"==typeof e.indexOf)switch(typeof t){case\"number\":if(0===t){for(r=1/t;n<e.length;){if(0===(o=e[n])&&1/o===r)return n;n+=1}return-1}if(t!=t){for(;n<e.length;){if(\"number\"==typeof(o=e[n])&&o!=o)return n;n+=1}return-1}return e.indexOf(t,n);case\"string\":case\"boolean\":case\"function\":case\"undefined\":return e.indexOf(t,n);case\"object\":if(null===t)return e.indexOf(t,n)}for(;n<e.length;){if(re(e[n],t))return n;n+=1}return-1}(t,e,0)>=0}function ie(e){return'\"'+e.replace(/\\\\/g,\"\\\\\\\\\").replace(/[\\b]/g,\"\\\\b\").replace(/\\f/g,\"\\\\f\").replace(/\\n/g,\"\\\\n\").replace(/\\r/g,\"\\\\r\").replace(/\\t/g,\"\\\\t\").replace(/\\v/g,\"\\\\v\").replace(/\\0/g,\"\\\\0\").replace(/\"/g,'\\\\\"')+'\"'}var se=function(e){return(e<10?\"0\":\"\")+e},ae=\"function\"==typeof Date.prototype.toISOString?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+\"-\"+se(e.getUTCMonth()+1)+\"-\"+se(e.getUTCDate())+\"T\"+se(e.getUTCHours())+\":\"+se(e.getUTCMinutes())+\":\"+se(e.getUTCSeconds())+\".\"+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+\"Z\"};var ue=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype[\"@@transducer/init\"]=v.init,e.prototype[\"@@transducer/result\"]=v.result,e.prototype[\"@@transducer/step\"]=function(e,t){return this.f(t)?this.xf[\"@@transducer/step\"](e,t):e},e}(),ce=c(m([\"filter\"],c(function(e,t){return new ue(e,t)}),function(e,t){return n=t,\"[object Object]\"===Object.prototype.toString.call(n)?P(function(n,r){return e(t[r])&&(n[r]=t[r]),n},{},x(t)):function(e,t){for(var n=0,r=t.length,o=[];n<r;)e(t[n])&&(o[o.length]=t[n]),n+=1;return o}(e,t);var n})),he=c(function(e,t){return ce((n=e,function(){return!n.apply(this,arguments)}),t);var n});var de=u(function(e){return function e(t,n){var r=function(r){var o=n.concat([t]);return oe(r,o)?\"<Circular>\":e(r,o)},o=function(e,t){return y(function(t){return ie(t)+\": \"+r(e[t])},t.slice().sort())};switch(Object.prototype.toString.call(t)){case\"[object Arguments]\":return\"(function() { return arguments; }(\"+y(r,t).join(\", \")+\"))\";case\"[object Array]\":return\"[\"+y(r,t).concat(o(t,he(function(e){return/^\\d+$/.test(e)},x(t)))).join(\", \")+\"]\";case\"[object Boolean]\":return\"object\"==typeof t?\"new Boolean(\"+r(t.valueOf())+\")\":t.toString();case\"[object Date]\":return\"new Date(\"+(isNaN(t.valueOf())?r(NaN):ie(ae(t)))+\")\";case\"[object Null]\":return\"null\";case\"[object Number]\":return\"object\"==typeof t?\"new Number(\"+r(t.valueOf())+\")\":1/t==-1/0?\"-0\":t.toString(10);case\"[object String]\":return\"object\"==typeof t?\"new String(\"+r(t.valueOf())+\")\":ie(t);case\"[object Undefined]\":return\"undefined\";default:if(\"function\"==typeof t.toString){var i=t.toString();if(\"[object Object]\"!==i)return i}return\"{\"+o(t,x(t)).join(\", \")+\"}\"}}(e,[])}),le=c(oe),fe=c(W(\"forEach\",function(e,t){for(var n=t.length,r=0;r<n;)e(t[r]),r+=1;return t})),pe=c(function(e,t){for(var n=x(t),r=0;r<n.length;){var o=n[r];e(t[o],o,t),r+=1}return t}),ge=c(U);function me(e){return e}var ve=u(me),be=function(){function e(){this._nativeSet=\"function\"==typeof Set?new Set:null,this._items={}}return e.prototype.add=function(e){return!ye(e,!0,this)},e.prototype.has=function(e){return ye(e,!1,this)},e}();function ye(e,t,n){var r,o=typeof e;switch(o){case\"string\":case\"number\":return 0===e&&1/e==-1/0?!!n._items[\"-0\"]||(t&&(n._items[\"-0\"]=!0),!1):null!==n._nativeSet?t?(r=n._nativeSet.size,n._nativeSet.add(e),n._nativeSet.size===r):n._nativeSet.has(e):o in n._items?e in n._items[o]||(t&&(n._items[o][e]=!0),!1):(t&&(n._items[o]={},n._items[o][e]=!0),!1);case\"boolean\":if(o in n._items){var i=e?1:0;return!!n._items[o][i]||(t&&(n._items[o][i]=!0),!1)}return t&&(n._items[o]=e?[!1,!0]:[!0,!1]),!1;case\"function\":return null!==n._nativeSet?t?(r=n._nativeSet.size,n._nativeSet.add(e),n._nativeSet.size===r):n._nativeSet.has(e):o in n._items?!!oe(e,n._items[o])||(t&&n._items[o].push(e),!1):(t&&(n._items[o]=[e]),!1);case\"undefined\":return!!n._items[o]||(t&&(n._items[o]=!0),!1);case\"object\":if(null===e)return!!n._items.null||(t&&(n._items.null=!0),!1);default:return(o=Object.prototype.toString.call(e))in n._items?!!oe(e,n._items[o])||(t&&n._items[o].push(e),!1):(t&&(n._items[o]=[e]),!1)}}var Se=c(function(e,t){for(var n,r,o=new be,i=[],s=0;s<t.length;)n=e(r=t[s]),o.add(n)&&i.push(r),s+=1;return i})(ve),we=c(function(e,t){return f(e+1,function(){var n,r=arguments[e];if(null!=r&&(n=r[t],\"[object Function]\"===Object.prototype.toString.call(n)))return r[t].apply(r,Array.prototype.slice.call(arguments,0,e));throw new TypeError(de(r)+' does not have a method named \"'+t+'\"')})}),Ie=we(1,\"join\");var ke=c(function(e,t){return Array.prototype.slice.call(t,0).sort(e)}),Ee=we(1,\"split\"),Re=u(function(e){var t=[];for(var n in e)U(n,e)&&(t[t.length]=[n,e[n]]);return t}),Te=\"\\t\\n\\v\\f\\r   ᠎             　\\u2028\\u2029\\ufeff\",_e=(String.prototype.trim,\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e}),Pe=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")},Oe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ue=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},Ce=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),Me=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},Ae=X(ce(function(e){return void 0!==e}),Re,L(function(e){var t=Ce(e,2),n=t[0],r=t[1];return n+\"=\"+encodeURIComponent(r)}),Ie(\"&\")),De=function(e,t,n){var r=void 0===n?\"undefined\":_e(n);if(r!==t)throw new TypeError(\"expected \"+e+\" to be of type \"+t+\" but was of type \"+r)},je=function(e,t,n){if(!Array.isArray(n))throw new TypeError(\"expected \"+e+\" to be an array\");n.forEach(function(n,r){return De(e+\"[\"+r+\"]\",t,n)})},xe=function(e,t,n){De(e,\"object\",n),pe(function(n,r){return De(e+\".\"+r,t,n)},n)},Le=function(){return Math.floor(Date.now()/1e3)},qe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.url,r=t.queryParams,o=t.headers,i=t.withCredentials;Pe(this,e),De(\"url\",\"string\",n),r&&De(\"queryParams\",\"object\",r),o&&De(\"headers\",\"object\",o),this.url=n,this.queryParams=r,this.headers=o,this.withCredentials=i,this.fetchToken=this.fetchToken.bind(this),this.fetchFreshToken=this.fetchFreshToken.bind(this),this.cacheIsStale=this.cacheIsStale.bind(this),this.cache=this.cache.bind(this),this.clearCache=this.clearCache.bind(this),this.setUserId=this.setUserId.bind(this)}return Oe(e,[{key:\"fetchToken\",value:function(){var e=this;return this.cacheIsStale()?(this.req||this.fetchFreshToken()).then(function(t){var n=t.token,r=t.expiresIn;return e.cache(n,r),n}):Promise.resolve(this.cachedToken)}},{key:\"fetchFreshToken\",value:function(){var e,t,n=this;return this.req=s({method:\"POST\",url:(e=Ne({user_id:this.userId},this.queryParams),t=this.url,t+(le(\"?\",t)?\"&\":\"?\")+Ae(e)),body:Ae({grant_type:\"client_credentials\"}),headers:Ne({\"content-type\":\"application/x-www-form-urlencoded\"},this.headers),withCredentials:this.withCredentials}).then(function(e){var t=JSON.parse(e),r=t.access_token,o=t.expires_in;return delete n.req,{token:r,expiresIn:o}}).catch(function(e){throw delete n.req,e}),this.req}},{key:\"cacheIsStale\",value:function(){return!this.cachedToken||Le()>this.cacheExpiresAt}},{key:\"cache\",value:function(e,t){this.cachedToken=e,this.cacheExpiresAt=Le()+t}},{key:\"clearCache\",value:function(){this.cachedToken=void 0,this.cacheExpiresAt=void 0}},{key:\"setUserId\",value:function(e){this.clearCache(),this.userId=e}}]),e}(),Be=function(e){return{createdAt:e.created_at,createdByUserId:e.created_by_id,id:e.id,isPrivate:e.private,name:e.name,updatedAt:e.updated_at,customData:e.custom_data,deletedAt:e.deleted_at,unreadCount:e.unread_count,lastMessageAt:e.last_message_at}},He=function(e){return{avatarURL:e.avatar_url,createdAt:e.created_at,customData:e.custom_data,id:e.id,name:e.name,updatedAt:e.updated_at}},Ve=function(e){var t={roomId:e.room_id,id:e.id,senderId:e.user_id,createdAt:e.created_at,updatedAt:e.updated_at,deletedAt:e.deleted_at};return e.parts?t.parts=e.parts.map(function(e){return Ge(e)}):(t.text=e.text,e.attachment&&(t.attachment=Je(e.attachment))),t},Fe=function(e){return{position:e.position,updatedAt:e.updated_at,userId:e.user_id,roomId:e.room_id,type:e.cursor_type}},Je=function(e){return{link:e.resource_link,type:e.type,name:e.name}},Ge=function(e){if(null!=e.content)return{partType:\"inline\",payload:{type:e.type,content:e.content}};if(null!=e.url)return{partType:\"url\",payload:{type:e.type,url:e.url}};if(null!=e.attachment)return{partType:\"attachment\",payload:{type:e.type,name:e.attachment.name,size:e.attachment.size,customData:e.attachment.custom_data,_id:e.attachment.id,_downloadURL:e.attachment.download_url,_expiration:new Date(e.attachment.expiration)}};throw new TypeError(\"failed to parse message part\")},We=function(){function e(t,n){Pe(this,e),this.avatarURL=t.avatarURL,this.createdAt=t.createdAt,this.customData=t.customData,this.id=t.id,this.name=t.name,this.updatedAt=t.updatedAt,this.presenceStore=n}return Oe(e,[{key:\"presence\",get:function(){return{state:this.presenceStore[this.id]||\"unknown\"}}}]),e}();function $e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t.pending[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var u=s.value;n.push(u),t.inProgress.add(u)}}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return t.pending.clear(),e(n).then(function(e){var r=!0,o=!1,i=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var u=s.value,c=!0,h=!1,d=void 0;try{for(var l,f=t.callbacks[u][Symbol.iterator]();!(c=(l=f.next()).done);c=!0){l.value.resolve(e)}}catch(e){h=!0,d=e}finally{try{!c&&f.return&&f.return()}finally{if(h)throw d}}t.inProgress.delete(u),delete t.callbacks[u]}}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}}).catch(function(e){var r=!0,o=!1,i=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var u=s.value,c=!0,h=!1,d=void 0;try{for(var l,f=t.callbacks[u][Symbol.iterator]();!(c=(l=f.next()).done);c=!0){l.value.reject(e)}}catch(e){h=!0,d=e}finally{try{!c&&f.return&&f.return()}finally{if(h)throw d}}t.inProgress.delete(u),delete t.callbacks[u]}}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}})}var ze=50,Xe=250,Ke=2e4,Ye=function(){function e(t){var n,r,o,i,s=t.instance,a=t.presenceStore,u=t.logger;Pe(this,e),this.instance=s,this.presenceStore=a,this.logger=u,this.onSetHooks=[],this.users={},this.set=this.set.bind(this),this.get=this.get.bind(this),this.fetchMissingUser=(n=this._fetchMissingUserBatch.bind(this),r=ze,o=Xe,i={callbacks:{},pending:new Set,inProgress:new Set},function(e){return new Promise(function(t,s){i.pending.has(e)||i.inProgress.has(e)?i.callbacks[e].push({resolve:t,reject:s}):(i.pending.add(e),i.callbacks[e]=[{resolve:t,reject:s}]),i.pending.size>=o?(clearTimeout(i.timeout),$e(n,i),delete i.timeout):i.timeout||(i.timeout=setTimeout(function(){$e(n,i),delete i.timeout},r))})}),this.fetchMissingUsers=this.fetchMissingUsers.bind(this),this.fetchMissingUserReq=this.fetchMissingUserReq.bind(this),this.snapshot=this.snapshot.bind(this),this.getSync=this.getSync.bind(this),this.decorate=this.decorate.bind(this)}return Oe(e,[{key:\"set\",value:function(e){return this.users[e.id]=this.decorate(e),this.onSetHooks.forEach(function(t){return t(e.id)}),Promise.resolve(this.users[e.id])}},{key:\"get\",value:function(e){var t=this;return this.fetchMissingUser(e).then(function(){return t.users[e]})}},{key:\"fetchMissingUsers\",value:function(e){var t=this;return Promise.all(e.map(function(e){return t.fetchMissingUser(e)}))}},{key:\"_fetchMissingUserBatch\",value:function(e){var t=this,n=e.filter(function(e){return!t.users[e]});return n.length>0?this.fetchMissingUserReq(n):Promise.resolve()}},{key:\"fetchMissingUserReq\",value:function(e){var t,n,r,o,i,s=this;return this.instance.request({method:\"GET\",path:(t=\"id\",n=e,r=\"/users_by_ids\",o=le(\"?\",r)?\"\":\"?\",i=L(function(e){return encodeURIComponent(t)+\"=\"+encodeURIComponent(e)},n),r+o+Ie(\"&\",i))}).then(function(e){JSON.parse(e).map(function(e){return He(e)}).forEach(function(e){s.set(e)})}).catch(function(e){throw s.logger.warn(\"error fetching missing users:\",e),e})}},{key:\"snapshot\",value:function(){return this.users}},{key:\"getSync\",value:function(e){return this.users[e]}},{key:\"decorate\",value:function(e){return e?new We(e,this.presenceStore):void 0}}]),e}(),Ze=function(){function e(t){var n=t.basicRoom,r=t.userStore,o=t.isSubscribedTo,i=t.logger;Pe(this,e),this.createdAt=n.createdAt,this.createdByUserId=n.createdByUserId,this.deletedAt=n.deletedAt,this.id=n.id,this.isPrivate=n.isPrivate,this.name=n.name,this.updatedAt=n.updatedAt,this.customData=n.customData,this.unreadCount=n.unreadCount,this.lastMessageAt=n.lastMessageAt,this.userIds=[],this.userStore=r,this.isSubscribedTo=o,this.logger=i,this.eq=this.eq.bind(this)}return Oe(e,[{key:\"eq\",value:function(e){return this.createdAt===e.createdAt&&this.createdByUserId===e.createdByUserId&&this.deletedAt===e.deletedAt&&this.id===e.id&&this.isPrivate===e.isPrivate&&this.name===e.name&&this.updatedAt===e.updatedAt&&JSON.stringify(this.customData)===JSON.stringify(e.customData)}},{key:\"users\",get:function(){var e=this;if(!this.isSubscribedTo(this.id)){var t=new Error(\"Must be subscribed to room \"+this.id+\" to access users property\");throw this.logger.error(t),t}return ce(function(t){return le(t.id,e.userIds)},F(this.userStore.snapshot()))}}]),e}(),Qe=function(){function e(t){Pe(this,e),this.instance=t.instance,this.userStore=t.userStore,this.isSubscribedTo=t.isSubscribedTo,this.logger=t.logger,this.rooms={},this.setSync=this.setSync.bind(this),this.set=this.set.bind(this),this.get=this.get.bind(this),this.popSync=this.popSync.bind(this),this.pop=this.pop.bind(this),this.addUserToRoom=this.addUserToRoom.bind(this),this.removeUserFromRoom=this.removeUserFromRoom.bind(this),this.updateSync=this.updateSync.bind(this),this.update=this.update.bind(this),this.fetchBasicRoom=this.fetchBasicRoom.bind(this),this.snapshot=this.snapshot.bind(this),this.getSync=this.getSync.bind(this),this.decorate=this.decorate.bind(this)}return Oe(e,[{key:\"setSync\",value:function(e){return this.rooms[e.id]||(this.rooms[e.id]=this.decorate(e)),this.rooms[e.id]}},{key:\"set\",value:function(e){return Promise.resolve(this.setSync(e))}},{key:\"get\",value:function(e){var t=this;return Promise.resolve(this.rooms[e]).then(function(n){return n||t.fetchBasicRoom(e).then(function(n){return t.set(e,n)})})}},{key:\"popSync\",value:function(e){var t=this.rooms[e];return delete this.rooms[e],t}},{key:\"pop\",value:function(e){return Promise.resolve(this.popSync(e))}},{key:\"addUserToRoom\",value:function(e,t){return Promise.all([this.get(e).then(function(e){return e.userIds=Se(V(t,e.userIds)),e}),this.userStore.fetchMissingUser(t)]).then(function(e){return Ce(e,1)[0]})}},{key:\"removeUserFromRoom\",value:function(e,t){return this.get(e).then(function(e){return e.userIds=e.userIds.filter(function(e){return e!==t}),e})}},{key:\"updateSync\",value:function(e,t){var n=this.getSync(e);for(var r in t)n[r]=t[r];return n}},{key:\"update\",value:function(e,t){var n=this;return Promise.all([this.get(e).then(function(){return n.updateSync(e,t)}),this.userStore.fetchMissingUsers(t.userIds||[])]).then(function(e){return Ce(e,1)[0]})}},{key:\"fetchBasicRoom\",value:function(e){var t=this;return this.instance.request({method:\"GET\",path:\"/rooms/\"+encodeURIComponent(e)}).then(X(JSON.parse,Be)).catch(function(n){t.logger.warn(\"error fetching details for room \"+e+\":\",n)})}},{key:\"snapshot\",value:function(){return this.rooms}},{key:\"getSync\",value:function(e){return this.rooms[e]}},{key:\"decorate\",value:function(e){return e?new Ze({basicRoom:e,userStore:this.userStore,isSubscribedTo:this.isSubscribedTo,logger:this.logger}):void 0}}]),e}(),et=function(){function e(t,n,r){Pe(this,e),this.position=t.position,this.updatedAt=t.updatedAt,this.userId=t.userId,this.roomId=t.roomId,this.type=t.type,this.userStore=n,this.roomStore=r}return Oe(e,[{key:\"user\",get:function(){return this.userStore.getSync(this.userId)}},{key:\"room\",get:function(){return this.roomStore.getSync(this.roomId)}}]),e}(),tt=function(){function e(t){var n=t.instance,r=t.userStore,o=t.roomStore,i=t.logger;Pe(this,e),this.instance=n,this.userStore=r,this.roomStore=o,this.logger=i,this.cursors={},this.set=this.set.bind(this),this.get=this.get.bind(this),this.getSync=this.getSync.bind(this),this.fetchBasicCursor=this.fetchBasicCursor.bind(this),this.decorate=this.decorate.bind(this)}return Oe(e,[{key:\"set\",value:function(e){var t=this,n=nt(e.userId,e.roomId);return this.cursors[n]=this.decorate(e),this.userStore.fetchMissingUser(e.userId).then(function(){return t.cursors[n]})}},{key:\"get\",value:function(e,t){var n=this,r=nt(e,t);return this.cursors[r]?Promise.resolve(this.cursors[r]):this.fetchBasicCursor(e,t).then(function(e){return n.set(e)})}},{key:\"getSync\",value:function(e,t){return this.cursors[nt(e,t)]}},{key:\"fetchBasicCursor\",value:function(e,t){var n=this;return this.instance.request({method:\"GET\",path:\"/cursors/0/rooms/\"+encodeURIComponent(t)+\"/users/\"+encodeURIComponent(e)}).then(function(e){var t=JSON.parse(e);if(t)return Fe(t)}).catch(function(e){throw n.logger.warn(\"error fetching cursor:\",e),e})}},{key:\"decorate\",value:function(e){return e?new et(e,this.userStore,this.roomStore):void 0}}]),e}(),nt=function(e,t){return encodeURIComponent(e)+\"/\"+encodeURIComponent(t)},rt=function(){function e(t){var n=t.hooks,r=t.instance,o=t.logger;Pe(this,e),this.hooks=n,this.instance=r,this.logger=o,this.lastSentRequests={},this.timers={},this.sendThrottledRequest=this.sendThrottledRequest.bind(this),this.onIsTyping=this.onIsTyping.bind(this),this.onStarted=this.onStarted.bind(this),this.onStopped=this.onStopped.bind(this)}return Oe(e,[{key:\"sendThrottledRequest\",value:function(e){var t=this,n=Date.now(),r=this.lastSentRequests[e];return r&&n-r<1e3?Promise.resolve():(this.lastSentRequests[e]=n,this.instance.request({method:\"POST\",path:\"/rooms/\"+encodeURIComponent(e)+\"/typing_indicators\"}).catch(function(n){throw delete t.typingRequestSent[e],t.logger.warn(\"Error sending typing indicator in room \"+e,n),n}))}},{key:\"onIsTyping\",value:function(e,t){var n=this;this.timers[e.id]||(this.timers[e.id]={}),this.timers[e.id][t.id]?clearTimeout(this.timers[e.id][t.id]):this.onStarted(e,t),this.timers[e.id][t.id]=setTimeout(function(){n.onStopped(e,t),delete n.timers[e.id][t.id]},1500)}},{key:\"onStarted\",value:function(e,t){this.hooks.global.onUserStartedTyping&&this.hooks.global.onUserStartedTyping(e,t),this.hooks.rooms[e.id]&&this.hooks.rooms[e.id].onUserStartedTyping&&this.hooks.rooms[e.id].onUserStartedTyping(t)}},{key:\"onStopped\",value:function(e,t){this.hooks.global.onUserStoppedTyping&&this.hooks.global.onUserStoppedTyping(e,t),this.hooks.rooms[e.id]&&this.hooks.rooms[e.id].onUserStoppedTyping&&this.hooks.rooms[e.id].onUserStoppedTyping(t)}}]),e}();function ot(e){var t=e.basicCursors,n=e.cursorStore,r=e.onNewCursorHook;return Promise.all(t.map(function(e){var t=n.getSync(e.userId,e.roomId);if(!t||t.position!==e.position)return n.set(e).then(function(e){r&&r(e)})}))}var it=function(){function e(t){Pe(this,e),this.userId=t.userId,this.hooks=t.hooks,this.instance=t.instance,this.roomStore=t.roomStore,this.cursorStore=t.cursorStore,this.roomSubscriptions=t.roomSubscriptions,this.logger=t.logger,this.connectionTimeout=t.connectionTimeout,this.currentUser=t.currentUser,this.connect=this.connect.bind(this),this.cancel=this.cancel.bind(this),this.onEvent=this.onEvent.bind(this),this.onInitialState=this.onInitialState.bind(this),this.onAddedToRoom=this.onAddedToRoom.bind(this),this.onRemovedFromRoom=this.onRemovedFromRoom.bind(this),this.onRoomUpdated=this.onRoomUpdated.bind(this),this.onRoomDeleted=this.onRoomDeleted.bind(this)}return Oe(e,[{key:\"connect\",value:function(){var e=this;return new Promise(function(t,n){e.timeout=setTimeout(function(){n(new Error(\"user subscription timed out\"))},e.connectionTimeout),e.onSubscriptionEstablished=function(n){clearTimeout(e.timeout),t(n)},e.sub=e.instance.subscribeNonResuming({path:\"/users\",listeners:{onError:function(t){clearTimeout(e.timeout),n(t)},onEvent:e.onEvent}})})}},{key:\"cancel\",value:function(){clearTimeout(this.timeout);try{this.sub&&this.sub.unsubscribe()}catch(e){this.logger.debug(\"error when cancelling user subscription\",e)}}},{key:\"onEvent\",value:function(e){var t=e.body;switch(t.event_name){case\"initial_state\":this.onInitialState(t.data);break;case\"added_to_room\":this.onAddedToRoom(t.data);break;case\"removed_from_room\":this.onRemovedFromRoom(t.data);break;case\"room_updated\":this.onRoomUpdated(t.data);break;case\"room_deleted\":this.onRoomDeleted(t.data);break;case\"new_cursor\":this.onNewCursor(t.data)}}},{key:\"onInitialState\",value:function(e){var t=e.current_user,n=e.rooms,r=e.cursors,o=He(t),i=n.map(function(e){return Be(e)}),s=r.map(function(e){return Fe(e)});this.established?function(e){var t=e.basicUser,n=e.basicRooms,r=e.basicCursors,o=e.currentUser,i=e.roomStore,s=e.cursorStore,a=e.hooks;o.setPropertiesFromBasicUser(t);var u=!0,c=!1,h=void 0;try{for(var d,l=n[Symbol.iterator]();!(u=(d=l.next()).done);u=!0){var f=d.value,p=i.getSync(f.id);if(!p){var g=i.setSync(f);a.global.onAddedToRoom&&a.global.onAddedToRoom(g)}p&&!p.eq(f)&&(i.updateSync(f.id,f),a.global.onRoomUpdated&&a.global.onRoomUpdated(p))}}catch(e){c=!0,h=e}finally{try{!u&&l.return&&l.return()}finally{if(c)throw h}}var m=function(e){if(!n.some(function(t){return t.id===e})){var t=i.popSync(e);a.global.onRemovedFromRoom&&a.global.onRemovedFromRoom(t)}};for(var v in i.snapshot())m(v);ot({basicCursors:r,cursorStore:s,onNewCursorHook:a.global.onNewReadCursor})}({basicUser:o,basicRooms:i,basicCursors:s,currentUser:this.currentUser,roomStore:this.roomStore,cursorStore:this.cursorStore,hooks:this.hooks}):(this.established=!0,this.onSubscriptionEstablished({basicUser:o,basicRooms:i,basicCursors:s}))}},{key:\"onAddedToRoom\",value:function(e){var t=this,n=e.room;this.roomStore.set(Be(n)).then(function(e){t.hooks.global.onAddedToRoom&&t.hooks.global.onAddedToRoom(e)})}},{key:\"onRemovedFromRoom\",value:function(e){var t=this,n=e.room_id;this.roomStore.pop(n).then(function(e){e&&t.hooks.global.onRemovedFromRoom&&t.hooks.global.onRemovedFromRoom(e)})}},{key:\"onRoomUpdated\",value:function(e){var t=this,n=e.room,r=Be(n);this.roomStore.update(r.id,r).then(function(e){t.hooks.global.onRoomUpdated&&t.hooks.global.onRoomUpdated(e)})}},{key:\"onRoomDeleted\",value:function(e){var t=this,n=e.room_id;this.roomStore.pop(n).then(function(e){e&&t.hooks.global.onRoomDeleted&&t.hooks.global.onRoomDeleted(e)})}},{key:\"onNewCursor\",value:function(e){var t=this;return this.cursorStore.set(Fe(e)).then(function(e){t.hooks.global.onNewReadCursor&&0===e.type&&t.hooks.global.onNewReadCursor(e)})}}]),e}(),st=function(){function e(t){Pe(this,e),this.userId=t.userId,this.instance=t.instance,this.logger=t.logger,this.connectionTimeout=t.connectionTimeout}return Oe(e,[{key:\"connect\",value:function(){var e=this;return new Promise(function(t,n){e.timeout=setTimeout(function(){n(new Error(\"presence subscription timed out\"))},e.connectionTimeout),e.sub=e.instance.subscribeNonResuming({path:\"/users/\"+encodeURIComponent(e.userId)+\"/register\",listeners:{onOpen:function(){clearTimeout(e.timeout),t()},onError:function(t){clearTimeout(e.timeout),n(t)}}})})}},{key:\"cancel\",value:function(){clearTimeout(this.timeout);try{this.sub&&this.sub.unsubscribe()}catch(e){this.logger.debug(\"error when cancelling presence subscription\",e)}}}]),e}(),at=function(){function e(t){Pe(this,e),this.userId=t.userId,this.hooks=t.hooks,this.instance=t.instance,this.userStore=t.userStore,this.roomStore=t.roomStore,this.presenceStore=t.presenceStore,this.logger=t.logger,this.connectionTimeout=t.connectionTimeout,this.connect=this.connect.bind(this),this.cancel=this.cancel.bind(this),this.onEvent=this.onEvent.bind(this),this.onPresenceState=this.onPresenceState.bind(this)}return Oe(e,[{key:\"connect\",value:function(){var e=this;return new Promise(function(t,n){e.timeout=setTimeout(function(){n(new Error(\"user presence subscription timed out\"))},e.connectionTimeout),e.onSubscriptionEstablished=function(){clearTimeout(e.timeout),t()},e.sub=e.instance.subscribeNonResuming({path:\"/users/\"+encodeURIComponent(e.userId),listeners:{onError:function(t){clearTimeout(e.timeout),n(t)},onEvent:e.onEvent}})})}},{key:\"cancel\",value:function(){clearTimeout(this.timeout);try{this.sub&&this.sub.unsubscribe()}catch(e){this.logger.debug(\"error when cancelling user presence subscription\",e)}}},{key:\"onEvent\",value:function(e){var t=e.body;switch(t.event_name){case\"presence_state\":this.onPresenceState(t.data)}}},{key:\"onPresenceState\",value:function(e){var t=this;this.onSubscriptionEstablished();var n=this.presenceStore[this.userId]||\"unknown\",r=function(e){return{state:[\"online\",\"offline\"].includes(e.state)?e.state:\"unknown\"}}(e).state;r!==n&&(this.presenceStore[this.userId]=r,this.userStore.get(this.userId).then(function(e){t.hooks.global.onPresenceChanged&&t.hooks.global.onPresenceChanged({current:r,previous:n},e),Y(fe(function(o){var i=Ce(o,2),s=i[0],a=i[1];return t.roomStore.get(s).then(function(t){le(e.id,t.userIds)&&a.onPresenceChanged({current:r,previous:n},e)})}),ce(function(e){return void 0!==e[1].onPresenceChanged}),Re)(t.hooks.rooms)}))}}]),e}(),ut=function(){function e(t){Pe(this,e),this.onNewCursorHook=t.onNewCursorHook,this.roomId=t.roomId,this.cursorStore=t.cursorStore,this.instance=t.instance,this.logger=t.logger,this.connectionTimeout=t.connectionTimeout,this.connect=this.connect.bind(this),this.cancel=this.cancel.bind(this),this.onEvent=this.onEvent.bind(this),this.onInitialState=this.onInitialState.bind(this),this.onNewCursor=this.onNewCursor.bind(this)}return Oe(e,[{key:\"connect\",value:function(){var e=this;return new Promise(function(t,n){e.timeout=setTimeout(function(){n(new Error(\"cursor subscription timed out\"))},e.connectionTimeout),e.onSubscriptionEstablished=function(n){clearTimeout(e.timeout),t(n)},e.sub=e.instance.subscribeNonResuming({path:\"/cursors/0/rooms/\"+encodeURIComponent(e.roomId),listeners:{onError:function(t){clearTimeout(e.timeout),n(t)},onEvent:e.onEvent}})})}},{key:\"cancel\",value:function(){clearTimeout(this.timeout);try{this.sub&&this.sub.unsubscribe()}catch(e){this.logger.debug(\"error when cancelling cursor subscription\",e)}}},{key:\"onEvent\",value:function(e){var t=e.body;switch(t.event_name){case\"initial_state\":this.onInitialState(t.data);break;case\"new_cursor\":this.onNewCursor(t.data)}}},{key:\"onInitialState\",value:function(e){var t=this,n=e.cursors.map(function(e){return Fe(e)});this.established?ot({basicCursors:n,cursorStore:this.cursorStore,onNewCursorHook:this.onNewCursorHook}):(this.established=!0,Promise.all(n.map(function(e){return t.cursorStore.set(e)})).then(this.onSubscriptionEstablished))}},{key:\"onNewCursor\",value:function(e){var t=this;return this.cursorStore.set(Fe(e)).then(function(e){return t.onNewCursorHook(e)})}}]),e}(),ct=function(){function e(t,n,r){Pe(this,e),this.type=t.type,this.name=t.name,this.size=t.size,void 0!==t.customData&&(this.customData=t.customData),this._id=t._id,this._downloadURL=t._downloadURL,this._expiration=t._expiration,this._roomId=n,this._instance=r,this.url=this.url.bind(this),this.urlExpiry=this.urlExpiry.bind(this),this._fetchNewDownloadURL=this._fetchNewDownloadURL.bind(this)}return Oe(e,[{key:\"url\",value:function(){return this.urlExpiry().getTime()-Date.now()<18e5?this._fetchNewDownloadURL():Promise.resolve(this._downloadURL)}},{key:\"urlExpiry\",value:function(){return this._expiration}},{key:\"_fetchNewDownloadURL\",value:function(){var e=this;return this._instance.request({method:\"GET\",path:\"rooms/\"+encodeURIComponent(this._roomId)+\"/attachments/\"+this._id}).then(function(t){var n=JSON.parse(t),r=n.download_url,o=n.expiration;return e._downloadURL=r,e._expiration=new Date(o),e._downloadURL})}}]),e}(),ht=function(){function e(t,n,r,o){var i=this;Pe(this,e),this.id=t.id,this.senderId=t.senderId,this.roomId=t.roomId,this.createdAt=t.createdAt,this.updatedAt=t.updatedAt,this.deletedAt=t.deletedAt,t.parts?this.parts=t.parts.map(function(e){var t=e.partType,n=e.payload;return\"attachment\"===t?{partType:t,payload:new ct(n,i.roomId,o)}:{partType:t,payload:n}}):(this.text=t.text,t.attachment&&(this.attachment=t.attachment)),this.userStore=n,this.roomStore=r}return Oe(e,[{key:\"sender\",get:function(){return this.userStore.getSync(this.senderId)}},{key:\"room\",get:function(){return this.roomStore.getSync(this.roomId)}}]),e}(),dt=function(){function e(t){Pe(this,e),this.roomId=t.roomId,this.messageLimit=t.messageLimit,this.userId=t.userId,this.instance=t.instance,this.userStore=t.userStore,this.roomStore=t.roomStore,this.typingIndicators=t.typingIndicators,this.messageBuffer=[],this.logger=t.logger,this.connectionTimeout=t.connectionTimeout,this.onMessageHook=t.onMessageHook,this.onMessageDeletedHook=t.onMessageDeletedHook,this.connect=this.connect.bind(this),this.cancel=this.cancel.bind(this),this.onEvent=this.onEvent.bind(this),this.onMessage=this.onMessage.bind(this),this.onMessageDeleted=this.onMessageDeleted.bind(this),this.flushBuffer=this.flushBuffer.bind(this),this.onIsTyping=this.onIsTyping.bind(this)}return Oe(e,[{key:\"connect\",value:function(){var e=this;return new Promise(function(t,n){e.timeout=setTimeout(function(){n(new Error(\"message subscription timed out\"))},e.connectionTimeout),e.sub=e.instance.subscribeResuming({path:\"/rooms/\"+encodeURIComponent(e.roomId)+\"?\"+Ae({message_limit:e.messageLimit}),listeners:{onOpen:function(){clearTimeout(e.timeout),t()},onError:function(t){clearTimeout(e.timeout),n(t)},onEvent:e.onEvent}})})}},{key:\"cancel\",value:function(){clearTimeout(this.timeout);try{this.sub&&this.sub.unsubscribe()}catch(e){this.logger.debug(\"error when cancelling message subscription\",e)}}},{key:\"onEvent\",value:function(e){var t=e.body;switch(t.event_name){case\"new_message\":this.onMessage(t.data);break;case\"message_deleted\":this.onMessageDeleted(t.data);break;case\"is_typing\":this.onIsTyping(t.data)}}},{key:\"onMessage\",value:function(e){var t=this,n={message:new ht(Ve(e),this.userStore,this.roomStore,this.instance),ready:!1};this.messageBuffer.push(n),this.userStore.fetchMissingUser(n.message.senderId).catch(function(e){t.logger.error(\"error fetching missing user information:\",e)}).then(function(){n.ready=!0,t.flushBuffer()})}},{key:\"onMessageDeleted\",value:function(e){this.onMessageDeletedHook(e.message_id)}},{key:\"flushBuffer\",value:function(){for(;this.messageBuffer.length>0&&this.messageBuffer[0].ready;)this.onMessageHook(this.messageBuffer.shift().message)}},{key:\"onIsTyping\",value:function(e){var t=this,n=e.user_id;n!==this.userId&&Promise.all([this.roomStore.get(this.roomId),this.userStore.get(n)]).then(function(e){var n=Ce(e,2),r=n[0],o=n[1];return t.typingIndicators.onIsTyping(r,o)})}}]),e}(),lt=function(){function e(t){Pe(this,e),this.roomId=t.roomId,this.instance=t.instance,this.userStore=t.userStore,this.roomStore=t.roomStore,this.logger=t.logger,this.connectionTimeout=t.connectionTimeout,this.onUserJoinedRoomHook=t.onUserJoinedRoomHook,this.onUserLeftRoomHook=t.onUserLeftRoomHook,this.connect=this.connect.bind(this),this.cancel=this.cancel.bind(this),this.onEvent=this.onEvent.bind(this),this.onInitialState=this.onInitialState.bind(this),this.onUserJoined=this.onUserJoined.bind(this),this.onUserLeft=this.onUserLeft.bind(this)}return Oe(e,[{key:\"connect\",value:function(){var e=this;return new Promise(function(t,n){e.timeout=setTimeout(function(){n(new Error(\"membership subscription timed out\"))},e.connectionTimeout),e.onSubscriptionEstablished=function(n){clearTimeout(e.timeout),t(n)},e.sub=e.instance.subscribeNonResuming({path:\"/rooms/\"+encodeURIComponent(e.roomId)+\"/memberships\",listeners:{onError:function(t){clearTimeout(e.timeout),n(t)},onEvent:e.onEvent}})})}},{key:\"cancel\",value:function(){clearTimeout(this.timeout);try{this.sub&&this.sub.unsubscribe()}catch(e){this.logger.debug(\"error when cancelling membership subscription\",e)}}},{key:\"onEvent\",value:function(e){var t=e.body;switch(t.event_name){case\"initial_state\":this.onInitialState(t.data);break;case\"user_joined\":this.onUserJoined(t.data);break;case\"user_left\":this.onUserLeft(t.data)}}},{key:\"onInitialState\",value:function(e){var t=this,n=e.user_ids;this.established?function(e){var t=e.userIds,n=e.roomId,r=e.roomStore,o=e.userStore,i=e.onUserJoinedRoomHook,s=e.onUserLeftRoomHook;o.fetchMissingUsers(t).then(function(){var e=r.getSync(n);return t.filter(function(t){return!e.userIds.includes(t)}).forEach(function(t){return o.get(t).then(function(t){return i(e,t)})}),e.userIds.filter(function(e){return!t.includes(e)}).forEach(function(t){return o.get(t).then(function(t){return s(e,t)})}),r.update(n,{userIds:t})})}({userIds:n,roomId:this.roomId,roomStore:this.roomStore,userStore:this.userStore,onUserJoinedRoomHook:this.onUserJoinedRoomHook,onUserLeftRoomHook:this.onUserLeftRoomHook}):(this.established=!0,this.roomStore.update(this.roomId,{userIds:n}).then(function(){t.onSubscriptionEstablished()}))}},{key:\"onUserJoined\",value:function(e){var t=this,n=e.user_id;this.roomStore.addUserToRoom(this.roomId,n).then(function(e){return t.userStore.get(n).then(function(n){return t.onUserJoinedRoomHook(e,n)})})}},{key:\"onUserLeft\",value:function(e){var t=this,n=e.user_id;this.roomStore.removeUserFromRoom(this.roomId,n).then(function(e){return t.userStore.get(n).then(function(n){return t.onUserLeftRoomHook(e,n)})})}}]),e}(),ft=function(){function e(t){Pe(this,e),this.buffer=[],this.messageSub=new dt({roomId:t.roomId,messageLimit:t.messageLimit,userId:t.userId,instance:t.serverInstance,userStore:t.userStore,roomStore:t.roomStore,typingIndicators:t.typingIndicators,logger:t.logger,connectionTimeout:t.connectionTimeout,onMessageHook:this.bufferWhileConnecting(function(e){t.hooks.rooms[t.roomId]&&t.hooks.rooms[t.roomId].onMessage&&t.hooks.rooms[t.roomId].onMessage(e)}),onMessageDeletedHook:this.bufferWhileConnecting(function(e){t.hooks.rooms[t.roomId]&&t.hooks.rooms[t.roomId].onMessageDeleted&&t.hooks.rooms[t.roomId].onMessageDeleted(e)})}),this.cursorSub=new ut({roomId:t.roomId,cursorStore:t.cursorStore,instance:t.cursorsInstance,logger:t.logger,connectionTimeout:t.connectionTimeout,onNewCursorHook:this.bufferWhileConnecting(function(e){t.hooks.rooms[t.roomId]&&t.hooks.rooms[t.roomId].onNewReadCursor&&0===e.type&&e.userId!==t.userId&&t.hooks.rooms[t.roomId].onNewReadCursor(e)})}),this.membershipSub=new lt({roomId:t.roomId,instance:t.serverInstance,userStore:t.userStore,roomStore:t.roomStore,logger:t.logger,connectionTimeout:t.connectionTimeout,onUserJoinedRoomHook:this.bufferWhileConnecting(function(e,n){t.hooks.global.onUserJoinedRoom&&t.hooks.global.onUserJoinedRoom(e,n),t.hooks.rooms[e.id]&&t.hooks.rooms[e.id].onUserJoined&&t.hooks.rooms[e.id].onUserJoined(n)}),onUserLeftRoomHook:this.bufferWhileConnecting(function(e,n){t.hooks.global.onUserLeftRoom&&t.hooks.global.onUserLeftRoom(e,n),t.hooks.rooms[e.id]&&t.hooks.rooms[e.id].onUserLeft&&t.hooks.rooms[e.id].onUserLeft(n)})})}return Oe(e,[{key:\"connect\",value:function(){var e=this;return this.cancelled?Promise.reject(new Error(\"attempt to connect a cancelled room subscription\")):Promise.all([this.messageSub.connect(),this.cursorSub.connect(),this.membershipSub.connect()]).then(function(){return e.flushBuffer()})}},{key:\"cancel\",value:function(){this.cancelled=!0,this.messageSub.cancel(),this.cursorSub.cancel(),this.membershipSub.cancel()}},{key:\"bufferWhileConnecting\",value:function(e){var t=this;return function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];t.connected?e.apply(void 0,r):t.buffer.push(e.bind.apply(e,[t].concat(r)))}}},{key:\"flushBuffer\",value:function(){this.connected=!0,this.buffer.forEach(function(e){return e()}),delete this.buffer}}]),e}(),pt=function(){function e(t){Pe(this,e),this.onNotificationHook=t.onNotificationHook,this.userId=t.userId,this.instance=t.instance,this.logger=t.logger,this.connectionTimeout=t.connectionTimeout,this.connect=this.connect.bind(this),this.cancel=this.cancel.bind(this),this.onEvent=this.onEvent.bind(this),this.onNotification=this.onNotification.bind(this)}return Oe(e,[{key:\"connect\",value:function(){var e=this;return new Promise(function(t,n){e.timeout=setTimeout(function(){n(new Error(\"notification subscription timed out\"))},e.connectionTimeout),e.sub=e.instance.subscribeNonResuming({path:\"/users/\"+encodeURIComponent(e.userId),listeners:{onOpen:function(){clearTimeout(e.timeout),t()},onError:function(t){clearTimeout(e.timeout),n(t)},onEvent:e.onEvent}})})}},{key:\"cancel\",value:function(){clearTimeout(this.timeout);try{this.sub&&this.sub.unsubscribe()}catch(e){this.logger.debug(\"error when cancelling notification subscription\",e)}}},{key:\"onEvent\",value:function(e){var t=e.body;switch(t.event_name){case\"push_notification\":this.onNotification(t.data)}}},{key:\"onNotification\",value:function(e){this.onNotificationHook(e)}}]),e}();var gt=function(){function e(t){var n=this,r=t.serverInstanceV2,o=t.serverInstanceV6,i=t.connectionTimeout,s=t.cursorsInstance,a=t.filesInstance,u=t.hooks,c=t.id,h=t.presenceInstance,d=t.beamsTokenProviderInstance,l=t.pushNotificationsInstance,f=t.beamsInstanceInitFn;Pe(this,e),this.hooks={global:u,rooms:{}},this.id=c,this.encodedId=encodeURIComponent(this.id),this.serverInstanceV2=r,this.serverInstanceV6=o,this.filesInstance=a,this.cursorsInstance=s,this.connectionTimeout=i,this.presenceInstance=h,this.beamsTokenProviderInstance=d,this.pushNotificationsInstance=l,this.beamsInstanceInitFn=f,this.logger=o.logger,this.presenceStore={},this.userStore=new Ye({instance:this.serverInstanceV6,presenceStore:this.presenceStore,logger:this.logger}),this.roomStore=new Qe({instance:this.serverInstanceV6,userStore:this.userStore,isSubscribedTo:function(e){return n.isSubscribedTo(e)},logger:this.logger}),this.cursorStore=new tt({instance:this.cursorsInstance,userStore:this.userStore,roomStore:this.roomStore,logger:this.logger}),this.typingIndicators=new rt({hooks:this.hooks,instance:this.serverInstanceV6,logger:this.logger}),this.userStore.onSetHooks.push(function(e){return n.subscribeToUserPresence(e)}),this.roomSubscriptions={},this.readCursorBuffer={},this.userPresenceSubscriptions={},this.setReadCursor=this.setReadCursor.bind(this),this.readCursor=this.readCursor.bind(this),this.isTypingIn=this.isTypingIn.bind(this),this.createRoom=this.createRoom.bind(this),this.getJoinableRooms=this.getJoinableRooms.bind(this),this.joinRoom=this.joinRoom.bind(this),this.leaveRoom=this.leaveRoom.bind(this),this.addUserToRoom=this.addUserToRoom.bind(this),this.removeUserFromRoom=this.removeUserFromRoom.bind(this),this.sendMessage=this.sendMessage.bind(this),this.sendSimpleMessage=this.sendSimpleMessage.bind(this),this.sendMultipartMessage=this.sendMultipartMessage.bind(this),this.fetchMessages=this.fetchMessages.bind(this),this.fetchMultipartMessages=this.fetchMultipartMessages.bind(this),this.subscribeToRoom=this.subscribeToRoom.bind(this),this.subscribeToRoomMultipart=this.subscribeToRoomMultipart.bind(this),this.updateRoom=this.updateRoom.bind(this),this.deleteRoom=this.deleteRoom.bind(this),this.setReadCursorRequest=this.setReadCursorRequest.bind(this),this.uploadDataAttachment=this.uploadDataAttachment.bind(this),this.isMemberOf=this.isMemberOf.bind(this),this.isSubscribedTo=this.isSubscribedTo.bind(this),this.decorateMessage=this.decorateMessage.bind(this),this.setPropertiesFromBasicUser=this.setPropertiesFromBasicUser.bind(this),this.establishUserSubscription=this.establishUserSubscription.bind(this),this.establishPresenceSubscription=this.establishPresenceSubscription.bind(this),this.subscribeToUserPresence=this.subscribeToUserPresence.bind(this),this.disconnect=this.disconnect.bind(this),this._uploadAttachment=this._uploadAttachment.bind(this)}return Oe(e,[{key:\"setReadCursor\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.roomId,r=t.position;return De(\"roomId\",\"string\",n),De(\"position\",\"number\",r),new Promise(function(t,o){void 0!==e.readCursorBuffer[n]?(e.readCursorBuffer[n].position=b(e.readCursorBuffer[n].position,r),e.readCursorBuffer[n].callbacks.push({resolve:t,reject:o})):(e.readCursorBuffer[n]={position:r,callbacks:[{resolve:t,reject:o}]},setTimeout(function(){e.setReadCursorRequest(Ne({roomId:n},e.readCursorBuffer[n])),delete e.readCursorBuffer[n]},500))})}},{key:\"readCursor\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.roomId,n=e.userId,r=void 0===n?this.id:n;if(De(\"roomId\",\"string\",t),De(\"userId\",\"string\",r),r!==this.id&&!this.isSubscribedTo(t)){var o=new Error(\"Must be subscribed to room \"+t+\" to access member's read cursors\");throw this.logger.error(o),o}return this.cursorStore.getSync(r,t)}},{key:\"isTypingIn\",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).roomId;return De(\"roomId\",\"string\",e),this.typingIndicators.sendThrottledRequest(e)}},{key:\"createRoom\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,r=t.name,o=t.pushNotificationTitleOverride,i=t.addUserIds,s=t.customData,a=Ue(t,[\"id\",\"name\",\"pushNotificationTitleOverride\",\"addUserIds\",\"customData\"]);return n&&De(\"id\",\"string\",n),r&&De(\"name\",\"string\",r),o&&De(\"pushNotificationTitleOverride\",\"string\",o),i&&je(\"addUserIds\",\"string\",i),s&&De(\"customData\",\"object\",s),this.serverInstanceV6.request({method:\"POST\",path:\"/rooms\",json:{id:n,created_by_id:this.id,name:r,push_notification_title_override:o,private:!!a.private,user_ids:i,custom_data:s}}).then(function(t){return e.roomStore.set(Be(JSON.parse(t)))}).catch(function(t){throw e.logger.warn(\"error creating room:\",t),t})}},{key:\"getJoinableRooms\",value:function(){var e=this;return this.serverInstanceV6.request({method:\"GET\",path:\"/users/\"+this.encodedId+\"/rooms?joinable=true\"}).then(X(JSON.parse,L(Be))).catch(function(t){throw e.logger.warn(\"error getting joinable rooms:\",t),t})}},{key:\"joinRoom\",value:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).roomId;return De(\"roomId\",\"string\",t),this.isMemberOf(t)?this.roomStore.get(t):this.serverInstanceV6.request({method:\"POST\",path:\"/users/\"+this.encodedId+\"/rooms/\"+encodeURIComponent(t)+\"/join\"}).then(function(t){return e.roomStore.set(Be(JSON.parse(t)))}).catch(function(n){throw e.logger.warn(\"error joining room \"+t+\":\",n),n})}},{key:\"leaveRoom\",value:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).roomId;return De(\"roomId\",\"string\",t),this.roomStore.get(t).then(function(n){return e.serverInstanceV6.request({method:\"POST\",path:\"/users/\"+e.encodedId+\"/rooms/\"+encodeURIComponent(t)+\"/leave\"}).then(function(){return n})}).catch(function(n){throw e.logger.warn(\"error leaving room \"+t+\":\",n),n})}},{key:\"addUserToRoom\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.userId,r=t.roomId;return De(\"userId\",\"string\",n),De(\"roomId\",\"string\",r),this.serverInstanceV6.request({method:\"PUT\",path:\"/rooms/\"+encodeURIComponent(r)+\"/users/add\",json:{user_ids:[n]}}).then(function(){return e.roomStore.addUserToRoom(r,n)}).catch(function(t){throw e.logger.warn(\"error adding user \"+n+\" to room \"+r+\":\",t),t})}},{key:\"removeUserFromRoom\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.userId,r=t.roomId;return De(\"userId\",\"string\",n),De(\"roomId\",\"string\",r),this.serverInstanceV6.request({method:\"PUT\",path:\"/rooms/\"+encodeURIComponent(r)+\"/users/remove\",json:{user_ids:[n]}}).then(function(){return e.roomStore.removeUserFromRoom(r,n)}).catch(function(t){throw e.logger.warn(\"error removing user \"+n+\" from room \"+r+\":\",t),t})}},{key:\"sendMessage\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.text,r=t.roomId,o=t.attachment;return De(\"text\",\"string\",n),De(\"roomId\",\"string\",r),new Promise(function(t,n){void 0!==o&&mt(o)?t(e.uploadDataAttachment(r,o)):void 0!==o&&vt(o)?t({resource_link:o.link,type:o.type}):void 0!==o?n(new TypeError(\"attachment was malformed\")):t()}).then(function(t){return e.serverInstanceV2.request({method:\"POST\",path:\"/rooms/\"+encodeURIComponent(r)+\"/messages\",json:{text:n,attachment:t}})}).then(X(JSON.parse,B(\"message_id\"))).catch(function(t){throw e.logger.warn(\"error sending message to room \"+r+\":\",t),t})}},{key:\"sendSimpleMessage\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.roomId,n=e.text;return this.sendMultipartMessage({roomId:t,parts:[{type:\"text/plain\",content:n}]})}},{key:\"sendMultipartMessage\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.roomId,r=t.parts;return De(\"roomId\",\"string\",n),je(\"parts\",\"object\",r),0===r.length?Promise.reject(new TypeError(\"message must contain at least one part\")):Promise.all(r.map(function(t){return t.type=t.type||t.file&&t.file.type,De(\"part.type\",\"string\",t.type),t.content&&De(\"part.content\",\"string\",t.content),t.url&&De(\"part.url\",\"string\",t.url),t.name&&De(\"part.name\",\"string\",t.name),t.file&&De(\"part.file.size\",\"number\",t.file.size),t.file?e._uploadAttachment({roomId:n,part:t}):t})).then(function(t){return e.serverInstanceV6.request({method:\"POST\",path:\"/rooms/\"+encodeURIComponent(n)+\"/messages\",json:{parts:t.map(function(e){return{type:e.type,content:e.content,url:e.url,attachment:e.attachment}})}})}).then(function(e){return JSON.parse(e).message_id}).catch(function(t){throw e.logger.warn(\"error sending message to room \"+n+\":\",t),t})}},{key:\"fetchMessages\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.roomId,r=t.initialId,o=t.limit,i=t.direction,s=t.serverInstance;return De(\"roomId\",\"string\",n),r&&De(\"initialId\",\"number\",r),o&&De(\"limit\",\"number\",o),i&&function(e,t,n){if(!le(n,t))throw new TypeError(\"expected \"+e+\" to be one of \"+t+\" but was \"+n)}(\"direction\",[\"older\",\"newer\"],i),(s||this.serverInstanceV2).request({method:\"GET\",path:\"/rooms/\"+encodeURIComponent(n)+\"/messages?\"+Ae({initial_id:r,limit:o,direction:i})}).then(function(t){var n=JSON.parse(t).map(function(t){return e.decorateMessage(Ve(t))});return e.userStore.fetchMissingUsers(Se(L(B(\"senderId\"),n))).then(function(){return ke(function(e,t){return e.id-t.id},n)})}).catch(function(t){throw e.logger.warn(\"error fetching messages from room \"+n+\":\",t),t})}},{key:\"fetchMultipartMessages\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetchMessages(Ne({},e,{serverInstance:this.serverInstanceV6}))}},{key:\"subscribeToRoom\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.roomId,r=t.hooks,o=void 0===r?{}:r,i=t.messageLimit,s=t.serverInstance;De(\"roomId\",\"string\",n),xe(\"hooks\",\"function\",o),!s&&o.onMessageDeleted&&this.logger.warn(\"`subscribeToRoom` does not support the `onMessageDeleted` hook. Please use `subscribeToRoomMultipart` instead.\"),i&&De(\"messageLimit\",\"number\",i),this.roomSubscriptions[n]&&this.roomSubscriptions[n].cancel(),this.hooks.rooms[n]=o;var a=new ft({serverInstance:s||this.serverInstanceV2,connectionTimeout:this.connectionTimeout,cursorStore:this.cursorStore,cursorsInstance:this.cursorsInstance,hooks:this.hooks,logger:this.logger,messageLimit:i,roomId:n,roomStore:this.roomStore,typingIndicators:this.typingIndicators,userId:this.id,userStore:this.userStore});return this.roomSubscriptions[n]=a,this.joinRoom({roomId:n}).then(function(e){return a.connect().then(function(){return e})}).catch(function(t){throw e.logger.warn(\"error subscribing to room \"+n+\":\",t),t})}},{key:\"subscribeToRoomMultipart\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.subscribeToRoom(Ne({},e,{serverInstance:this.serverInstanceV6}))}},{key:\"updateRoom\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.roomId,r=t.name,o=t.pushNotificationTitleOverride,i=t.customData,s=Ue(t,[\"roomId\",\"name\",\"pushNotificationTitleOverride\",\"customData\"]);return De(\"roomId\",\"string\",n),r&&De(\"name\",\"string\",r),o&&De(\"pushNotificationTitleOverride\",\"string\",o),s.private&&De(\"private\",\"boolean\",s.private),i&&De(\"customData\",\"object\",i),this.serverInstanceV6.request({method:\"PUT\",path:\"/rooms/\"+encodeURIComponent(n),json:{name:r,push_notification_title_override:o,private:s.private,custom_data:i}}).then(function(){}).catch(function(t){throw e.logger.warn(\"error updating room:\",t),t})}},{key:\"deleteRoom\",value:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).roomId;return De(\"roomId\",\"string\",t),this.serverInstanceV2.request({method:\"DELETE\",path:\"/rooms/\"+encodeURIComponent(t)}).then(function(){}).catch(function(t){throw e.logger.warn(\"error deleting room:\",t),t})}},{key:\"setReadCursorRequest\",value:function(e){var t=this,n=e.roomId,r=e.position,o=e.callbacks;return this.cursorsInstance.request({method:\"PUT\",path:\"/cursors/0/rooms/\"+encodeURIComponent(n)+\"/users/\"+this.encodedId,json:{position:r}}).then(function(){return L(function(e){return e.resolve()},o)}).catch(function(e){t.logger.warn(\"error setting cursor:\",e),L(function(t){return t.reject(e)},o)})}},{key:\"uploadDataAttachment\",value:function(e,t){var n=t.file,r=t.name,o=new FormData;return o.append(\"file\",n,r),this.filesInstance.request({method:\"POST\",path:\"/rooms/\"+encodeURIComponent(e)+\"/users/\"+this.encodedId+\"/files/\"+encodeURIComponent(r),body:o}).then(JSON.parse)}},{key:\"_uploadAttachment\",value:function(e){var t=e.roomId,n=e.part,r=n.type,o=n.name,i=n.customData,a=n.file;return this.serverInstanceV6.request({method:\"POST\",path:\"/rooms/\"+encodeURIComponent(t)+\"/attachments\",json:{content_type:r,content_length:a.size,name:o||a.name,custom_data:i}}).then(function(e){var t=JSON.parse(e),n=t.attachment_id,o=t.upload_url;return s({method:\"PUT\",url:o,body:a,headers:{\"content-type\":r}}).then(function(){return{type:r,attachment:{id:n}}})})}},{key:\"isMemberOf\",value:function(e){return le(e,L(B(\"id\"),this.rooms))}},{key:\"isSubscribedTo\",value:function(e){return ge(e,this.roomSubscriptions)}},{key:\"decorateMessage\",value:function(e){return new ht(e,this.userStore,this.roomStore,this.serverInstanceV6)}},{key:\"setPropertiesFromBasicUser\",value:function(e){this.avatarURL=e.avatarURL,this.createdAt=e.createdAt,this.customData=e.customData,this.name=e.name,this.updatedAt=e.updatedAt}},{key:\"establishUserSubscription\",value:function(){var e=this;return this.userSubscription=new it({hooks:this.hooks,userId:this.id,instance:this.serverInstanceV6,roomStore:this.roomStore,cursorStore:this.cursorStore,typingIndicators:this.typingIndicators,logger:this.logger,connectionTimeout:this.connectionTimeout,currentUser:this}),this.userSubscription.connect().then(function(t){var n=t.basicUser,r=t.basicRooms,o=t.basicCursors;return e.setPropertiesFromBasicUser(n),Promise.all([].concat(Me(r.map(function(t){return e.roomStore.set(t)})),Me(o.map(function(t){return e.cursorStore.set(t)}))))}).catch(function(t){throw e.logger.error(\"error establishing user subscription:\",t),t})}},{key:\"establishPresenceSubscription\",value:function(){var e=this;return this.presenceSubscription=new st({userId:this.id,instance:this.presenceInstance,logger:this.logger,connectionTimeout:this.connectionTimeout}),Promise.all([this.userStore.fetchMissingUser(this.id),this.subscribeToUserPresence(this.id),this.presenceSubscription.connect().catch(function(t){throw e.logger.warn(\"error establishing presence subscription:\",t),t})])}},{key:\"subscribeToUserPresence\",value:function(e){if(this.userPresenceSubscriptions[e])return Promise.resolve();var t=new at({hooks:this.hooks,userId:e,instance:this.presenceInstance,userStore:this.userStore,roomStore:this.roomStore,presenceStore:this.presenceStore,logger:this.logger,connectionTimeout:this.connectionTimeout});return this.userPresenceSubscriptions[e]=t,t.connect()}},{key:\"enablePushNotifications\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.onClick,r=t.serviceWorkerRegistration,o=t.showNotificationsTabOpen,i=void 0===o||o,s=t.showNotificationsTabClosed,a=void 0===s||s,u=t._Notification,c=void 0===u?Notification:u,h=t._visibilityStateOverride;try{if(n&&De(\"onClick\",\"function\",n),De(\"showNotificationsTabOpen\",\"boolean\",i),De(\"showNotificationsTabClosed\",\"boolean\",a),!this._hasPermissionToSendNotifications())return Promise.reject(\"Failed to get permission to send notifications\");var d=[];return i&&d.push(this._enableTabOpenNotifications({onClick:n,Notification:c,visibilityStateOverride:h})),a?d.push(this._enableTabClosedNotifications(r)):d.push(this._disableTabClosedNotifications()),Promise.all(d).catch(function(t){return e.logger.warn(\"Chatkit error when enabling push notifications:\",t),Promise.reject(\"Chatkit error when enabling push notifications: \"+t)})}catch(e){return this.logger.warn(\"Chatkit error when enabling push notifications:\",e),Promise.reject(\"Chatkit error when enabling push notifications: \"+e)}}},{key:\"disablePushNotifications\",value:function(){var e=this;return this._disableTabClosedNotifications().then(function(){return e._disableTabOpenNotifications()})}},{key:\"_hasPermissionToSendNotifications\",value:function(){return Notification.requestPermission().then(function(e){return\"granted\"===e})}},{key:\"_enableTabOpenNotifications\",value:function(e){var t=e.onClick,n=e.Notification,r=e.visibilityStateOverride,o=new pt({onNotificationHook:function(e){return function(e){var t=e.notification,n=e.data,r=e.onClick,o=e.Notification;\"hidden\"===(e.visibilityStateOverride||document.visibilityState)&&(new o(t.title||\"\",{body:t.body||\"\",icon:t.icon,data:Object.assign(n,{pusher:{deep_link:t.deep_link}})}).onclick=function(e){e.preventDefault(),window.focus(),r&&r(e.target.data.chatkit),e.target.close()})}({notification:e.notification,data:e.data,onClick:t,Notification:n,visibilityStateOverride:r})},userId:this.id,instance:this.pushNotificationsInstance,logger:this.logger,connectionTimeout:this.connectionTimeout});return this.notificationSubscription=o,o.connect()}},{key:\"_disableTabOpenNotifications\",value:function(){this.notificationSubscription.cancel()}},{key:\"_enableTabClosedNotifications\",value:function(e){var t=this,n=function(e){return t.beamsTokenProviderInstance.request({method:\"GET\",path:\"/beams-tokens?user_id=\"+encodeURIComponent(e)}).then(JSON.parse).catch(function(e){return Promise.reject(\"Internal error: \"+e.statusCode+\" status code, info: \"+e.info.error_description)})};return this.beamsInstanceInitFn({serviceWorkerRegistration:e}).then(function(e){return e.start()}).then(function(e){return e.setUserId(t.id,{fetchToken:n})})}},{key:\"_disableTabClosedNotifications\",value:function(){return this.beamsInstanceInitFn().then(function(e){return e.stop()})}},{key:\"disconnect\",value:function(){this.userSubscription.cancel(),this.presenceSubscription.cancel(),this.notificationSubscription&&this.notificationSubscription.cancel(),pe(function(e){return e.cancel()},this.roomSubscriptions),pe(function(e){return e.cancel()},this.userPresenceSubscriptions)}},{key:\"rooms\",get:function(){return F(this.roomStore.snapshot())}},{key:\"users\",get:function(){return F(this.userStore.snapshot())}}]),e}(),mt=function(e){var t=e.file,n=e.name;return void 0!==t&&void 0!==n&&(De(\"attachment.file\",\"object\",t),De(\"attachment.name\",\"string\",n),!0)},vt=function(e){var t=e.link,n=e.type;return void 0!==t&&void 0!==n&&(De(\"attachment.link\",\"string\",t),De(\"attachment.type\",\"string\",n),!0)},bt=\"1.13.3\";function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function St({method:e,path:t,body:n=null,headers:r={}}){const o={method:e,headers:r};return null!==n&&(o.body=JSON.stringify(n),o.headers=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){yt(e,t,n[t])})}return e}({\"Content-Type\":\"application/json\"},r)),fetch(t,o).then(async e=>{e.ok||await async function(e){let t;try{const{error:n=\"Unknown error\",description:r=\"No description\"}=await e.json();t=`Unexpected status code ${e.status}: ${n}, ${r}`}catch(n){t=`Unexpected status code ${e.status}: Cannot parse error response`}throw new Error(t)}(e);try{return await e.json()}catch(e){return null}})}class wt{constructor(e){this._instanceId=e,this._dbConn=null}get _dbName(){return`beams-${this._instanceId}`}get isConnected(){return null!==this._dbConn}connect(){return new Promise((e,t)=>{const n=indexedDB.open(this._dbName);n.onsuccess=(t=>{const n=t.target.result;this._dbConn=n,this._readState().then(e=>null===e?this.clear():Promise.resolve()).then(e)}),n.onupgradeneeded=(e=>{e.target.result.createObjectStore(\"beams\",{keyPath:\"instance_id\"})}),n.onerror=(e=>{const n=new Error(`Database error: ${e.target.error}`);t(n)})})}clear(){return this._writeState({instance_id:this._instanceId,device_id:null,token:null,user_id:null})}_readState(){if(!this.isConnected)throw new Error(\"Cannot read value: DeviceStateStore not connected to IndexedDB\");return new Promise((e,t)=>{const n=this._dbConn.transaction(\"beams\").objectStore(\"beams\").get(this._instanceId);n.onsuccess=(t=>{const n=t.target.result;n||e(null),e(n)}),n.onerror=(e=>{t(e.target.error)})})}async _readProperty(e){const t=await this._readState();return null===t?null:t[e]||null}_writeState(e){if(!this.isConnected)throw new Error(\"Cannot write value: DeviceStateStore not connected to IndexedDB\");return new Promise((t,n)=>{const r=this._dbConn.transaction(\"beams\",\"readwrite\").objectStore(\"beams\").put(e);r.onsuccess=(e=>{t()}),r.onerror=(e=>{n(e.target.error)})})}async _writeProperty(e,t){const n=await this._readState();n[e]=t,await this._writeState(n)}getToken(){return this._readProperty(\"token\")}setToken(e){return this._writeProperty(\"token\",e)}getDeviceId(){return this._readProperty(\"device_id\")}setDeviceId(e){return this._writeProperty(\"device_id\",e)}getUserId(){return this._readProperty(\"user_id\")}setUserId(e){return this._writeProperty(\"user_id\",e)}getLastSeenSdkVersion(){return this._readProperty(\"last_seen_sdk_version\")}setLastSeenSdkVersion(e){return this._writeProperty(\"last_seen_sdk_version\",e)}getLastSeenUserAgent(){return this._readProperty(\"last_seen_user_agent\")}setLastSeenUserAgent(e){return this._writeProperty(\"last_seen_user_agent\",e)}}var It=\"0.9.1\";const kt=`/service-worker.js?pusherBeamsWebSDKVersion=${It}`;class Et{constructor({instanceId:e,deviceId:t,token:n,userId:r,serviceWorkerRegistration:o,deviceStateStore:i,endpointOverride:s=null}){if(this.instanceId=e,this.deviceId=t,this.token=n,this.userId=r,this._deviceStateStore=i,this._endpoint=s,o){const e=o.scope;if(!window.location.href.startsWith(e))throw new Error(`Could not initialize Pusher web push: current page not in serviceWorkerRegistration scope (${e})`)}this._serviceWorkerRegistration=o}get _baseURL(){return null!==this._endpoint?this._endpoint:`https://${this.instanceId}.pushnotifications.pusher.com`}async start(){if(!Rt())return console.warn(\"Pusher Web Push Notifications only supports Google Chrome (whilst in Beta)\"),this;if(null!==this.deviceId)return this;const{vapidPublicKey:e}=await this._getPublicKey(),t=await this._getPushToken(e),n=await this._registerDevice(t);return await this._deviceStateStore.setToken(t),await this._deviceStateStore.setDeviceId(n),await this._deviceStateStore.setLastSeenSdkVersion(It),await this._deviceStateStore.setLastSeenUserAgent(window.navigator.userAgent),this.token=t,this.deviceId=n,this}async setUserId(e,t){if(!Rt())return void console.warn(\"Pusher Web Push Notifications only supports Google Chrome (whilst in Beta)\");if(null===this.deviceId){const e=new Error(\".start must be called before .setUserId\");return Promise.reject(e)}if(\"string\"!=typeof e)throw new Error(`User ID must be a string (was ${e})`);if(\"\"===e)throw new Error(\"User ID cannot be the empty string\");if(null!==this.userId&&this.userId!==e)throw new Error(\"Changing the `userId` is not allowed.\");const n=`${this._baseURL}/device_api/v1/instances/${encodeURIComponent(this.instanceId)}/devices/web/${this.deviceId}/user`,{token:r}=await t.fetchToken(e),o={method:\"PUT\",path:n,headers:{Authorization:`Bearer ${r}`}};return await St(o),this.userId=e,this._deviceStateStore.setUserId(e)}async stop(){Rt()?null!==this.deviceId&&(await this._deleteDevice(),await this._deviceStateStore.clear(),this.deviceId=null,this.token=null,this.userId=null):console.warn(\"Pusher Web Push Notifications only supports Google Chrome (whilst in Beta)\")}async clearAllState(){Rt()?(await this.stop(),await this.start()):console.warn(\"Pusher Web Push Notifications only supports Google Chrome (whilst in Beta)\")}async _getPublicKey(){return St({method:\"GET\",path:`${this._baseURL}/device_api/v1/instances/${encodeURIComponent(this.instanceId)}/web-vapid-public-key`})}async _getPushToken(e){try{let t;if(this._serviceWorkerRegistration)t=this._serviceWorkerRegistration;else{const{status:e}=await fetch(kt);if(200!==e)throw new Error(\"Cannot start SDK, service worker missing: No file found at /service-worker.js\");window.navigator.serviceWorker.register(kt,{updateViaCache:\"none\"}),t=await window.navigator.serviceWorker.ready}const n=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(e){const t=\"=\".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,\"+\").replace(/_/g,\"/\"),r=window.atob(n);return Uint8Array.from([...r].map(e=>e.charCodeAt(0)))}(e)});return btoa(JSON.stringify(n))}catch(e){return Promise.reject(e)}}async _registerDevice(e){const t={method:\"POST\",path:`${this._baseURL}/device_api/v1/instances/${encodeURIComponent(this.instanceId)}/devices/web`,body:{token:e,metadata:{sdkVersion:It}}};return(await St(t)).id}async _deleteDevice(){const e={method:\"DELETE\",path:`${this._baseURL}/device_api/v1/instances/${encodeURIComponent(this.instanceId)}/devices/web/${encodeURIComponent(this.deviceId)}`};await St(e)}async _updateDeviceMetadata(){const e=window.navigator.userAgent,t=await this._deviceStateStore.getLastSeenUserAgent(),n=await this._deviceStateStore.getLastSeenSdkVersion();if(e===t&&It===n)return;const r={method:\"PUT\",path:`${this._baseURL}/device_api/v1/instances/${encodeURIComponent(this.instanceId)}/devices/web/${this.deviceId}/metadata`,body:{sdkVersion:It}};await St(r),await this._deviceStateStore.setLastSeenSdkVersion(It),await this._deviceStateStore.setLastSeenUserAgent(e)}}function Rt(){const e=window.navigator,t=e.vendor,n=null!==window.chrome&&void 0!==window.chrome,r=e.userAgent.indexOf(\"OPR\")>-1,o=e.userAgent.indexOf(\"Edge\")>-1;return n&&\"Google Inc.\"===t&&!o&&!r||r}return{TokenProvider:qe,ChatManager:function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.instanceLocator,s=t.tokenProvider,a=t.userId,u=Ue(t,[\"instanceLocator\",\"tokenProvider\",\"userId\"]);Pe(this,e),De(\"instanceLocator\",\"string\",n),De(\"tokenProvider\",\"object\",s),De(\"tokenProvider.fetchToken\",\"function\",s.fetchToken),De(\"userId\",\"string\",a);var c=Ee(\":\",n),h=Ce(c,3),d=h[0],l=h[1],f=h[2];if(!d||!l||!f)throw new TypeError(\"expected instanceLocator to be of the format x:y:z, but was \"+n);var p=u.baseClient||new r({host:l+\".\"+o,logger:u.logger,sdkProduct:\"chatkit\",sdkLanguage:u.sdkLanguage,sdkVersion:bt});\"function\"==typeof s.setUserId&&s.setUserId(a);var g={client:p,locator:n,logger:u.logger,tokenProvider:s};this.serverInstanceV2=new i(Ne({serviceName:\"chatkit\",serviceVersion:\"v2\"},g)),this.serverInstanceV6=new i(Ne({serviceName:\"chatkit\",serviceVersion:\"v6\"},g)),this.filesInstance=new i(Ne({serviceName:\"chatkit_files\",serviceVersion:\"v1\"},g)),this.cursorsInstance=new i(Ne({serviceName:\"chatkit_cursors\",serviceVersion:\"v2\"},g)),this.presenceInstance=new i(Ne({serviceName:\"chatkit_presence\",serviceVersion:\"v2\"},g)),this.beamsTokenProviderInstance=new i(Ne({serviceName:\"chatkit_beams_token_provider\",serviceVersion:\"v1\"},g)),this.pushNotificationsInstance=new i(Ne({serviceName:\"chatkit_push_notifications\",serviceVersion:\"v1\"},g)),this.beamsInstanceInitFn=u.beamsInstanceInitFn||function(e){return async function(e){if(!e)throw new Error(\"Config object required\");const{instanceId:t,endpointOverride:n=null,serviceWorkerRegistration:r=null}=e;if(void 0===t)throw new Error(\"Instance ID is required\");if(\"string\"!=typeof t)throw new Error(\"Instance ID must be a string\");if(0===t.length)throw new Error(\"Instance ID cannot be empty\");if(!window.indexedDB)throw new Error(\"Pusher Beams does not support this browser version (IndexedDB not supported)\");if(!(\"showNotification\"in ServiceWorkerRegistration.prototype))throw new Error(\"Pusher Beams does not support this browser version (ServiceWorkerRegistration not supported)\");if(!(\"PushManager\"in window))throw new Error(\"Pusher Beams does not support this browser version (PushManager not supported)\");const o=new wt(t);await o.connect();const i=await o.getDeviceId(),s=await o.getToken(),a=await o.getUserId(),u=new Et({instanceId:t,deviceId:i,token:s,userId:a,serviceWorkerRegistration:r,deviceStateStore:o,endpointOverride:n});if(null!==i)try{await u._updateDeviceMetadata()}catch(e){}return u}(Ne({instanceId:f},e))},this.logger=this.serverInstanceV6.logger,this.userId=a,this.connectionTimeout=u.connectionTimeout||Ke,this.connect=this.connect.bind(this),this.disconnect=this.disconnect.bind(this)}return Oe(e,[{key:\"connect\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xe(\"hooks\",\"function\",t);var n=new gt({hooks:t,id:this.userId,serverInstanceV2:this.serverInstanceV2,serverInstanceV6:this.serverInstanceV6,filesInstance:this.filesInstance,cursorsInstance:this.cursorsInstance,presenceInstance:this.presenceInstance,beamsTokenProviderInstance:this.beamsTokenProviderInstance,pushNotificationsInstance:this.pushNotificationsInstance,beamsInstanceInitFn:this.beamsInstanceInitFn,connectionTimeout:this.connectionTimeout});return Promise.all([n.establishUserSubscription(),n.establishPresenceSubscription()]).then(function(){return e.currentUser=n,n})}},{key:\"disconnect\",value:function(){this.currentUser&&this.currentUser.disconnect()}},{key:\"disablePushNotifications\",value:function(){return this.currentUser?this.currentUser.disablePushNotifications().catch(function(e){return Promise.reject(\"Chatkit error when disabling push notifications: \"+e.message)}):Promise.reject(\"Cannot disable notifications until .connect is called\")}}]),e}()}});\n"]},"metadata":{},"sourceType":"script"}