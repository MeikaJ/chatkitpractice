{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.withChatkitOneToOne = withChatkitOneToOne;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _context = require(\"./context\");\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n/**\n * Wraps the given component and injects everything needed to create\n * one-to-one chat experinces under props.chatkit:\n *\n * @param {React.Component} WrappedComponent - Custom React component you would\n *      like to inject the Chatkit data into\n * @return {React.Component} A wrapped version of your component with the Chatkit\n *      SDK injected under props.chatkit\n *\n * @example\n * const MyChatComponent = props => {\n *    // Base Chatkit SDK\n *    props.chatkit.currentUser // Reference to the CurrentUser object\n *    props.chatkit.chatManager // Reference to the ChatManager object\n *\n *    // One-to-one chat data\n *    props.chatkit.otherUser // Reference to a Chatkit.User object for the other user in the chat\n *    props.chatkit.messages // An array of all the messages in the room\n *    props.chatkit.isLoading // True when the room is fully loaded, false otherwise\n *    props.chatkit.sendSimpleMessage // Method which sends a text-only message to the room\n *    props.chatkit.sendMultipartMessage // Method which sends a multi-part Chatkit message to the room\n *    props.chatkit.sendTypingEvent // Method which triggers a typing event for the current user in the current room\n *    props.chatkit.setReadCursor // Method which sets the current user's read cursor to the latest message\n * }\n */\n\n\nfunction withChatkitOneToOne(WrappedComponent) {\n  var WithChatkitOneToOne =\n  /*#__PURE__*/\n  function (_React$Component) {\n    _inherits(WithChatkitOneToOne, _React$Component);\n\n    function WithChatkitOneToOne(props) {\n      var _this;\n\n      _classCallCheck(this, WithChatkitOneToOne);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(WithChatkitOneToOne).call(this, props));\n\n      if (!props.otherUserId) {\n        throw new Error(\"otherUserId prop is required\");\n      }\n\n      _this.state = {\n        otherUser: null,\n        otherUserIsTyping: false,\n        otherUserLastReadMessageId: undefined,\n        messages: [],\n        isLoading: true\n      };\n      _this._currentUserId = null;\n      _this._otherUserId = props.otherUserId;\n      _this._roomId = null;\n      _this._currentUserLastReadMessageId = null;\n      return _this;\n    }\n\n    _createClass(WithChatkitOneToOne, [{\n      key: \"_sendSimpleMessage\",\n      value: function _sendSimpleMessage(_ref) {\n        var text = _ref.text;\n        return this.context.chatkit.currentUser.sendSimpleMessage({\n          roomId: this._roomId,\n          text: text\n        });\n      }\n    }, {\n      key: \"_sendMultipartMessage\",\n      value: function _sendMultipartMessage(_ref2) {\n        var parts = _ref2.parts;\n        return this.context.chatkit.currentUser.sendMultipartMessage({\n          roomId: this._roomId,\n          parts: parts\n        });\n      }\n    }, {\n      key: \"_sendTypingEvent\",\n      value: function _sendTypingEvent() {\n        return this.context.chatkit.currentUser.isTypingIn({\n          roomId: this._roomId\n        });\n      }\n    }, {\n      key: \"_setReadCursor\",\n      value: function _setReadCursor() {\n        if (this.state.messages.length === 0) {\n          return;\n        }\n\n        var lastMessage = this.state.messages[this.state.messages.length - 1];\n\n        if (lastMessage.id === this._currentUserLastReadMessageId) {\n          return;\n        }\n\n        this._currentUserLastReadMessageId = lastMessage.id;\n        return this.context.chatkit.currentUser.setReadCursor({\n          roomId: this._roomId,\n          position: lastMessage.id\n        });\n      }\n    }, {\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this2 = this;\n\n        this.context.addOnLoadListener(function () {\n          _this2._currentUserId = _this2.context.chatkit.currentUser.id;\n          _this2._roomId = (0, _utils.makeOneToOneRoomId)(_this2._currentUserId, _this2._otherUserId);\n\n          var alreadyInRoom = _this2.context.chatkit.currentUser.rooms.some(function (r) {\n            return r.id === _this2._roomId;\n          });\n\n          (alreadyInRoom ? Promise.resolve() : _this2.context.chatkit.currentUser.serverInstanceV6.request({\n            method: \"post\",\n            path: \"/one_to_one_rooms\",\n            json: {\n              user_id: _this2._otherUserId\n            }\n          })).then(function () {\n            return _this2.context.chatkit.currentUser.subscribeToRoomMultipart({\n              roomId: _this2._roomId,\n              hooks: {\n                onMessage: function onMessage(message) {\n                  return _this2.setState(function (state) {\n                    return {\n                      messages: [].concat(_toConsumableArray(state.messages), [message])\n                    };\n                  });\n                },\n                onPresenceChanged: function onPresenceChanged(state, user) {\n                  if (user.id === _this2.props.otherUserId) {\n                    _this2.forceUpdate();\n                  }\n                },\n                onUserStartedTyping: function onUserStartedTyping(user) {\n                  if (user.id === _this2._otherUserId) {\n                    _this2.setState({\n                      otherUserIsTyping: true\n                    });\n                  }\n                },\n                onUserStoppedTyping: function onUserStoppedTyping(user) {\n                  if (user.id === _this2._otherUserId) {\n                    _this2.setState({\n                      otherUserIsTyping: false\n                    });\n                  }\n                },\n                onNewReadCursor: function onNewReadCursor(cursor) {\n                  var cursorBelongsToOtherUser = cursor.user.id === _this2._otherUserId;\n\n                  if (cursorBelongsToOtherUser) {\n                    _this2.setState({\n                      otherUserLastReadMessageId: cursor.position\n                    });\n                  }\n                }\n              }\n            });\n          }).then(function (room) {\n            return _this2.setState({\n              otherUser: room.users.find(function (u) {\n                return u.id === _this2._otherUserId;\n              }),\n              otherUserLastReadMessageId: _this2.context.chatkit.currentUser.readCursor({\n                userId: _this2._otherUserId,\n                roomId: _this2._roomId\n              }),\n              isLoading: false\n            });\n          })[\"catch\"](function (err) {\n            return console.error(err);\n          });\n        });\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this3 = this; // NOTE: At some point, if customers find them useful, we may want to\n        // add these properties to the JS SDK itself. We are adding them here\n        // for now as a cheap way to experiment.\n\n\n        var otherUser = null;\n\n        if (this.state.otherUser !== null) {\n          otherUser = Object.create(this.state.otherUser);\n          otherUser.isTyping = this.state.otherUserIsTyping;\n          otherUser.lastReadMessageId = this.state.otherUserLastReadMessageId;\n        } // We don't want to forward configuration props to the wrapped component\n\n\n        var forwardedProps = _objectSpread({}, this.props);\n\n        delete forwardedProps.otherUserId;\n        return _react[\"default\"].createElement(WrappedComponent, _extends({\n          chatkit: _objectSpread({}, this.context.chatkit, {\n            otherUser: otherUser,\n            messages: this.state.messages,\n            isLoading: this.state.isLoading,\n            sendSimpleMessage: function sendSimpleMessage(options) {\n              return _this3._sendSimpleMessage(options);\n            },\n            sendMultipartMessage: function sendMultipartMessage(options) {\n              return _this3._sendMultipartMessage(options);\n            },\n            sendTypingEvent: function sendTypingEvent(options) {\n              return _this3._sendTypingEvent(options);\n            },\n            setReadCursor: function setReadCursor(options) {\n              return _this3._setReadCursor(options);\n            }\n          })\n        }, forwardedProps));\n      }\n    }]);\n\n    return WithChatkitOneToOne;\n  }(_react[\"default\"].Component);\n\n  WithChatkitOneToOne.contextType = _context.ChatkitContext;\n  WithChatkitOneToOne.displayName = \"WithChatkitOneToOne(\".concat((0, _utils.getDisplayName)(WrappedComponent), \")\");\n  WithChatkitOneToOne.propTypes = {\n    otherUserId: _propTypes[\"default\"].string.isRequired\n  };\n  return WithChatkitOneToOne;\n}","map":{"version":3,"sources":["/Users/meikaprince/Desktop/chatkitpractice/chatkitpractice/node_modules/@pusher/chatkit-client-react/dist/with-chatkit-one-to-one.js"],"names":["Object","defineProperty","exports","value","withChatkitOneToOne","_propTypes","_interopRequireDefault","require","_react","_context","_utils","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","call","apply","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","toString","Array","from","isArray","arr2","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","_setPrototypeOf","p","WrappedComponent","WithChatkitOneToOne","_React$Component","_this","otherUserId","Error","state","otherUser","otherUserIsTyping","otherUserLastReadMessageId","undefined","messages","isLoading","_currentUserId","_otherUserId","_roomId","_currentUserLastReadMessageId","_sendSimpleMessage","_ref","text","context","chatkit","currentUser","sendSimpleMessage","roomId","_sendMultipartMessage","_ref2","parts","sendMultipartMessage","_sendTypingEvent","isTypingIn","_setReadCursor","lastMessage","id","setReadCursor","position","componentDidMount","_this2","addOnLoadListener","makeOneToOneRoomId","alreadyInRoom","rooms","some","r","Promise","resolve","serverInstanceV6","request","method","path","json","user_id","then","subscribeToRoomMultipart","hooks","onMessage","message","setState","concat","onPresenceChanged","user","forceUpdate","onUserStartedTyping","onUserStoppedTyping","onNewReadCursor","cursor","cursorBelongsToOtherUser","room","users","find","u","readCursor","userId","err","console","error","render","_this3","isTyping","lastReadMessageId","forwardedProps","createElement","options","sendTypingEvent","Component","contextType","ChatkitContext","displayName","getDisplayName","propTypes","string","isRequired"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.withChatkitOneToOne = withChatkitOneToOne;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _context = require(\"./context\");\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n/**\n * Wraps the given component and injects everything needed to create\n * one-to-one chat experinces under props.chatkit:\n *\n * @param {React.Component} WrappedComponent - Custom React component you would\n *      like to inject the Chatkit data into\n * @return {React.Component} A wrapped version of your component with the Chatkit\n *      SDK injected under props.chatkit\n *\n * @example\n * const MyChatComponent = props => {\n *    // Base Chatkit SDK\n *    props.chatkit.currentUser // Reference to the CurrentUser object\n *    props.chatkit.chatManager // Reference to the ChatManager object\n *\n *    // One-to-one chat data\n *    props.chatkit.otherUser // Reference to a Chatkit.User object for the other user in the chat\n *    props.chatkit.messages // An array of all the messages in the room\n *    props.chatkit.isLoading // True when the room is fully loaded, false otherwise\n *    props.chatkit.sendSimpleMessage // Method which sends a text-only message to the room\n *    props.chatkit.sendMultipartMessage // Method which sends a multi-part Chatkit message to the room\n *    props.chatkit.sendTypingEvent // Method which triggers a typing event for the current user in the current room\n *    props.chatkit.setReadCursor // Method which sets the current user's read cursor to the latest message\n * }\n */\nfunction withChatkitOneToOne(WrappedComponent) {\n  var WithChatkitOneToOne =\n  /*#__PURE__*/\n  function (_React$Component) {\n    _inherits(WithChatkitOneToOne, _React$Component);\n\n    function WithChatkitOneToOne(props) {\n      var _this;\n\n      _classCallCheck(this, WithChatkitOneToOne);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(WithChatkitOneToOne).call(this, props));\n\n      if (!props.otherUserId) {\n        throw new Error(\"otherUserId prop is required\");\n      }\n\n      _this.state = {\n        otherUser: null,\n        otherUserIsTyping: false,\n        otherUserLastReadMessageId: undefined,\n        messages: [],\n        isLoading: true\n      };\n      _this._currentUserId = null;\n      _this._otherUserId = props.otherUserId;\n      _this._roomId = null;\n      _this._currentUserLastReadMessageId = null;\n      return _this;\n    }\n\n    _createClass(WithChatkitOneToOne, [{\n      key: \"_sendSimpleMessage\",\n      value: function _sendSimpleMessage(_ref) {\n        var text = _ref.text;\n        return this.context.chatkit.currentUser.sendSimpleMessage({\n          roomId: this._roomId,\n          text: text\n        });\n      }\n    }, {\n      key: \"_sendMultipartMessage\",\n      value: function _sendMultipartMessage(_ref2) {\n        var parts = _ref2.parts;\n        return this.context.chatkit.currentUser.sendMultipartMessage({\n          roomId: this._roomId,\n          parts: parts\n        });\n      }\n    }, {\n      key: \"_sendTypingEvent\",\n      value: function _sendTypingEvent() {\n        return this.context.chatkit.currentUser.isTypingIn({\n          roomId: this._roomId\n        });\n      }\n    }, {\n      key: \"_setReadCursor\",\n      value: function _setReadCursor() {\n        if (this.state.messages.length === 0) {\n          return;\n        }\n\n        var lastMessage = this.state.messages[this.state.messages.length - 1];\n\n        if (lastMessage.id === this._currentUserLastReadMessageId) {\n          return;\n        }\n\n        this._currentUserLastReadMessageId = lastMessage.id;\n        return this.context.chatkit.currentUser.setReadCursor({\n          roomId: this._roomId,\n          position: lastMessage.id\n        });\n      }\n    }, {\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this2 = this;\n\n        this.context.addOnLoadListener(function () {\n          _this2._currentUserId = _this2.context.chatkit.currentUser.id;\n          _this2._roomId = (0, _utils.makeOneToOneRoomId)(_this2._currentUserId, _this2._otherUserId);\n\n          var alreadyInRoom = _this2.context.chatkit.currentUser.rooms.some(function (r) {\n            return r.id === _this2._roomId;\n          });\n\n          (alreadyInRoom ? Promise.resolve() : _this2.context.chatkit.currentUser.serverInstanceV6.request({\n            method: \"post\",\n            path: \"/one_to_one_rooms\",\n            json: {\n              user_id: _this2._otherUserId\n            }\n          })).then(function () {\n            return _this2.context.chatkit.currentUser.subscribeToRoomMultipart({\n              roomId: _this2._roomId,\n              hooks: {\n                onMessage: function onMessage(message) {\n                  return _this2.setState(function (state) {\n                    return {\n                      messages: [].concat(_toConsumableArray(state.messages), [message])\n                    };\n                  });\n                },\n                onPresenceChanged: function onPresenceChanged(state, user) {\n                  if (user.id === _this2.props.otherUserId) {\n                    _this2.forceUpdate();\n                  }\n                },\n                onUserStartedTyping: function onUserStartedTyping(user) {\n                  if (user.id === _this2._otherUserId) {\n                    _this2.setState({\n                      otherUserIsTyping: true\n                    });\n                  }\n                },\n                onUserStoppedTyping: function onUserStoppedTyping(user) {\n                  if (user.id === _this2._otherUserId) {\n                    _this2.setState({\n                      otherUserIsTyping: false\n                    });\n                  }\n                },\n                onNewReadCursor: function onNewReadCursor(cursor) {\n                  var cursorBelongsToOtherUser = cursor.user.id === _this2._otherUserId;\n\n                  if (cursorBelongsToOtherUser) {\n                    _this2.setState({\n                      otherUserLastReadMessageId: cursor.position\n                    });\n                  }\n                }\n              }\n            });\n          }).then(function (room) {\n            return _this2.setState({\n              otherUser: room.users.find(function (u) {\n                return u.id === _this2._otherUserId;\n              }),\n              otherUserLastReadMessageId: _this2.context.chatkit.currentUser.readCursor({\n                userId: _this2._otherUserId,\n                roomId: _this2._roomId\n              }),\n              isLoading: false\n            });\n          })[\"catch\"](function (err) {\n            return console.error(err);\n          });\n        });\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this3 = this;\n\n        // NOTE: At some point, if customers find them useful, we may want to\n        // add these properties to the JS SDK itself. We are adding them here\n        // for now as a cheap way to experiment.\n        var otherUser = null;\n\n        if (this.state.otherUser !== null) {\n          otherUser = Object.create(this.state.otherUser);\n          otherUser.isTyping = this.state.otherUserIsTyping;\n          otherUser.lastReadMessageId = this.state.otherUserLastReadMessageId;\n        } // We don't want to forward configuration props to the wrapped component\n\n\n        var forwardedProps = _objectSpread({}, this.props);\n\n        delete forwardedProps.otherUserId;\n        return _react[\"default\"].createElement(WrappedComponent, _extends({\n          chatkit: _objectSpread({}, this.context.chatkit, {\n            otherUser: otherUser,\n            messages: this.state.messages,\n            isLoading: this.state.isLoading,\n            sendSimpleMessage: function sendSimpleMessage(options) {\n              return _this3._sendSimpleMessage(options);\n            },\n            sendMultipartMessage: function sendMultipartMessage(options) {\n              return _this3._sendMultipartMessage(options);\n            },\n            sendTypingEvent: function sendTypingEvent(options) {\n              return _this3._sendTypingEvent(options);\n            },\n            setReadCursor: function setReadCursor(options) {\n              return _this3._setReadCursor(options);\n            }\n          })\n        }, forwardedProps));\n      }\n    }]);\n\n    return WithChatkitOneToOne;\n  }(_react[\"default\"].Component);\n\n  WithChatkitOneToOne.contextType = _context.ChatkitContext;\n  WithChatkitOneToOne.displayName = \"WithChatkitOneToOne(\".concat((0, _utils.getDisplayName)(WrappedComponent), \")\");\n  WithChatkitOneToOne.propTypes = {\n    otherUserId: _propTypes[\"default\"].string.isRequired\n  };\n  return WithChatkitOneToOne;\n}"]},"metadata":{},"sourceType":"script"}